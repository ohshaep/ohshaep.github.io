import{aI as I,z as jt,r as c,A as W,V as Dt,at as se,o as d,c as x,d as n,w as l,e as p,t as g,h as re,D as de,f as b,g as i,R as Pt,F as $,W as ie,i as _,Q as h,bU as Ot,b6 as Qt,m as L,M,_ as $t,a3 as Lt,n as Mt,b3 as Bt,a8 as Et,a9 as Ft,a6 as zt,B as Kt,s as qt,a4 as Yt,aB as Vt,b1 as At,K as Wt,a5 as Gt,L as Jt,x as Xt,ac as Zt,l as Ht,q as ea,bW as ta,bX as aa,bY as la,bZ as na,b_ as ua,b$ as oa,p as sa,N as ra,O as da,G as ia}from"./index.192c8708.js";const ke=[{title:"\u5E8F\u53F7",dataIndex:"key",key:"key",align:"center",width:50,scopedSlots:{customRender:(f,D,z)=>`${z+1}`}},{title:"\u5546\u54C1\u7F16\u7801",dataIndex:"productCode",width:150,ellipsis:!0,key:"productCode",scopedSlots:{customRender:"productCode"},slots:{customRender:"productCode"}},{title:"\u5546\u54C1\u540D\u79F0",dataIndex:"productName",width:180,ellipsis:!0,key:"productName",scopedSlots:{customRender:"productName"},slots:{customRender:"productName"}},{title:"\u89C4\u683C\u578B\u53F7",dataIndex:"productSpec",width:150,ellipsis:!0,scopedSlots:{customRender:"productSpec"},slots:{customRender:"productSpec"}},{title:"\u8BA2\u8D27\u6570\u91CF",dataIndex:"orderQuality",width:150,ellipsis:!0,scopedSlots:{customRender:"orderQuality"},slots:{customRender:"orderQuality"},summary:!0,type:"orderQuality"},{title:"\u8BA1\u91CF\u5355\u4F4D",dataIndex:"measureUnit",width:150,ellipsis:!0,scopedSlots:{customRender:"measureUnit"},slots:{customRender:"measureUnit"}},{title:"\u57FA\u672C\u8BA1\u91CF\u5355\u4F4D\u6570\u91CF",dataIndex:"jbjsdwsl",width:150,ellipsis:!0,scopedSlots:{customRender:"jbjsdwsl"},slots:{customRender:"jbjsdwsl"},summary:!0,type:"jbjsdwsl"},{title:"\u57FA\u672C\u8BA1\u91CF\u5355\u4F4D",dataIndex:"baseMeasureUnit",width:150,ellipsis:!0,scopedSlots:{customRender:"baseMeasureUnit"},slots:{customRender:"baseMeasureUnit"}},{title:"\u542B\u7A0E\u5355\u4EF7(\u5143)",dataIndex:"unitPrice",width:150,ellipsis:!0,scopedSlots:{customRender:"unitPrice"},slots:{customRender:"unitPrice"}},{title:"\u542B\u7A0E\u5408\u8BA1(\u5143)",dataIndex:"hshj",width:150,ellipsis:!0,scopedSlots:{customRender:"hshj"},slots:{customRender:"hshj"},summary:!0,type:"hshj"},{title:"\u7CAE\u98DF\u6027\u8D28",dataIndex:"nature",width:150,ellipsis:!0,scopedSlots:{customRender:"nature"},slots:{customRender:"nature"}},{title:"\u5408\u4F5C\u5BA2\u6237",dataIndex:"cooperatorId",width:150,ellipsis:!0,scopedSlots:{customRender:"cooperatorId"},slots:{customRender:"cooperatorId"}},{title:"\u6536\u8D27\u4ED3\u5E93",dataIndex:"receiveStorehouse",width:150,ellipsis:!0,scopedSlots:{customRender:"receiveStorehouse"},slots:{customRender:"receiveStorehouse"}},{title:"\u4EA4\u8D27\u65E5\u671F",dataIndex:"deliveryDate",width:150,ellipsis:!0,scopedSlots:{customRender:"deliveryDate"},slots:{customRender:"deliveryDate"}},{title:"\u5907\u6CE8",dataIndex:"remark",width:150,ellipsis:!0,scopedSlots:{customRender:"remark"},slots:{customRender:"remark"}}],ca=[{title:"\u91C7\u8D2D\u8BA2\u5355\u7F16\u53F7",dataIndex:"purchaseOrderCode",ellipsis:!0,width:150},{title:"\u4F9B\u5E94\u5546",dataIndex:"supplierName",ellipsis:!0,width:150},{title:"\u91C7\u8D2D\u5408\u540C\u53F7",dataIndex:"contractNo",ellipsis:!0,width:150},{title:"\u5E01\u522B",dataIndex:"currency",ellipsis:!0,width:150},{title:"\u5546\u54C1\u7F16\u7801",dataIndex:"productCode",ellipsis:!0,width:150},{title:"\u5546\u54C1\u540D\u79F0",dataIndex:"productName",ellipsis:!0,width:180},{title:"\u89C4\u683C\u578B\u53F7",dataIndex:"productSpec",ellipsis:!0,width:150},{title:"\u8BA2\u8D27\u6570\u91CF",dataIndex:"orderQuality",ellipsis:!0,width:150},{title:"\u5269\u4F59\u6536\u8D27\u6570\u91CF",dataIndex:"unreceivedQuality",ellipsis:!0,width:120},{title:"\u8BA1\u91CF\u5355\u4F4D",dataIndex:"measureUnit",ellipsis:!0,width:150},{title:"\u57FA\u672C\u8BA1\u91CF\u5355\u4F4D\u6570\u91CF",dataIndex:"baseQuality",ellipsis:!0,width:150},{title:"\u57FA\u672C\u8BA1\u91CF\u5355\u4F4D",dataIndex:"baseMeasureUnit",ellipsis:!0,width:150},{title:"\u542B\u7A0E\u5355\u4EF7(\u5143)",dataIndex:"unitPrice",ellipsis:!0,width:150},{title:"\u4EF7\u7A0E\u5408\u8BA1(\u5143)",dataIndex:"totalPrice",ellipsis:!0,width:150},{title:"\u7CAE\u98DF\u6027\u8D28",dataIndex:"nature",ellipsis:!0,width:150},{title:"\u8BA2\u5355\u7C7B\u578B",dataIndex:"orderType",ellipsis:!0,width:150},{title:"\u5408\u4F5C\u5BA2\u6237",dataIndex:"cooperatorName",ellipsis:!0,width:150},{title:"\u6536\u8D27\u4ED3\u5E93",dataIndex:"receiveStorehouseName",ellipsis:!0,width:150},{title:"\u4EA4\u8D27\u65E5\u671F",dataIndex:"deliveryDate",ellipsis:!0,width:150},{title:"\u5907\u6CE8",dataIndex:"remark",ellipsis:!0,width:150},{title:"\u5236\u5355\u65F6\u95F4",dataIndex:"createTime",ellipsis:!0,width:160},{title:"\u5236\u5355\u4EBA",dataIndex:"createBy",ellipsis:!0,width:150},{title:"\u5BA1\u6838\u65F6\u95F4",dataIndex:"approveTime",ellipsis:!0,width:160},{title:"\u5BA1\u6838\u4EBA",dataIndex:"approveUser",ellipsis:!0,width:150},{title:"\u5BA1\u6838\u72B6\u6001",dataIndex:"orderStatus",ellipsis:!0,width:150},{title:"\u64CD\u4F5C",dataIndex:"operation",fixed:"right",align:"center",width:150}];function pa(f){return I({url:"/purchaseOrderInfo/list",method:"post",params:f})}function va(f){return I({url:"/purchaseOrderInfo/query/"+f,method:"get"})}function ma(f){return I({url:"/cooperatorInfo/selectList",method:"post",params:f})}function _a(f){return I({url:"/storehouseInfo/selectList",method:"post",params:f})}function fa(){return I({url:"/categoryManage/tree",method:"get"})}function ha(f){return I({url:"/productInfo/selectList",method:"post",params:f})}function ya(){return I({url:"/supplierInfo/selectList",method:"post"})}function Ce(f){return I({url:"/purchaseOrderInfo/edit",method:"post",data:f})}function Ue(f){return I({url:"/purchaseOrderInfo/delete/"+f,method:"post"})}function ga(f){return I({url:"/common/calculate",method:"post",data:f})}const G=f=>(ra("data-v-18310636"),f=f(),da(),f),ba=G(()=>b("span",{class:"separate"},"/",-1)),xa=G(()=>b("span",null,"\u91C7\u8D2D\u8BA2\u5355\u5217\u8868",-1)),wa={class:"app-container"},Ia={class:"container-wrapper"},Sa={key:0},ka={key:8},Ca={key:9},Ua={key:0,style:{color:"#c2c2c2"}},Ra={class:"app-container"},Ta={class:"container-wrapper"},Na={key:0,style:{"margin-bottom":"10px",color:"#f50736","font-weight":"bolder","font-size":"16px"}},ja={style:{display:"flex","justify-content":"space-between",width:"100%","margin-top":"20px"}},Da={style:{display:"flex","justify-content":"space-between",width:"100%","margin-top":"20px"}},Pa={style:{display:"flex","justify-content":"space-between",width:"100%","margin-top":"20px"}},Oa={style:{display:"flex","justify-content":"space-between",width:"66%","margin-top":"20px","margin-bottom":"20px"}},Qa={key:4},$a={key:5},La=G(()=>b("div",null,[b("span",null,"\u5546\u54C1\u5206\u7C7B")],-1)),Ma={class:"head-container"},Ba={key:1,style:{"text-align":"center"}},Ea=G(()=>b("span",null,"\u6682\u65E0\u6570\u636E",-1)),Fa=[Ea],za={__name:"index",setup(f){const{proxy:D}=ia(),z=c([]),N=c(!1),K=c(!0),Re=c(!0),Te=c([]),ce=c(""),S=c([]),P=c(null),Ne=["productCode","productName","productSpec","orderQuality","measureUnit","jbjsdwsl","baseMeasureUnit","unitPrice","hshj","nature","cooperatorId","receiveStorehouse","deliveryDate","remark"],je=["deliveryDate"],De=[""],Pe=["orderQuality","unitPrice","remark"],Oe=["measureUnit","nature","cooperatorId","receiveStorehouse"],pe=c([]),s=c([{key:1,orderQuality:void 0,unitPrice:void 0,remark:void 0,productName:void 0,measureUnit:void 0,cooperatorId:void 0,receiveStorehouse:void 0,deliveryDate:void 0,editable:!0}]),Qe=c([{value:"",label:"\u5168\u90E8"},{value:4,label:"\u5DF2\u53D6\u6D88"},{value:1,label:"\u5F85\u5BA1\u6838"},{value:3,label:"\u5BA1\u6838\u901A\u8FC7"},{value:2,label:"\u5BA1\u6838\u4E0D\u901A\u8FC7"}]),$e=c([{value:1,label:"\u63D0\u4EA4\u65F6\u95F4"},{value:2,label:"\u5BA1\u6838\u65F6\u95F4"}]),ve=c([{value:"purchaseOrderCode",label:"\u91C7\u8D2D\u8BA2\u5355\u7F16\u53F7"},{value:"supplierName",label:"\u4F9B\u5E94\u5546\u540D\u79F0"},{value:"productCode",label:"\u5546\u54C1\u7F16\u53F7"},{value:"productName",label:"\u5546\u54C1\u540D\u79F0"},{value:"contractNo",label:"\u91C7\u8D2D\u5408\u540C\u53F7"},{value:"orderUser",label:"\u5236\u5355\u4EBA"}]),Le=c([{title:"\u7269\u6599\u7F16\u7801",dataIndex:"id",ellipsis:!0,scopedSlots:{customRender:"id"},slots:{customRender:"id"}},{title:"\u7269\u6599\u540D\u79F0",dataIndex:"productName",ellipsis:!0,scopedSlots:{customRender:"productName"},slots:{customRender:"productName"}},{title:"\u89C4\u683C\u578B\u53F7",dataIndex:"specName",ellipsis:!0,scopedSlots:{customRender:"specName"},slots:{customRender:"specName"}},{title:"\u57FA\u672C\u8BA1\u91CF\u5355\u4F4D",dataIndex:"measurementUnit",ellipsis:!0}]),Me=c([{value:1,label:"\u5B9A\u5411\u8D2D\u9500"},{value:2,label:"\u81EA\u4E3B\u7ECF\u8425"}]),Be=c([{value:1,label:"\u4EBA\u6C11\u5E01"},{value:2,label:"\u7F8E\u5143"}]);c([{value:1,label:"\u5408\u4F5C\u8F6C\u6362"},{value:2,label:"\u81EA\u4E3B\u8F6C\u6362"}]);const Ee=W({form:{},searchType:"purchaseOrderCode",queryParams:{offset:0,limit:10,timeType:1,orderStatus:"",beginTime:"",endTime:""},queryParamsTwo:{},rules:{ctgName:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),k=c(void 0),B=c(""),{queryParams:v,form:me,rules:Fe,searchType:E,queryParamsTwo:u}=Dt(Ee);function Ka(e,t){}const q=c(!1),R=c(void 0);function ze(e){R.value=e,pt(),q.value=!0}const Ke=W({onChange:(e,t)=>{pe.value=[],pe.value=t.map(o=>o.key)}}),Y=c(""),qe=W({type:"radio",onChange:(e,t)=>{Y.value=e}}),Ye=()=>{if(Y.value!==""&&Y.value!==null){let e=Y.value;s.value[R.value].productName=k.value[e].productName,s.value[R.value].productCode=k.value[e].productId,s.value[R.value].productId=k.value[e].productId,s.value[R.value].productSpec=k.value[e].specName,s.value[R.value].productSpecId=k.value[e].id,s.value[R.value].baseMeasureUnit=k.value[e].measurementUnit,V(R.value),q.value=!1}else L.error("\u8BF7\u9009\u62E9\u89C4\u683C")};function Ve(e,t,o){t=="unitPrice"?(e!==""&&e.substr(0,1)==="."&&(e=""),e=e.replace(/^0*(0\.|[1-9])/,"$1"),e=e.replace(/[^\d.]/g,""),e=e.replace(/\.{2,}/g,"."),e=e.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e=e.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),e.indexOf(".")<0&&e!==""&&e.substr(0,1)==="0"&&e.length===2&&(e=e.substr(1,e.length)),s.value[o][t]=e):(t=="orderQuality"&&(e=e.replace(/^0*(0\.|[1-9])/,"$1"),e=e.replace(/[^\d.]/g,"")),s.value[o][t]=e),e==""&&(s.value[o].jbjsdwsl=null,s.value[o].hshj=null),(t=="orderQuality"||t=="unitPrice")&&V(o)}function Ae(e){ve.value.forEach((t,o)=>{t.value!=e&&(v.value[t.value]="")})}function We(e,t,o){console.log(s.value[o][t],"$event")}function Ge(e,t,o){console.log(e,t,"cxzcxx"),s.value[o][t]=e,t=="measureUnit"&&V(o)}const Je=async(e,t)=>(await ga(e)).data;function V(e,t){if(s.value[e].orderQuality&&s.value[e].measureUnit&&s.value[e].unitPrice&&s.value[e].baseMeasureUnit){let o={orderQuality:s.value[e].orderQuality,measureUnit:s.value[e].measureUnit,baseMeasureUnit:s.value[e].baseMeasureUnit,unitPrice:s.value[e].unitPrice};Je(o).then(y=>{s.value[e].jbjsdwsl=y.baseQuality,s.value[e].hshj=y.totalPrice})}}const J=c(0),Xe=se(()=>(J.value=0,s.value.forEach((e,t)=>{console.log(e.hshj,"tdasda"),e.hshj&&(J.value+=Number(e.hshj))}),J.value)),X=c(0),Ze=se(()=>(X.value=0,s.value.forEach((e,t)=>{console.log(e.hshj,"tdasda"),e.orderQuality&&(X.value+=Number(e.orderQuality))}),X.value)),Z=c(0),He=se(()=>(Z.value=0,s.value.forEach((e,t)=>{console.log(e.jbjsdwsl,"xxxxx"),e.jbjsdwsl&&(Z.value+=Number(e.jbjsdwsl))}),Z.value)),_e=c([]),fe=c([]),H=c([]);function et(e){if(e=="measureUnit")return[{value:1,label:"\u65A4"},{value:2,label:"\u516C\u65A4/\u5343\u514B"},{value:3,label:"\u5428"}];if(e=="nature")return[{value:1,label:"\u50A8\u5907\u7CAE"},{value:2,label:"\u5546\u54C1\u7CAE"},{value:3,label:"\u8F6E\u6362\u7CAE\u6CB9"}];if(e=="cooperatorId")return H.value;if(e=="receiveStorehouse")return fe.value}function O(){K.value=!0,v.value[E.value]=B.value,pa(D.addDateRange(v.value)).then(e=>{const t=e==null?void 0:e.data;z.value=t.data,F.total=(t==null?void 0:t.row)||0,K.value=!1})}function tt(e){console.log(e,"x");const t=e.id||Te.value,o=e!=null&&e.ctgName?e.ctgName+"\u7684":"",m=e.status==1?0:1;M.confirm({title:"\u64CD\u4F5C\u786E\u8BA4",content:"\u662F\u5426\u786E\u8BA4\u4FEE\u6539"+o+"\u72B6\u6001\uFF1F",onOk(){categoryUpdate({status:m,id:t,ctgName:e.ctgName,ctgParentId:e.ctgParentId}).then(()=>{O(),L.success("\u4FEE\u6539\u6210\u529F")}).catch(()=>{})}})}function at(){me.value={id:void 0,ctgName:void 0,status:"0",remark:void 0},D.resetForm("dictRef")}function he(){F.current=1,v.value.offset=0,S.value.length>0?(v.value.beginTime=S.value[0],v.value.endTime=S.value[1]):(v.value.beginTime="",v.value.endTime=""),O()}function lt(){K.value=!0,S.value.length>0?(v.value.beginTime=S.value[0],v.value.endTime=S.value[1]):(v.value.beginTime="",v.value.endTime=""),v.value[E.value]=B.value,D.addDateRange(v.value),D.download("/purchaseOrderInfo/exportData",{...v.value},`\u91C7\u8D2D\u8BA2\u5355_${new Date().getTime()}.xlsx`),K.value=!1}function ee(){S.value=[],B.value="",D.resetForm("queryRef"),he()}const ye=(e,t,o)=>{F.current=e,o&&(F.pageSize=t,v.value.limit=t),v.value.offset=(e-1)*t,O()},F=W({current:1,pageSize:10,total:0,showTotal:e=>`\u5171 ${e} \u6761`,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["2","20","50","100"],onChange:(e,t)=>ye(e,t),onShowSizeChange:(e,t)=>ye(e,t,"sizeChange")});function nt(){N.value=!1,u.value={}}function ut(e){const t=e.id;M.confirm({title:"\u64CD\u4F5C\u786E\u8BA4",content:"\u662F\u5426\u786E\u5B9A\u64A4\u56DE\uFF1F",onOk(){Ce({id:t,orderStatus:4}).then(()=>{O(),L.success("\u64A4\u56DE\u6210\u529F")}).catch(()=>{})}})}function ot(e){at(),P.value=e.id,me.value.id=e.id,va(P.value).then(t=>{ft(e.id),ce.value="\u4FEE\u6539\u5546\u54C1",u.orderStatus,s.value[0]=t.data,V(0),u.value.orderType=t.data.orderType,u.value.natureConvert=t.data.natureConvert,u.value.supplierId=t.data.supplierId,u.value.contractNo=t.data.contractNo,u.value.currency=t.data.currency,u.value.approveReason=t.data.approveReason,u.value.purchaseOrderCode=t.data.purchaseOrderCode,u.value.approveTime=t.data.approveTime,u.value.orderUser=t.data.orderUser==""?t.data.createBy:t.data.orderUser,u.value.createBy=t.data.createBy,u.value.orderStatus=t.data.orderStatus==1?"\u5F85\u5BA1\u6838":t.data.orderStatus==2?"\u5BA1\u6838\u4E0D\u901A\u8FC7":t.data.orderStatus==3?"\u5BA1\u6838\u901A\u8FC7":"\u5DF2\u53D6\u6D88",u.value.approveUser=t.data.approveUser,u.value.orderTime=t.data.orderTime==""?t.data.createTime:t.data.orderTime,u.value.createTime=t.data.createTime,u.value.storageQuality=t.data.storageQuality,u.value.cooperatorId=t.data.cooperatorId,s.value[0].key=1,s.value[0].editable=!0,N.value=!0})}function st(e){console.log(),P.value=e.id,M.confirm({title:"\u64CD\u4F5C\u786E\u8BA4",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u8BE5\u6570\u636E\uFF1F",onOk(){Ue(P.value).then(()=>{ee(),L.success("\u5220\u9664\u6210\u529F")}).catch(()=>{})}})}const A=c([]),ge=c([]),rt=c(!0);function dt(e,t){if(k.value=void 0,e.length!=0){let o;t.node.ctgLevel==1?o={ctgLevel1Id:e[0]}:o={ctgLevel2Id:e[0]},ha(o).then(m=>{let y=m==null?void 0:m.data;k.value=y})}}const it=e=>{ge.value=e,rt.value=!1},ct=e=>{if(e.length<1)return[];function t(o){o.map(m=>{m.key=m.id,m.title=m.ctgName,m.children&&m.children.length&&t(m.children)})}return t(e),e};function pt(){fa().then(e=>{const t=(e==null?void 0:e.data)||[],o=ct(t);console.log(o),A.value=o,be(t)})}const vt=[],be=e=>{if(!!e)for(let t=0;t<e.length;t++){const o=e[t],m=o.key;vt.push({key:m,title:o.title}),o.children&&be(o.children)}};function mt(){M.confirm({title:"\u64CD\u4F5C\u786E\u8BA4",content:"\u662F\u5426\u786E\u5B9A\u4FEE\u6539\uFF1F",onOk(){Ce({...u.value,...s.value[0],orderStatus:1,id:P.value}).then(()=>{N.value=!1,O(),L.success("\u63D0\u4EA4\u6210\u529F")}).catch(()=>{})}})}function _t(){M.confirm({title:"\u64CD\u4F5C\u786E\u8BA4",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onOk(){Ue(P.value).then(()=>{N.value=!1,ee(),L.success("\u5220\u9664\u6210\u529F")}).catch(()=>{})}})}function ft(){ma().then(e=>{const t=e==null?void 0:e.data;H.value=[],t.forEach(o=>{H.value.push({value:o.id,label:o.cooperatorName})})})}function ht(){_a().then(e=>{(e==null?void 0:e.data).forEach(o=>{fe.value.push({value:o.id,label:o.storeName})})})}const yt=()=>{ya().then(e=>{e.data.forEach(t=>{_e.value.push({value:t.id,label:t.supplierName})})})};return ht(),yt(),O(),(e,t)=>{const o=$t,m=Lt,y=Mt,gt=Bt,bt=Et,xe=Ft,te=zt,Q=Kt,ae=qt,C=Yt,xt=Vt,wt=At,le=Wt,It=Gt,St=Jt,ne=Xt,kt=Zt,j=Ht,we=ea,Ct=ta,Ie=aa,ue=la,Ut=na,Rt=ua,Tt=oa,Se=sa,Nt=M;return d(),x($,null,[n(o,{title:N.value?"\u7F16\u8F91":"\u91C7\u8D2D\u8BA2\u5355\u5217\u8868",icon:"icon-xuniziyuan",back:"/overview"},{nav:l(()=>[p(g("\u91C7\u8D2D\u8BA2\u5355\u5217\u8868")+" "),ba,xa]),_:1},8,["title"]),re(b("div",wa,[b("div",Ia,[re(n(ae,{model:i(v),ref:"queryRef",layout:"inline","label-width":"68px"},{default:l(()=>[n(y,{name:"timeType"},{default:l(()=>[n(m,{label:"",value:i(v).timeType,"onUpdate:value":t[0]||(t[0]=a=>i(v).timeType=a),clearable:"",style:{width:"100px"},options:$e.value},null,8,["value","options"])]),_:1}),n(y,{style:{width:"228px","margin-left":"-15px"},name:"dateRange"},{default:l(()=>[n(gt,{value:S.value,"onUpdate:value":t[1]||(t[1]=a=>S.value=a),"value-format":"YYYY-MM-DD"},null,8,["value"])]),_:1}),n(y,{label:""},{default:l(()=>[n(te,{placeholder:"\u8BF7\u8F93\u5165",value:B.value,"onUpdate:value":t[3]||(t[3]=a=>B.value=a)},{addonBefore:l(()=>[n(xe,{style:{width:"120px"},value:i(E),"onUpdate:value":t[2]||(t[2]=a=>Pt(E)?E.value=a:null),onChange:Ae},{default:l(()=>[(d(!0),x($,null,ie(ve.value,(a,r)=>(d(),_(bt,{key:r,value:a.value},{default:l(()=>[p(g(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},8,["value"])]),_:1}),n(y,{name:"orderStatus"},{default:l(()=>[n(m,{label:"\u8BA2\u5355\u72B6\u6001",value:i(v).orderStatus,"onUpdate:value":t[4]||(t[4]=a=>i(v).orderStatus=a),placeholder:"\u8BF7\u9009\u62E9",clearable:"",style:{width:"240px"},options:Qe.value},null,8,["value","options"])]),_:1}),n(y,null,{default:l(()=>[n(Q,{type:"primary",onClick:he},{default:l(()=>[p(" \u67E5\u8BE2 ")]),_:1}),n(Q,{type:"primary",ghost:"",onClick:ee,style:{"margin-left":"15px"}},{default:l(()=>[p(" \u91CD\u7F6E ")]),_:1}),n(Q,{type:"primary",onClick:lt,style:{"margin-left":"15px"}},{default:l(()=>[p(" \u5BFC\u51FA ")]),_:1})]),_:1})]),_:1},8,["model"]),[[de,Re.value]])]),n(ne,{scroll:{x:0,y:500},dataSource:z.value,columns:i(ca),pagination:F,expandIconColumnIndex:-1},{bodyCell:l(({column:a,record:r})=>[a.dataIndex==="ctgParentName"?(d(),x($,{key:0},[r.ctgParentName==""?(d(),x("span",Sa,"-")):(d(),_(C,{key:1},{default:l(()=>[p(g(r.ctgParentName),1)]),_:2},1024))],64)):h("",!0),a.dataIndex==="orderType"?(d(),_(C,{key:1},{default:l(()=>[p(g(r.orderType==1?"\u5B9A\u5411\u8D2D\u9500":"\u81EA\u4E3B\u7ECF\u8425"),1)]),_:2},1024)):h("",!0),a.dataIndex==="natureConvert"?(d(),_(C,{key:2},{default:l(()=>[p(g(r.natureConvert==1?"\u5408\u4F5C\u8F6C\u6362":"\u81EA\u4E3B\u8F6C\u6362"),1)]),_:2},1024)):h("",!0),a.dataIndex==="currency"?(d(),_(C,{key:3},{default:l(()=>[p(g(r.currency==1?"\u4EBA\u6C11\u5E01":"\u7F8E\u5143"),1)]),_:2},1024)):h("",!0),a.dataIndex==="measureUnit"?(d(),_(C,{key:4},{default:l(()=>[p(g(r.measureUnit==1?"\u65A4":r.measureUnit==2?"\u516C\u65A4":"\u5428"),1)]),_:2},1024)):h("",!0),a.dataIndex==="baseMeasureUnit"?(d(),_(C,{key:5},{default:l(()=>[p(g(r.baseMeasureUnit==1?"\u65A4":r.baseMeasureUnit==2?"\u516C\u65A4":"\u5428"),1)]),_:2},1024)):h("",!0),a.dataIndex==="nature"?(d(),_(C,{key:6},{default:l(()=>[p(g(r.nature==1?"\u50A8\u5907\u7CAE":r.nature==2?"\u5546\u54C1\u7CAE":"\u8F6E\u6362\u7CAE\u6CB9"),1)]),_:2},1024)):h("",!0),a.dataIndex==="orderStatus"?(d(),x($,{key:7},[n(C,null,{default:l(()=>[p(g(r.orderStatus==1?"\u5F85\u5BA1\u6838":r.orderStatus==2?"\u5BA1\u6838\u4E0D\u901A\u8FC7":r.orderStatus==3?"\u5BA1\u6838\u901A\u8FC7":"\u5DF2\u53D6\u6D88"),1)]),_:2},1024),r.orderStatus==2?(d(),_(xt,{key:0,placement:"top"},{title:l(()=>[b("span",null,g(r.approveReason),1)]),default:l(()=>[n(i(Ot))]),_:2},1024)):h("",!0)],64)):h("",!0),a.dataIndex==="status"?(d(),x("span",ka,[n(wt,{checked:r.status!=1,onClick:U=>tt(r)},null,8,["checked","onClick"])])):h("",!0),a.dataIndex==="operation"?(d(),x("span",Ca,[n(St,{size:"big"},{default:l(()=>[r.orderStatus==3?(d(),x("div",Ua,"\u64A4\u56DE")):h("",!0),r.orderStatus==1?(d(),_(le,{key:1,onClick:U=>ut(r)},{default:l(()=>[p(" \u64A4\u56DE ")]),_:2},1032,["onClick"])):h("",!0),r.orderStatus==2||r.orderStatus==4?(d(),_(le,{key:2,onClick:U=>ot(r)},{default:l(()=>[p(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])):h("",!0),r.orderStatus==2||r.orderStatus==4?(d(),_(le,{key:3,onClick:U=>st(r)},{default:l(()=>[n(It,{type:"vertical",style:{"background-color":"#05C059"}}),p(" \u5220\u9664 ")]),_:2},1032,["onClick"])):h("",!0)]),_:2},1024)])):h("",!0)]),_:1},8,["dataSource","columns","pagination"])],512),[[de,!N.value]]),re(b("div",Ra,[n(we,{justify:"space-between",style:{flex:"1"}},{default:l(()=>[b("div",Ta,[n(ae,{class:"backBox",style:{display:"flex","justify-content":"space-between",width:"100%","margin-bottom":"20px"}},{default:l(()=>[b("div",null,[n(Q,{type:"primary",onClick:nt},{default:l(()=>[p("\u8FD4\u56DE\u4E0A\u4E00\u9875")]),_:1})]),b("div",null,[n(Q,{type:"primary",onClick:t[5]||(t[5]=a=>_t()),style:{"margin-right":"20px"}},{default:l(()=>[p("\u5220\u9664")]),_:1}),n(Q,{type:"primary",onClick:mt},{default:l(()=>[p("\u63D0\u4EA4")]),_:1})])]),_:1}),n(ae,{layout:"inline",ref:"queryRefUpdata",rules:i(Fe),model:i(u)},{default:l(()=>[i(u).orderStatus=="\u5BA1\u6838\u4E0D\u901A\u8FC7"?(d(),x("div",Na,"\u4E0D\u901A\u8FC7\u539F\u56E0")):h("",!0),n(kt,{value:i(u).approveReason,"onUpdate:value":t[6]||(t[6]=a=>i(u).approveReason=a),disabled:"",defaultValue:"\u65E0","auto-size":{minRows:2,maxRows:5}},null,8,["value"]),b("div",ja,[n(y,{name:"purchaseOrderCode"},{default:l(()=>[n(j,{label:"\u91C7\u8D2D\u8BA2\u5355\u7F16\u53F7",placeholder:"\u65E0",disabled:"",value:i(u).purchaseOrderCode,"onUpdate:value":t[7]||(t[7]=a=>i(u).purchaseOrderCode=a),style:{width:"400px"}},null,8,["value"])]),_:1}),n(y,{name:"orderTime"},{default:l(()=>[n(j,{label:"\u5236\u5355\u65F6\u95F4",placeholder:"\u65E0",disabled:"",value:i(u).orderTime,"onUpdate:value":t[8]||(t[8]=a=>i(u).orderTime=a),style:{width:"400px"}},null,8,["value"])]),_:1}),n(y,{name:"orderUser"},{default:l(()=>[n(j,{label:"\u5236\u5355\u4EBA",placeholder:"\u65E0",disabled:"",value:i(u).orderUser,"onUpdate:value":t[9]||(t[9]=a=>i(u).orderUser=a),style:{width:"400px"}},null,8,["value"])]),_:1})]),b("div",Da,[n(y,{name:"approveTime"},{default:l(()=>[n(j,{label:"\u5BA1\u6838\u65F6\u95F4",placeholder:"\u65E0",disabled:"",value:i(u).approveTime,"onUpdate:value":t[10]||(t[10]=a=>i(u).approveTime=a),style:{width:"400px"}},null,8,["value"])]),_:1}),n(y,{name:"approveUser"},{default:l(()=>[n(j,{label:"\u5BA1\u6838\u4EBA",placeholder:"\u65E0",disabled:"",value:i(u).approveUser,"onUpdate:value":t[11]||(t[11]=a=>i(u).approveUser=a),style:{width:"400px"}},null,8,["value"])]),_:1}),n(y,{name:"orderStatus"},{default:l(()=>[n(j,{label:"\u8BA2\u5355\u72B6\u6001",placeholder:"\u65E0",disabled:"",value:i(u).orderStatus,"onUpdate:value":t[12]||(t[12]=a=>i(u).orderStatus=a),style:{width:"400px"}},null,8,["value"])]),_:1})]),b("div",Pa,[n(y,{label:"",name:"orderType"},{default:l(()=>[n(m,{label:"\u8BA2\u5355\u7C7B\u578B",placeholder:"\u8BF7\u9009\u62E9",style:{width:"400px"},disabled:"",value:i(u).orderType,"onUpdate:value":t[13]||(t[13]=a=>i(u).orderType=a),options:Me.value,onChange:t[14]||(t[14]=a=>void 0)},null,8,["value","options"])]),_:1}),n(y,{name:"contractNo"},{default:l(()=>[n(j,{label:"\u91C7\u8D2D\u5408\u540C\u53F7",placeholder:"\u8BF7\u8F93\u5165",disabled:"",value:i(u).contractNo,"onUpdate:value":t[15]||(t[15]=a=>i(u).contractNo=a),style:{width:"400px"}},null,8,["value"])]),_:1}),n(y,{name:"supplierId"},{default:l(()=>[n(m,{label:"\u4F9B\u5E94\u5546",placeholder:"\u8BF7\u9009\u62E9",style:{width:"400px"},disabled:"",value:i(u).supplierId,"onUpdate:value":t[16]||(t[16]=a=>i(u).supplierId=a),options:_e.value,onChange:t[17]||(t[17]=a=>void 0)},null,8,["value","options"])]),_:1})]),b("div",Oa,[n(y,{name:"currency"},{default:l(()=>[n(m,{label:"\u5E01\u53F7",placeholder:"\u8BF7\u9009\u62E9",style:{width:"400px"},disabled:"",value:i(u).currency,"onUpdate:value":t[18]||(t[18]=a=>i(u).currency=a),options:Be.value,onChange:t[19]||(t[19]=a=>void 0)},null,8,["value","options"])]),_:1})])]),_:1},8,["rules","model"])])]),_:1}),n(ne,{scroll:{x:"max-content",y:240},columns:i(ke),"data-source":s.value,bordered:"",size:"small","row-Selection":Ke,rowKey:a=>a.key,summary:!0},Qt({summary:l(()=>[n(Rt,{fixed:""},{default:l(()=>[n(Ut,null,{default:l(()=>[n(Ie,{index:0},{default:l(()=>[p(" \u5408\u8BA1")]),_:1}),(d(!0),x($,null,ie(i(ke),(a,r)=>(d(),_(Ie,{key:r,index:1},{default:l(()=>[a!=null&&a.summary?(d(),x($,{key:0},[a.type=="orderQuality"?(d(),_(ue,{key:0},{default:l(()=>[p(g(Ze.value),1)]),_:1})):h("",!0),a.type=="jbjsdwsl"?(d(),_(ue,{key:1},{default:l(()=>[p(g(He.value),1)]),_:1})):h("",!0),a.type=="hshj"?(d(),_(ue,{key:2},{default:l(()=>[p(g(Xe.value),1)]),_:1})):h("",!0)],64)):h("",!0)]),_:2},1024))),128))]),_:1})]),_:1})]),_:2},[ie(Ne,a=>({name:a,fn:l(({column:r,record:U,index:w,text:oe,value:qa})=>[(d(),x("div",{key:a},[U.editable&&Pe.includes(a)?(d(),_(te,{key:0,"read-only":De.includes(a),placeholder:"\u8BF7\u8F93\u5165",value:oe,onChange:T=>Ve(T.target.value,a,w)},null,8,["read-only","value","onChange"])):U.editable&&je.includes(a)?(d(),_(Ct,{key:1,placeholder:"\u8BF7\u9009\u62E9\u65F6\u95F4",valueFormat:"YYYY-MM-DD",value:s.value[w][a],"onUpdate:value":T=>s.value[w][a]=T,onChange:T=>We(T,a,w)},null,8,["value","onUpdate:value","onChange"])):U.editable&&Oe.includes(a)?(d(),_(xe,{key:2,placeholder:"\u8BF7\u9009\u62E9",style:{display:"block"},value:oe,options:et(a),onChange:T=>Ge(T,a,w)},null,8,["value","options","onChange"])):U.editable&&a=="productName"?(d(),_(te,{key:3,"read-only":"true",placeholder:"\u8BF7\u70B9\u51FB\u9009\u62E9",value:oe,onClick:T=>ze(w)},null,8,["value","onClick"])):U.editable&&a=="baseMeasureUnit"?(d(),x("span",Qa,g(s.value[w][a]==null?"\u81EA\u52A8\u5E26\u51FA":s.value[w][a]==1?"\u65A4":s.value[w][a]==2?"\u516C\u65A4":"\u5428"),1)):(d(),x("span",$a,g(s.value[w][a]==null?"\u81EA\u52A8\u5E26\u51FA":s.value[w][a]),1))]))])}))]),1032,["columns","data-source","row-Selection","rowKey"])],512),[[de,N.value]]),n(Nt,{title:ce.value,visible:q.value,"onUpdate:visible":t[20]||(t[20]=a=>q.value=a),width:"800px",onOk:Ye},{default:l(()=>[n(we,{gutter:24},{default:l(()=>[n(Se,{span:8},{default:l(()=>[La,b("div",Ma,[A.value&&A.value.length>0?(d(),_(Tt,{key:0,"tree-data":A.value,"field-names":{key:"id",title:"label",children:"children"},"expand-on-click-node":!1,ref:"deptTreeRef",defaultExpandAll:"",onSelect:dt,onExpand:it,expandedKeys:ge.value,showLine:""},{title:l(({title:a})=>[b("span",null,g(a),1)]),_:1},8,["tree-data","expandedKeys"])):(d(),x("div",Ba,Fa))])]),_:1}),n(Se,{span:16},{default:l(()=>[n(ne,{dataSource:k.value,columns:Le.value,pagination:!1,style:{"margin-left":"0px"},"row-Selection":qe,rowKey:(a,r)=>r,class:"productTable"},{bodyCell:l(({column:a,record:r})=>[a.dataIndex==="measurementUnit"?(d(),_(C,{key:0},{default:l(()=>[p(g(r.measurementUnit==1?"\u65A4":r.measurementUnit==2?"\u516C\u65A4":"\u5428"),1)]),_:2},1024)):h("",!0)]),_:1},8,["dataSource","columns","row-Selection","rowKey"])]),_:1})]),_:1})]),_:1},8,["title","visible"])],64)}}},Va=jt(za,[["__scopeId","data-v-18310636"]]);export{Va as default};
