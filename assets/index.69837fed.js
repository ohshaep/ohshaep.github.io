import{z as J,u as W,r as s,aj as A,o as r,c as S,d as t,w as e,e as i,t as d,F as L,W as H,g as R,i as f,f as w,Q as v,_ as K,a$ as X,b0 as Z,y as ee,b3 as ae,n as te,a3 as ne,B as oe,L as le,s as se,q as ue,x as _e,S as re,N as ie,O as pe}from"./index.192c8708.js";import{o as ce}from"./approveSaleOut.1dd4a8dc.js";import{t as de,n as ve,a as me}from"./store.cbb90ece.js";import fe from"./review-modal.7105a0f1.js";import"./storageMg.e8e488da.js";import"./common.e897a13c.js";import"./common.0ebad352.js";const M=g=>(ie("data-v-c6658576"),g=g(),pe(),g),ge=M(()=>w("span",{class:"separate"},"/",-1)),ye=M(()=>w("span",null,"\u8F6C\u6362\u8BB0\u5F55",-1)),he={class:"app-container"},Se={class:"container-wrapper"},we={key:4},xe=["onClick"],ke={__name:"index",setup(g){W();const y=s(""),u=s({dateRange:[],nature:""}),l=s({}),h=s(0),x=s(10),m=s({current:1,pageSize:10,pageSizeOptions:["10","20","30","40","100"],total:0,showTotal:a=>`\u5171 ${a} \u6761`,hideOnSinglePage:!1,onChange:(a,o)=>$(a,o),onShowSizeChange:(a,o)=>{$(a,o,"sizeChange")},showSizeChanger:!0,showQuickJumper:!0}),$=(a,o,b)=>{m.value.current=a,b==="sizeChange"&&(m.value.pageSize=o),h.value=(a-1)*10,x.value=o,p()},p=a=>{a==="approveStatus"&&(m.value.current=1,h.value=0),l.value.approveStatus=y.value?y.value:"",u.value.dateRange.length>0&&u.value?(l.value.beginTime=u.value.dateRange[0],l.value.endTime=u.value.dateRange[1]):(l.value.beginTime=null,l.value.endTime=null),l.value.offset=h.value,l.value.limit=x.value,l.value.nature=u.value.nature,l.value.timeType=1,Y()},D=s([]),k=s(!1),Y=async()=>{k.value=!0;const a=await ce(l.value);a.code===200&&(D.value=a.data.data,m.value.total=a.data.row,k.value=!1)};A(()=>{p()});const I=s(null),B=()=>{h.value=0,x.value=10,l.value={},I.value.resetFields(),p()},z=s({}),F=s(null),N=async a=>{z.value=a,F.value.showModal()};return(a,o)=>{const b=K,V=X,q=Z,O=ee,Q=ae,C=te,U=ne,T=oe,c=le,j=se,P=ue,E=_e,G=re;return r(),S(L,null,[t(b,{title:"\u8F6C\u6362\u8BB0\u5F55",icon:"icon-rongqi"},{nav:e(()=>[i(d("\u8F6C\u6362\u8BB0\u5F55")+" "),ge,ye]),_:1}),t(O,null,{default:e(()=>[t(q,{value:y.value,"onUpdate:value":o[0]||(o[0]=n=>y.value=n),onChange:o[1]||(o[1]=n=>p("approveStatus"))},{default:e(()=>[(r(!0),S(L,null,H(R(de),(n,_)=>(r(),f(V,{key:n.value,value:n.value},{default:e(()=>[i(d(n.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),w("div",he,[t(P,{justify:"space-between",style:{flex:"1"}},{default:e(()=>[w("div",Se,[t(j,{layout:"inline",ref_key:"searchFormRef",ref:I,model:u.value},{default:e(()=>[t(C,{style:{width:"308px"},name:"dateRange",label:"\u521B\u5EFA\u65F6\u95F4"},{default:e(()=>[t(Q,{value:u.value.dateRange,"onUpdate:value":o[2]||(o[2]=n=>u.value.dateRange=n),"value-format":"YYYY-MM-DD"},null,8,["value"])]),_:1}),t(C,{name:"nature"},{default:e(()=>[t(U,{label:"\u7CAE\u98DF\u6027\u8D28",value:u.value.nature,"onUpdate:value":o[3]||(o[3]=n=>u.value.nature=n),placeholder:"\u8BF7\u9009\u62E9",clearable:"",style:{width:"240px"},options:R(ve)},null,8,["value","options"])]),_:1}),t(C,{style:{"margin-left":"auto"}},{default:e(()=>[t(c,null,{default:e(()=>[t(T,{type:"primary",onClick:p},{default:e(()=>[i("\u67E5\u8BE2")]),_:1}),t(T,{type:"primary",ghost:"",onClick:B},{default:e(()=>[i("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1}),t(G,{spinning:k.value},{default:e(()=>[t(E,{dataSource:D.value,columns:R(me),pagination:m.value,scroll:{x:0,y:500}},{bodyCell:e(({column:n,record:_})=>[n.dataIndex==="qualityLevel"?(r(),f(c,{key:0},{default:e(()=>[i(d((_==null?void 0:_.orderStatus)||"0\u7EA7"),1)]),_:2},1024)):v("",!0),n.dataIndex==="productYear"?(r(),f(c,{key:1},{default:e(()=>[i(d(new Date(_.productYear).getFullYear()),1)]),_:2},1024)):v("",!0),n.dataIndex==="productDate"?(r(),f(c,{key:2},{default:e(()=>[i(d(new Date(_.productDate).toLocaleDateString()),1)]),_:2},1024)):v("",!0),n.dataIndex==="orderStatus"?(r(),f(c,{key:3},{default:e(()=>[i(d(["\u5F02\u5E38\u6570\u636E","\u5F85\u5BA1\u6838","\u5BA1\u6279\u4E0D\u901A\u8FC7","\u5BA1\u6279\u901A\u8FC7"][_.orderStatus]),1)]),_:2},1024)):v("",!0),n.dataIndex==="operation"?(r(),S("span",we,[t(c,{size:"middle",style:{color:"#05C059",cursor:"pointer"}},{default:e(()=>[_.approveStatus==1?(r(),S("span",{key:0,onClick:be=>N(_)},"\u5BA1\u6838",8,xe)):v("",!0)]),_:2},1024)])):v("",!0)]),_:1},8,["dataSource","columns","pagination"])]),_:1},8,["spinning"])]),t(fe,{ref_key:"reviewModalRef",ref:F,"review-data":z.value,onRefresh:p},null,8,["review-data"])],64)}}},Te=J(ke,[["__scopeId","data-v-c6658576"]]);export{Te as default};
