import{z as J,a as K,u as W,r as m,at as $,A as G,aj as X,ce as k,C as Z,o as M,c as O,f as d,d as l,g as S,cg as ee,e as _,w as u,t as Y,Q as ae,m as w,L as le,ac as oe,a6 as te,n as ue,a9 as se,s as ne,bW as de,aJ as re,M as ie,B as ve,N as pe,O as me}from"./index.192c8708.js";import{i as fe,b as ce,u as _e,g as be}from"./saleOut.0d32fcde.js";import{d as ge,u as ye}from"./common.e897a13c.js";const c=b=>(pe("data-v-18914dd0"),b=b(),me(),b),he={class:"content"},Ie={class:"head-title"},Ne={class:"body-content"},we={class:"body-layout"},Ue=c(()=>d("h1",null,"\u5BA1\u6838\u8BE6\u60C5",-1)),xe={style:{color:"red"}},De={class:"formstyle"},Pe=c(()=>d("h1",null,"\u8BA2\u5355\u4FE1\u606F",-1)),Re=c(()=>d("h3",null,"\u5E93\u5B58\u4FE1\u606F",-1)),Ae=c(()=>d("h1",{style:{"margin-left":"20px"}},"\u8D27\u54C1\u4FE1\u606F",-1)),Ce=c(()=>d("h1",{style:{"margin-left":"20px"}},"\u51FA\u5E93\u8BB0\u5F55\u4FE1\u606F",-1)),ke=c(()=>d("h2",{style:{"margin-left":"20px"}},"\u51ED\u8BC1",-1)),Me={class:"clearfix"},Oe={key:0},Se=c(()=>d("div",{style:{"margin-top":"8px"}},"Upload",-1)),Ye=["src"],ze={style:{"text-align":"right",padding:"10px 0px"}},Le={__name:"verify",setup(b){const U=K(),z=W(),x=m([]),D=m([]);$(()=>B.value.length+1),G({});const g=m(),v=m([]);function L(t){return new Promise((a,i)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>a(r.result),r.onerror=n=>i(n)})}const y=m(!1),P=m(""),h=m(""),Q=()=>{y.value=!1,h.value=""},q=async t=>{!t.url&&!t.preview&&(t.preview=await L(t.originFileObj)),P.value=t.url||t.preview,y.value=!0,h.value=t.name||t.url.substring(t.url.lastIndexOf("/")+1)},I={span:10},e=m({}),B=m([{name:"Edward King ",age:32,address:"London, Park Lane no.",gddress:"xx",ages:"fbi",addrecss:"ggga",addrress:"pop",aggge:"sss",addnnress:"address",adsedress:"ppppp",agwqe:"ness"}]),R=(t,a)=>!a.label||!a.value?!1:a.label.toLowerCase().indexOf(t.toLowerCase())>=0,N={outboundDate:[{required:!0,message:"\u8BF7\u8F93\u5165\u65F6\u95F4",trigger:"change"}],deliveryQuality:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u91CF",trigger:"change"}]},F=()=>{g.value.validate().then(()=>{var i,r,n,s,f;let t=v.value.map(p=>({path:p.response,fileName:p.name}));t.length==0&&(t=null);const a=k(e.value.outboundDate).format("YYYY-MM-DD HH:mm:ss");console.log(v.value,"\u63D0\u4EA4"),_e({deliveryOrderCode:e.value.deliveryOrderCode,deliveryQuality:e.value.deliveryQuality,productDate:a,deliveryMode:((i=e.value)==null?void 0:i.deliveryMode)||"",licenseRegister:((r=e.value)==null?void 0:r.licenseRegister)||"",files:t,storeAreaId:((n=e.value)==null?void 0:n.storeAreaId)||"",storehouseId:((s=e.value)==null?void 0:s.storehouseId)||"",storePositionId:((f=e.value)==null?void 0:f.storePositionId)||"",orderStatus:"1",id:e.value.id||""}).then(p=>{w.success("\u65B0\u589E\u6210\u529F"),U.back()}).chtch(p=>{w.error(p.message)})}).catch(t=>{console.log("error",t)})};function A(t=!0){e.value.storeAreaId!=""&&e.value.storeAreaId!=null&&be({areaId:e.value.storeAreaId}).then(a=>{a.data.areaId,D.value=a.data.map(i=>(e.value.storePositionName==i.storePositionName&&(e.value.storePositionId=i.id),{value:i.id,label:i.storePositionName}))}),t&&(e.value.storePositionId=null)}const H=t=>{console.log(t),ye({file:t.file}).then(a=>{w.success("\u4E0A\u4F20\u6210\u529F"),console.log("\u4E0A\u4F20\u6210\u529F",a.data),v.value[v.value.length-1].fileInfo=a.data,console.log(v.value,"test"),t.onSuccess(a.data,t)}).catch(a=>{t.onError(a)})};return X(()=>{const t=z.query.id;fe(t).then(a=>{e.value={...a,storeAreaId:""},delete e.value.saleOrderInfo,e.value.outboundDate.length<12&&(e.value.outboundDate=e.value.outboundDate+" 00:00:00"),e.value.outboundDate=k(e.value.outboundDate,"YYYY-MM-DD HH:mm:ss"),console.log(e.value.outboundDate,"xixila"),ce({houseId:e.value.storehouseId}).then(i=>{i.data.houseId,x.value=i.data.map(r=>(e.value.storeAreaName==r.storeAreaName&&(e.value.storeAreaId=r.id),{value:r.id,label:r.storeAreaName})),A(!1),!(!e.value.files&&e.value.files==[])&&e.value.files.forEach((r,n)=>{ge(r).then(s=>{const f=new Blob([s],{type:"image/png"});v.value.push({uid:"-"+(n+1),name:"image.png",status:"done",url:URL.createObjectURL(f),fileInfo:r})})})})})}),(t,a)=>{const i=le,r=oe,n=te,s=ue,f=se,p=ne,E=de,V=Z("plus-outlined"),j=re,T=ie,C=ve;return M(),O("div",he,[d("div",Ie,[l(S(ee),{style:{"font-size":"60px",color:"#05c059","padding-right":"10px"}}),_("\u7F16\u8F91")]),d("div",Ne,[d("div",we,[Ue,d("div",null,[d("div",null,[l(i,null,{default:u(()=>[_("\u5BA1\u6838\u4EBA:"),d("span",xe,Y(e.value.approveUser),1),_("\xA0\u65F6\u95F4:"),d("span",null,Y(e.value.approveTime),1)]),_:1})]),l(r,{value:e.value.approveReason,"onUpdate:value":a[0]||(a[0]=o=>e.value.approveReason=o),placeholder:"\u6682\u65E0\u539F\u56E0",rows:4,disabled:""},null,8,["value"])]),d("div",De,[l(p,{ref_key:"formRef",ref:g,model:e.value,rules:N,"label-col":I,layout:"horizontal",class:"ant-advanced-search-form"},{default:u(()=>[Pe,l(s,{ref:"name",label:"\u8BB8\u53EF\u5355\u53F7"},{default:u(()=>[l(n,{value:e.value.deliveryOrderCode,"onUpdate:value":a[1]||(a[1]=o=>e.value.deliveryOrderCode=o),disabled:""},null,8,["value"])]),_:1},512),l(s,{label:"\u9500\u552E\u5408\u540C"},{default:u(()=>[l(n,{value:e.value.contractNo,"onUpdate:value":a[2]||(a[2]=o=>e.value.contractNo=o),disabled:""},null,8,["value"])]),_:1}),l(s,{ref:"name",label:"\u5BA2\u6237\u540D\u79F0"},{default:u(()=>[l(n,{value:e.value.cooperatorName,"onUpdate:value":a[3]||(a[3]=o=>e.value.cooperatorName=o),disabled:""},null,8,["value"])]),_:1},512),l(s,{ref:"name",label:"\u91C7\u8D2D\u5408\u540C\u53F7"},{default:u(()=>[l(n,{value:e.value.contractNoReceive,"onUpdate:value":a[4]||(a[4]=o=>e.value.contractNoReceive=o),disabled:""},null,8,["value"])]),_:1},512),l(s,{ref:"name",label:"\u4F9B\u5E94\u5546\u540D\u79F0"},{default:u(()=>[l(n,{value:e.value.supplierName,"onUpdate:value":a[5]||(a[5]=o=>e.value.supplierName=o),disabled:""},null,8,["value"])]),_:1},512),l(s,{ref:"name",label:"\u8BB8\u53EF\u51FA\u5E93\u6545\u91CF"},{default:u(()=>[l(n,{value:e.value.deliveryQualityPermission,"onUpdate:value":a[6]||(a[6]=o=>e.value.deliveryQualityPermission=o),disabled:""},null,8,["value"])]),_:1},512),Re,l(s,{ref:"name",label:"\u6307\u5B9A\u4ED3\u5E93",name:"storehouseName"},{default:u(()=>[l(n,{value:e.value.storehouseName,"onUpdate:value":a[7]||(a[7]=o=>e.value.storehouseName=o),disabled:""},null,8,["value"])]),_:1},512),l(s,{ref:"name",label:"\u5E93\u533A",name:"storeAreaId"},{default:u(()=>[l(f,{value:e.value.storeAreaId,"onUpdate:value":a[8]||(a[8]=o=>e.value.storeAreaId=o),placeholder:"\u9009\u62E9\u5E93\u533A","show-search":"","filter-option":R,options:x.value,onChange:A},null,8,["value","options"])]),_:1},512),l(s,{ref:"name",label:"\u5E93\u4F4D",name:"storePositionId"},{default:u(()=>[l(f,{value:e.value.storePositionId,"onUpdate:value":a[9]||(a[9]=o=>e.value.storePositionId=o),placeholder:"\u9009\u62E9\u5E93\u4F4D","show-search":"","filter-option":R,options:D.value},null,8,["value","options"])]),_:1},512)]),_:1},8,["model"]),l(p,{ref_key:"formRef",ref:g,model:e.value,rules:N,"label-col":I,layout:"horizontal",class:"ant-advanced-search-form"},{default:u(()=>[Ae,l(s,{ref:"name",label:"\u5546\u54C1\u7F16\u7801"},{default:u(()=>[l(n,{value:e.value.productId,"onUpdate:value":a[10]||(a[10]=o=>e.value.productId=o),disabled:""},null,8,["value"])]),_:1},512),l(s,{ref:"name",label:"\u5546\u54C1\u540D\u79F0"},{default:u(()=>[l(n,{value:e.value.productName,"onUpdate:value":a[11]||(a[11]=o=>e.value.productName=o),disabled:""},null,8,["value"])]),_:1},512),l(s,{ref:"name",label:"\u89C4\u683C\u578B\u53F7"},{default:u(()=>[l(n,{value:e.value.productSpec,"onUpdate:value":a[12]||(a[12]=o=>e.value.productSpec=o),disabled:""},null,8,["value"])]),_:1},512),l(s,{ref:"name",label:"\u4EA7\u5730"},{default:u(()=>[l(n,{value:e.value.placeName,"onUpdate:value":a[13]||(a[13]=o=>e.value.placeName=o),disabled:""},null,8,["value"])]),_:1},512),l(s,{ref:"name",label:"\u751F\u4EA7\u65E5\u671F"},{default:u(()=>[l(n,{value:e.value.productDate,"onUpdate:value":a[14]||(a[14]=o=>e.value.productDate=o),disabled:""},null,8,["value"])]),_:1},512)]),_:1},8,["model"]),l(p,{ref_key:"formRef",ref:g,model:e.value,rules:N,"label-col":I,layout:"horizontal",class:"ant-advanced-search-form"},{default:u(()=>[Ce,l(s,{ref:"name",label:"\u51FA\u5E93\u6570\u91CF",name:"deliveryQuality"},{default:u(()=>[l(n,{value:e.value.deliveryQuality,"onUpdate:value":a[15]||(a[15]=o=>e.value.deliveryQuality=o)},null,8,["value"])]),_:1},512),l(s,{ref:"name",label:"\u5305\u6570"},{default:u(()=>[l(n,{value:e.value.deliveryQuality/parseInt(e.value.productSpec)*1e3,disabled:""},null,8,["value"])]),_:1},512),l(s,{label:"\u51FA\u5E93\u65B9\u5F0F"},{default:u(()=>[l(n,{value:e.value.deliveryMode,"onUpdate:value":a[16]||(a[16]=o=>e.value.deliveryMode=o)},null,8,["value"])]),_:1}),l(s,{label:"\u724C\u7167\u767B\u8BB0"},{default:u(()=>[l(n,{value:e.value.licenseRegister,"onUpdate:value":a[17]||(a[17]=o=>e.value.licenseRegister=o)},null,8,["value"])]),_:1}),l(s,{label:"\u51FA\u5E93\u65E5\u671F",name:"outboundDate",require:""},{default:u(()=>[l(E,{value:e.value.outboundDate,"onUpdate:value":a[18]||(a[18]=o=>e.value.outboundDate=o),"show-time":"",format:"YYYY-MM-DD HH:mm:ss",type:"date",placeholder:"Pick a date",style:{width:"100%"}},null,8,["value"])]),_:1}),ke,l(s,null,{default:u(()=>[d("div",Me,[l(j,{"file-list":v.value,"onUpdate:fileList":a[19]||(a[19]=o=>v.value=o),customRequest:H,"list-type":"picture-card",onPreview:q},{default:u(()=>[v.value.length<5?(M(),O("div",Oe,[l(V),Se])):ae("",!0)]),_:1},8,["file-list"]),l(T,{open:y.value,title:h.value,footer:null,onCancel:Q},{default:u(()=>[d("img",{alt:"example",style:{width:"100%"},src:P.value},null,8,Ye)]),_:1},8,["open","title"])])]),_:1})]),_:1},8,["model"])]),d("div",ze,[l(i,null,{default:u(()=>[l(C,{type:"primary",size:t.size,onClick:a[20]||(a[20]=o=>S(U).back())},{default:u(()=>[_("\u8FD4\u56DE")]),_:1},8,["size"]),l(C,{type:"primary",size:t.size,onClick:F},{default:u(()=>[_("\u91CD\u65B0\u63D0\u4EA4")]),_:1},8,["size"])]),_:1})])])])])}}},Fe=J(Le,[["__scopeId","data-v-18914dd0"]]);export{Fe as default};
