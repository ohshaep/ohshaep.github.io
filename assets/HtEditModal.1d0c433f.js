import{r as g,o as G,i as K,w as a,d as e,e as C,f as P,g as n,R as x,t as k,m as q,a6 as Q,n as W,p as Z,q as ee,a5 as le,a3 as ae,ac as te,b3 as ne,B as oe,aJ as re,s as ue,M as se}from"./index.192c8708.js";import{u as ie}from"./qualityReport.6dc17b5d.js";import{u as pe}from"./htMag.881530e9.js";import{U as D}from"./UploadOutlined.4d52294f.js";const de={style:{margin:"0 auto",position:"relative"}},_e={__name:"HtEditModal",emits:["refresh"],setup(ce,{expose:S,emit:R}){const N=R,T=g("\u65B0\u589E"),b=g(!1),F=g([]),V=g("\u652F\u6301\u4E0A\u4F20.DOC.DOCX\u683C\u5F0F,\u5355\u4E2A\u6587\u4EF6<=50.0MB"),Y=g("\u5355\u4E2A\u6587\u4EF6<=5.0MB"),i={xs:{span:24},sm:{span:4}},p={xs:{span:24},sm:{span:16}},B=(r,l,c)=>l===null?Promise.reject("\u8BF7\u9009\u62E9\u5408\u540C\u8D77\u6B62\u65F6\u95F4"):Promise.resolve(),d=g([]),f=g([]),m=g([]),w=(r,l,c)=>r.field==="contractFileInfo"?d.value.length===0?Promise.reject("\u8BF7\u9009\u62E9\u9700\u8981\u4E0A\u4F20\u7684\u6587\u4EF6"):Promise.resolve():r.field==="annexFileInfo"?f.value.length===0?Promise.reject("\u8BF7\u9009\u62E9\u9700\u8981\u4E0A\u4F20\u7684\u6587\u4EF6"):Promise.resolve():r.field==="legalFileInfo"?m.value.length===0?Promise.reject("\u8BF7\u9009\u62E9\u9700\u8981\u4E0A\u4F20\u7684\u6587\u4EF6"):Promise.resolve():Promise.reject("\u5F02\u5E38\u6570\u636E"),L=[{value:"1",label:"\u91C7\u8D2D\u5408\u540C"},{value:"2",label:"\u9500\u552E\u5408\u540C"}],j={opponentUnit:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BA2\u6237\u5355\u4F4D",trigger:"change"}],opponentSignedMan:[{required:!0,message:"\u8BF7\u8F93\u5165\u5408\u540C\u5BA2\u6237",trigger:"change"}],contractType:[{required:!0,message:"\u8BF7\u8F93\u5165\u5408\u540C\u7C7B\u578B",trigger:"change"}],contractName:[{required:!0,message:"\u8BF7\u8F93\u5165\u5408\u540C\u540D\u79F0",trigger:"change"}],contractCode:[{required:!0,message:"\u8BF7\u8F93\u5165\u5408\u540C\u7F16\u53F7",trigger:"change"}],contractAmount:[{required:!0,message:"\u8BF7\u8F93\u5165\u5408\u540C\u91D1\u989D",trigger:"change"}],firstUnit:[{required:!0,message:"\u8BF7\u8F93\u5165\u7532\u65B9",trigger:"change"}],secondUnit:[{required:!0,message:"\u8BF7\u8F93\u5165\u4E59\u65B9",trigger:"change"}],contractDesc:[{required:!0,message:"\u8BF7\u8F93\u5165\u7B80\u8981\u63CF\u8FF0",trigger:"change"}],dateString:[{required:!0,validator:B,trigger:"change"}],contractFileInfo:[{required:!0,validator:w,trigger:"change"}],annexFileInfo:[{required:!0,validator:w,trigger:"change"}],legalFileInfo:[{required:!0,validator:w,trigger:"change"}]},h=r=>{console.log(r,"e"),ie({file:r.file}).then(l=>{q.success("\u4E0A\u4F20\u6210\u529F"),console.log("\u4E0A\u4F20\u6210\u529F",l.data),r.filename=="contractFileInfo"?(d.value[d.value.length-1].response=l.data,console.log(d.value[d.value.length-1].response,"file1")):r.filename=="annexFileInfo"?(f.value[f.value.length-1].response=l.data,console.log(f.value[f.value.length-1],"file2")):r.filename=="legalFileInfo"&&(m.value[m.value.length-1].response=l.data,console.log(m.value[m.value.length-1],"file3")),console.log(d.value,"test"),r.onSuccess(l.data,r)}).catch(l=>{r.onError(l)})},t=g(),A=r=>{b.value=!0,t.value=r,d.value=[{name:r.contractFilename,contractFileInfo:r.contractFileInfo}],f.value=[{name:r.annexFilename,annexFileInfo:r.annexFileInfo}],m.value=[{name:r.legalFilename,legalFileInfo:r.legalFileInfo}],F.value=[r.contractSignedDate,r.contractExpirationDate],console.log(t.value,"md")},E=(r,l)=>{t.value.contractSignedDate=l[0],t.value.contractExpirationDate=l[1]},I=g(),O=()=>{I.value.validate().then(r=>{if(r)try{t.value.contractFilename=d.value[0].name,t.value.contractFileInfo=d.value[0].response,t.value.annexFilename=f.value[0].name,t.value.annexFileInfo=f.value[0].response,t.value.legalFilename=m.value[0].name,t.value.legalFileInfo=m.value[0].response,pe(t.value).then(l=>{l.code===200&&(q.success("\u4FDD\u5B58\u4FEE\u6539\u6210\u529F"),b.value=!1,N("refresh"))})}catch{}else return q.error("\u63D0\u4EA4\u5931\u8D25\uFF0C\u8BF7\u586B\u5199\u5FC5\u586B\u9879"),!1})},M=()=>{I.value.resetFields(),t.value=[],d.value=[],f.value=[],m.value=[],b.value=!1};return S({showModal:A}),(r,l)=>{const c=Q,u=W,s=Z,v=ee,U=le,$=ae,H=te,J=ne,_=oe,y=re,X=ue,z=se;return G(),K(z,{width:"1200px",title:n(T),onCancel:M,visible:n(b),keyboard:!0,maskClosable:!1,cancelText:"\u5173\u95ED"},{footer:a(()=>[e(_,{key:"back",onClick:M},{default:a(()=>[C("\u5173\u95ED")]),_:1}),e(_,{type:"primary",onClick:O},{default:a(()=>[C("\u4FDD\u5B58\u4FEE\u6539")]),_:1})]),default:a(()=>[P("div",de,[e(X,{ref_key:"formRef",ref:I,model:n(t),rules:j},{default:a(()=>[e(v,{gutter:24},{default:a(()=>[e(s,{span:12},{default:a(()=>[e(u,{name:"opponentUnit",label:"\u5BA2\u6237\u5355\u4F4D",labelCol:i,wrapperCol:p},{default:a(()=>[e(c,{value:n(t).opponentUnit,"onUpdate:value":l[0]||(l[0]=o=>n(t).opponentUnit=o),placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u5355\u4F4D"},null,8,["value"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{name:"opponentSignedMan",label:"\u5408\u540C\u5BA2\u6237",labelCol:i,wrapperCol:p},{default:a(()=>[e(c,{value:n(t).opponentSignedMan,"onUpdate:value":l[1]||(l[1]=o=>n(t).opponentSignedMan=o),placeholder:"\u8BF7\u8F93\u5165\u5408\u540C\u5BA2\u6237"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(U,{style:{margin:"0 0 24px 0"}}),e(v,{gutter:24},{default:a(()=>[e(s,{span:12},{default:a(()=>[e(u,{name:"contractType",label:"\u5408\u540C\u7C7B\u578B",labelCol:i,wrapperCol:p},{default:a(()=>[e($,{value:n(t).contractType,"onUpdate:value":l[2]||(l[2]=o=>n(t).contractType=o),placeholder:"\u8BF7\u9009\u62E9\u5408\u540C\u7C7B\u578B",clearable:"",options:L},null,8,["value"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{name:"contractName",label:"\u5408\u540C\u540D\u79F0",labelCol:i,wrapperCol:p},{default:a(()=>[e(c,{value:n(t).contractName,"onUpdate:value":l[3]||(l[3]=o=>n(t).contractName=o),placeholder:"\u8BF7\u8F93\u5165\u5408\u540C\u540D\u79F0"},null,8,["value"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{name:"contractCode",label:"\u5408\u540C\u7F16\u53F7",labelCol:i,wrapperCol:p},{default:a(()=>[e(c,{value:n(t).contractCode,"onUpdate:value":l[4]||(l[4]=o=>n(t).contractCode=o),placeholder:"\u8BF7\u8F93\u5165\u5408\u540C\u540D\u79F0"},null,8,["value"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{name:"contractAmount",label:"\u5408\u540C\u91D1\u989D",labelCol:i,wrapperCol:p},{default:a(()=>[e(c,{type:"number",min:"0",value:n(t).contractAmount,"onUpdate:value":l[5]||(l[5]=o=>n(t).contractAmount=o),style:{"margin-bottom":"10px"},placeholder:"\u8BF7\u8F93\u5165\u5408\u540C\u91D1\u989D"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(U,{style:{margin:"0 0 24px 0"}}),e(v,{gutter:24},{default:a(()=>[e(s,{span:12},{default:a(()=>[e(u,{name:"firstUnit",label:"\u7532\u65B9",labelCol:i,wrapperCol:p},{default:a(()=>[e(c,{value:n(t).firstUnit,"onUpdate:value":l[6]||(l[6]=o=>n(t).firstUnit=o),placeholder:"\u8BF7\u8F93\u5165\u4E59\u65B9"},null,8,["value"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{name:"secondUnit",label:"\u4E59\u65B9",labelCol:i,wrapperCol:p},{default:a(()=>[e(c,{value:n(t).secondUnit,"onUpdate:value":l[7]||(l[7]=o=>n(t).secondUnit=o),placeholder:"\u8BF7\u8F93\u5165\u4E59\u65B9"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(v,{gutter:24},{default:a(()=>[e(s,{span:12},{default:a(()=>[e(u,{label:"\u4E19\u65B9",labelCol:i,wrapperCol:p},{default:a(()=>[e(c,{value:n(t).thirdUnit,"onUpdate:value":l[8]||(l[8]=o=>n(t).thirdUnit=o),placeholder:"\u8BF7\u8F93\u5165\u4E19\u65B9"},null,8,["value"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"\u4E01\u65B9",labelCol:i,wrapperCol:p},{default:a(()=>[e(c,{value:n(t).fourthUnit,"onUpdate:value":l[9]||(l[9]=o=>n(t).fourthUnit=o),placeholder:"\u8BF7\u8F93\u5165\u4E01\u65B9"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(v,{gutter:24},{default:a(()=>[e(s,{span:22},{default:a(()=>[e(u,{name:"contractDesc",label:"\u7B80\u8981\u63CF\u8FF0",style:{"margin-left":"25px"}},{default:a(()=>[e(H,{value:n(t).contractDesc,"onUpdate:value":l[10]||(l[10]=o=>n(t).contractDesc=o),placeholder:"\u8BF7\u8F93\u5165\u7B80\u8981\u63CF\u8FF0",rows:4},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(v,{gutter:24},{default:a(()=>[e(s,{span:12},{default:a(()=>[e(u,{name:"dateString",prop:"dateString",label:"\u5408\u540C\u8D77\u6B62\u65F6\u95F4",labelCol:i,wrapperCol:p},{default:a(()=>[e(J,{value:n(F),"onUpdate:value":l[11]||(l[11]=o=>x(F)?F.value=o:null),onChange:E,format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD"},null,8,["value"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"\u5173\u8054\u5408\u540C",labelCol:i,wrapperCol:p},{default:a(()=>[e(c,{style:{"margin-bottom":"10px"},modelValue:n(t).annexContractName,"onUpdate:modelValue":l[12]||(l[12]=o=>n(t).annexContractName=o),placeholder:"\u8BF7\u8F93\u5165\u5173\u8054\u5408\u540C\u540D\u79F0"},null,8,["modelValue"]),e(c,{modelValue:n(t).annexContractCode,"onUpdate:modelValue":l[13]||(l[13]=o=>n(t).annexContractCode=o),placeholder:"\u8BF7\u8F93\u5165\u5173\u8054\u5408\u540C\u7F16\u53F7"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(U,{style:{margin:"0 0 24px 0"}}),e(v,{gutter:24},{default:a(()=>[e(s,{span:12},{default:a(()=>[e(u,{label:"\u5408\u540C\u6587\u4EF6",prop:"contractFileInfo",labelCol:i,wrapperCol:p},{default:a(()=>[e(y,{name:"contractFileInfo","file-list":n(d),"onUpdate:fileList":l[14]||(l[14]=o=>x(d)?d.value=o:null),maxCount:1,customRequest:h,onPreview:r.handlePreview},{default:a(()=>[e(_,{class:"upload-button"},{default:a(()=>[e(n(D)),C("\u70B9\u51FB\u4E0A\u4F20")]),_:1})]),_:1},8,["file-list","onPreview"]),P("span",null,k(n(V)),1)]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"\u5173\u8054\u9644\u4EF6",prop:"annexFileInfo",labelCol:i,wrapperCol:p},{default:a(()=>[e(y,{name:"annexFileInfo","file-list":n(f),"onUpdate:fileList":l[15]||(l[15]=o=>x(f)?f.value=o:null),maxCount:1,customRequest:h,onPreview:r.handlePreview},{default:a(()=>[e(_,{class:"upload-button"},{default:a(()=>[e(n(D)),C("\u70B9\u51FB\u4E0A\u4F20")]),_:1})]),_:1},8,["file-list","onPreview"]),P("span",null,k(n(Y)),1)]),_:1})]),_:1})]),_:1}),e(U,{style:{margin:"0 0 24px 0"}}),e(v,{gutter:24},{default:a(()=>[e(s,{span:12},{default:a(()=>[e(u,{label:"\u6CD5\u52A1\u51ED\u8BC1",prop:"legalFileInfo",labelCol:i,wrapperCol:p},{default:a(()=>[e(y,{name:"legalFileInfo","file-list":n(m),"onUpdate:fileList":l[16]||(l[16]=o=>x(m)?m.value=o:null),maxCount:1,customRequest:h,onPreview:r.handlePreview},{default:a(()=>[e(_,{class:"upload-button"},{default:a(()=>[e(n(D)),C("\u70B9\u51FB\u4E0A\u4F20")]),_:1})]),_:1},8,["file-list","onPreview"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1},8,["title","visible"])}}};export{_e as default};
