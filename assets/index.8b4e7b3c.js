import{aI as S,z as Pe,a as Ae,A as P,r as u,V as Le,C as Ue,o as p,c as v,d as l,w as n,e as m,t as f,F as A,W as G,i as L,f as U,g as o,R as K,E as Be,Q as y,bO as $e,G as qe,M as J,m as V,_ as Ve,a$ as De,b0 as Oe,y as Ee,b3 as Fe,n as ze,a8 as Me,a9 as Ye,a6 as Qe,a3 as We,q as je,B as Ge,s as Ke,L as Je,x as He,S as Xe,aa as Ze,ab as et,ac as tt,N as at,O as lt}from"./index.192c8708.js";const nt=[{title:"\u6266\u6837\u5355\u53F7",dataIndex:"sampleCode",ellipsis:!0,width:150},{title:"\u6266\u6837\u7C7B\u578B",dataIndex:"sampleType",ellipsis:!0,width:120},{title:"\u6266\u6837\u65F6\u95F4",dataIndex:"samplingDate",ellipsis:!0,width:150},{title:"\u6837\u54C1\u540D\u79F0",dataIndex:"productName",ellipsis:!0,width:150},{title:"\u6837\u54C1\u91CD\u91CF(\u5343\u514B)",dataIndex:"sampleWeight",ellipsis:!0,width:150},{title:"\u4EE3\u8868\u6570\u91CF(\u5428)",dataIndex:"quality",ellipsis:!0,width:150},{title:"\u53F8\u673A\u540D\u79F0",dataIndex:"driverName",ellipsis:!0,width:150},{title:"\u8F66\u724C\u4FE1\u606F",dataIndex:"truckInfo",ellipsis:!0,width:150},{title:"\u4ED3\u5E93",dataIndex:"storeName",ellipsis:!0,width:150},{title:"\u5E93\u533A",dataIndex:"storeAreaName",ellipsis:!0,width:150},{title:"\u5E93\u4F4D",dataIndex:"storePositionName",ellipsis:!0,width:150},{title:"\u51FA\u5165\u5E93\u65E5\u671F",dataIndex:"storeTime",ellipsis:!0,width:150},{title:"\u5173\u8054\u6570\u636E",dataIndex:"unionDataCode",ellipsis:!0,width:150},{title:"\u5907\u6CE8",dataIndex:"remark",ellipsis:!0,width:150},{title:"\u521B\u5EFA\u4EBA",dataIndex:"createBy",ellipsis:!0,width:150},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",ellipsis:!0,width:150},{title:"\u6700\u540E\u4FEE\u6539\u4EBA",dataIndex:"updateBy",ellipsis:!0,width:150},{title:"\u6700\u540E\u4FEE\u6539\u65F6\u95F4",dataIndex:"updateTime",ellipsis:!0,width:160},{title:"\u64CD\u4F5C",dataIndex:"edit",fixed:"right",align:"center",width:150}],st=[{title:"\u6266\u6837\u5355\u53F7",dataIndex:"sampleCode",ellipsis:!0,width:150},{title:"\u6266\u6837\u7C7B\u578B",dataIndex:"sampleType",ellipsis:!0,width:150},{title:"\u6266\u6837\u65F6\u95F4",dataIndex:"samplingDate",ellipsis:!0,width:150},{title:"\u6837\u54C1\u540D\u79F0",dataIndex:"productName",ellipsis:!0,width:150},{title:"\u6837\u54C1\u91CD\u91CF(\u5343\u514B)",dataIndex:"sampleWeight",ellipsis:!0,width:150},{title:"\u4EE3\u8868\u6570\u91CF(\u5428)",dataIndex:"quality",ellipsis:!0,width:150},{title:"\u53F8\u673A\u540D\u79F0",dataIndex:"driverName",ellipsis:!0,width:150},{title:"\u8F66\u724C\u4FE1\u606F",dataIndex:"truckInfo",ellipsis:!0,width:150},{title:"\u4ED3\u5E93",dataIndex:"storeName",ellipsis:!0,width:150},{title:"\u5E93\u533A",dataIndex:"storeAreaName",ellipsis:!0,width:150},{title:"\u5E93\u4F4D",dataIndex:"storePositionName",ellipsis:!0,width:150},{title:"\u51FA\u5165\u5E93\u65E5\u671F",dataIndex:"storeTime",ellipsis:!0,width:150},{title:"\u5173\u8054\u6570\u636E",dataIndex:"unionDataCode",ellipsis:!0,width:150},{title:"\u5907\u6CE8",dataIndex:"remark",ellipsis:!0,width:150},{title:"\u521B\u5EFA\u4EBA",dataIndex:"createBy",ellipsis:!0,width:150},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",ellipsis:!0,width:150},{title:"\u6700\u540E\u4FEE\u6539\u4EBA",dataIndex:"updateBy",ellipsis:!0,width:150},{title:"\u6700\u540E\u4FEE\u6539\u65F6\u95F4",dataIndex:"updateTime",ellipsis:!0,width:140},{title:"\u4E0D\u901A\u8FC7\u539F\u56E0",dataIndex:"approveReason",ellipsis:!0,hideInTable:!0,width:150},{title:"\u64CD\u4F5C",dataIndex:"edit",fixed:"right",align:"center",width:150}];function ot(i){return S({url:"/sampleInfo/list",method:"post",params:i})}function H(i){return S({url:"/sampleInfo/approve",method:"post",data:i})}function it(i){return S({url:"/storehouseInfo/selectList",method:"post",params:i})}function ut(i){return S({url:"/storeAreaInfo/selectList",method:"post",params:i})}function dt(i){return S({url:"/storePositionInfo/selectList",method:"post",params:i})}const X=i=>(at("data-v-a77d7b4c"),i=i(),lt(),i),rt=X(()=>U("span",{class:"separate"},"/",-1)),pt=X(()=>U("span",null,"\u6266\u6837\u5BA1\u6279",-1)),ct={class:"app-container"},_t={class:"container-wrapper"},vt={key:0},mt={key:1},ft={key:4},ht=["onClick"],yt=["onClick"],It={__name:"index",setup(i){Ae();const{proxy:Z}=qe(),{sys_point_type:ee}=Z.useDict("sys_point_type"),te=P([{label:"\u5F85\u5BA1\u6279",value:"1"},{label:"\u5BA1\u6279\u901A\u8FC7",value:"3"},{label:"\u5BA1\u6279\u4E0D\u901A\u8FC7",value:"2"}]),ae=u([{value:"1",label:"\u5165\u5E93"},{value:"2",label:"\u5728\u5E93"},{value:"3",label:"\u51FA\u5E93"}]),D=u([{value:"sampleCode",label:"\u6266\u6837\u5355\u53F7"},{value:"productName",label:"\u6837\u54C1\u540D\u79F0"},{value:"truckInfo",label:"\u8F66\u724C\u53F7\u7801"},{value:"driverName",label:"\u53F8\u673A"}]),B=u(!0),h=u([]),O=u([]),le=u(""),$=u("");u(null);const ne=async()=>{h.value=[],s.value={offset:0,limit:10,orderStatus:"",beginTime:"",endTime:""},s.value.type="",x.value="sampleCode",w.value="",s.value.verifyStatus="",I()},I=()=>{g.current=1,s.value.offset=0,b()};function se(t){D.value.forEach((e,d)=>{e.value!=t&&(s.value[e.value]="")})}const E=(t,e,d)=>{g.current=t,d&&(g.pageSize=e,s.value.limit=e),s.value.offset=(t-1)*e,b()},g=P({current:1,pageSize:10,total:0,showTotal:t=>`\u5171 ${t} \u6761`,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["2","20","50","100"],onChange:(t,e)=>E(t,e),onShowSizeChange:(t,e)=>E(t,e,"sizeChange")}),k=u("1"),oe=P({queryParams:{offset:0,limit:10,orderStatus:"",beginTime:"",endTime:""},searchType:"sampleCode",searchValue:""}),{queryParams:s,searchType:x,searchValue:w}=Le(oe);function b(){B.value=!0,h.value.length>0?(s.value.beginTime=h.value[0],s.value.endTime=h.value[1]):(s.value.beginTime="",s.value.endTime=""),s.value[x.value]=w.value,ot({...s.value,approveStatus:k.value}).then(t=>{const e=t==null?void 0:t.data;O.value=e.data,g.total=(e==null?void 0:e.row)||0,B.value=!1})}const ie=t=>{$.value=t.id,c.verifyStatus="3",le.value="\u5BA1\u6838",T.value=!0};function ue(t){const e=t.id;J.confirm({title:"\u64CD\u4F5C\u786E\u8BA4",content:"\u662F\u5426\u786E\u5B9A\u64A4\u9500\uFF1F",onOk(){H({id:e,approveStatus:4}).then(()=>{b(),V.success("\u64A4\u9500\u6210\u529F")}).catch(()=>{})}})}const T=u(!1),c=P({verifyStatus:null,failureReson:""}),F=u();function z(){Object.assign(c,{verifyStatus:null,failureReson:""})}const de=async()=>{try{if(await F.value.validateFields(),c.verifyStatus=="2"&&c.failureReson==""){V.error("\u8BF7\u586B\u5199\u4E0D\u901A\u8FC7\u539F\u56E0");return}$.value&&H({approveReason:c.failureReson,approveStatus:c.verifyStatus,id:$.value}).then(t=>{console.log(t),(t==null?void 0:t.code)===200&&(V.success("\u64CD\u4F5C\u6210\u529F"),z(),b())}),T.value=!1}catch(t){console.log(t)}},M=u([]),q=u([]),N=u([]);function re(){it().then(t=>{(t==null?void 0:t.data).forEach(d=>{M.value.push({value:d.id,label:d.storeName})})})}function pe(t){q.value=[],N.value=[],s.value.storeAreaId=null,s.value.storePositionId=null,ce(t)}function ce(t){ut({houseId:t}).then(e=>{e.data.length!=0&&e.data.forEach((d,C)=>{q.value[C]={value:d.id,label:d.storeAreaName}})})}function _e(t){N.value=[],s.value.storePositionId=null,ve(t)}const ve=t=>{dt({areaId:t}).then(e=>{e.data.forEach((d,C)=>{N.value[C]={value:d.id,label:d.storePositionName}})})},me={verifyStatus:[{required:!0,message:"\u5FC5\u9009",trigger:["change"]}]};return re(),b(),(t,e)=>{const d=Ve,C=De,fe=Oe,he=Ee,ye=Fe,_=ze,Ie=Me,ge=Ye,xe=Qe,R=We,Y=je,Q=Ge,W=Ke,we=Ue("dict-tag"),be=Je,Ce=He,Se=Xe,j=Ze,ke=et,Te=tt,Ne=J;return p(),v(A,null,[l(d,{title:"\u6266\u6837\u5BA1\u6279",icon:"icon-rongqi"},{nav:n(()=>[m(f("\u6266\u6837\u5BA1\u6279")+" "),rt,pt]),_:1}),l(he,null,{default:n(()=>[l(fe,{defaultValue:"",value:k.value,"onUpdate:value":e[0]||(e[0]=a=>k.value=a),onChange:I},{default:n(()=>[(p(!0),v(A,null,G(te,(a,r)=>(p(),L(C,{key:r,value:a.value},{default:n(()=>[m(f(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),U("div",ct,[l(Y,{justify:"space-between",style:{flex:"1"}},{default:n(()=>[U("div",_t,[l(W,{layout:"inline",ref:"queryRef",model:o(s)},{default:n(()=>[l(_,{style:{width:"308px"},name:"dateRange"},{default:n(()=>[l(ye,{label:"\u521B\u5EFA\u65E5\u671F",value:h.value,"onUpdate:value":e[1]||(e[1]=a=>h.value=a),"value-format":"YYYY-MM-DD",onChange:I},null,8,["value"])]),_:1}),l(_,{label:""},{default:n(()=>[l(xe,{placeholder:"\u8BF7\u8F93\u5165",value:o(w),"onUpdate:value":e[3]||(e[3]=a=>K(w)?w.value=a:null),onKeyup:Be(I,["enter"])},{addonBefore:n(()=>[l(ge,{style:{width:"120px"},value:o(x),"onUpdate:value":e[2]||(e[2]=a=>K(x)?x.value=a:null),onChange:se},{default:n(()=>[(p(!0),v(A,null,G(D.value,(a,r)=>(p(),L(Ie,{key:r,value:a.value},{default:n(()=>[m(f(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},8,["value"])]),_:1}),l(Y,null,{default:n(()=>[l(_,{name:"storehouseId"},{default:n(()=>[l(R,{label:"\u4ED3\u5E93",value:o(s).storehouseId,"onUpdate:value":e[4]||(e[4]=a=>o(s).storehouseId=a),onChange:pe,placeholder:"\u8BF7\u9009\u62E9\u4ED3\u5E93",clearable:"",style:{width:"240px"},options:M.value},null,8,["value","options"])]),_:1}),l(_,{name:"storeAreaId"},{default:n(()=>[l(R,{value:o(s).storeAreaId,"onUpdate:value":e[5]||(e[5]=a=>o(s).storeAreaId=a),onChange:_e,placeholder:"\u8BF7\u9009\u62E9\u5E93\u533A",clearable:"",style:{width:"240px"},options:q.value},null,8,["value","options"])]),_:1}),l(_,{name:"storePositionId"},{default:n(()=>[l(R,{value:o(s).storePositionId,"onUpdate:value":e[6]||(e[6]=a=>o(s).storePositionId=a),placeholder:"\u8BF7\u9009\u62E9\u5E93\u4F4D",clearable:"",style:{width:"240px"},options:N.value},null,8,["value","options"])]),_:1}),l(_,{name:"sampleType"},{default:n(()=>[l(R,{label:"\u6266\u6837\u7C7B\u578B",value:o(s).sampleType,"onUpdate:value":e[7]||(e[7]=a=>o(s).sampleType=a),placeholder:"\u8BF7\u9009\u62E9",clearable:"",style:{width:"240px"},options:ae.value},null,8,["value","options"])]),_:1})]),_:1}),l(_,null,{default:n(()=>[l(Q,{type:"primary",onClick:I},{default:n(()=>[m("\u67E5\u8BE2")]),_:1}),l(Q,{type:"primary",ghost:"",onClick:ne,style:{"margin-left":"15px"}},{default:n(()=>[m("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1}),l(Se,{spinning:B.value},{default:n(()=>[l(Ce,{dataSource:O.value,columns:k.value=="2"?o(st):o(nt),pagination:g,scroll:{x:0,y:500}},{bodyCell:n(({column:a,record:r})=>[a.dataIndex==="sampleType"?(p(),v("span",vt,f(r.sampleType=="1"?"\u5165\u5E93":r.sampleType=="2"?"\u5728\u5E93":"\u51FA\u5E93"),1)):y("",!0),a.dataIndex==="name"?(p(),v("span",mt,f(r.name)+" / "+f(r.id),1)):y("",!0),a.dataIndex==="type"?(p(),L(we,{key:2,options:o(ee),value:r.type},null,8,["options","value"])):y("",!0),a.dataIndex==="verifyTime"?(p(),v(A,{key:3},[m(f(o($e)(r.verifyTime)),1)],64)):y("",!0),a.dataIndex==="edit"?(p(),v("span",ft,[l(be,{size:"middle",style:{color:"#05C059",cursor:"pointer"}},{default:n(()=>[r.approveStatus=="1"?(p(),v("span",{key:0,onClick:Re=>ie(r)},"\u5BA1\u6838",8,ht)):(p(),v("span",{key:1,onClick:Re=>ue(r)},"\u64A4\u9500\u5BA1\u6838",8,yt))]),_:2},1024)])):y("",!0)]),_:1},8,["dataSource","columns","pagination"])]),_:1},8,["spinning"])]),l(Ne,{visible:T.value,"onUpdate:visible":e[10]||(e[10]=a=>T.value=a),title:"\u5BA1\u6279\u72B6\u6001",width:"480px",onOk:de,onCancel:z},{default:n(()=>[l(W,{class:"set-form",ref_key:"verifyFormRef",ref:F,model:c,name:"basic",autocomplete:"off",colon:!1,rules:me},{default:n(()=>[l(_,{label:" ",name:"verifyStatus"},{default:n(()=>[l(ke,{value:c.verifyStatus,"onUpdate:value":e[8]||(e[8]=a=>c.verifyStatus=a)},{default:n(()=>[l(j,{value:"3"},{default:n(()=>[m("\u5BA1\u6838\u901A\u8FC7")]),_:1}),l(j,{value:"2"},{default:n(()=>[m("\u5BA1\u6838\u4E0D\u901A\u8FC7")]),_:1})]),_:1},8,["value"])]),_:1}),c.verifyStatus==="2"?(p(),L(_,{key:0,label:""},{default:n(()=>[l(Te,{value:c.failureReson,"onUpdate:value":e[9]||(e[9]=a=>c.failureReson=a),"show-count":"",rows:4,maxlength:200,placeholder:"\u8F93\u5165\u4E0D\u901A\u8FC7\u7684\u539F\u56E0"},null,8,["value"])]),_:1})):y("",!0)]),_:1},8,["model"])]),_:1},8,["visible"])],64)}}},xt=Pe(It,[["__scopeId","data-v-a77d7b4c"]]);export{xt as default};
