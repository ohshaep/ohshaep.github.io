import{z as ee,a as ae,r as h,A as C,V as te,o as g,c as v,d as t,w as n,e as d,t as N,f as m,g as r,E as ne,F as I,bO as se,M as B,ag as le,bP as oe,m as O,bQ as ce,bR as ie,bS as ue,bT as _e,_ as pe,a3 as de,n as re,l as me,B as fe,s as he,p as ge,q as ve,b1 as be,x as ye,S as Se,bz as xe,a6 as ke,N as we,O as Ce,G as Ne}from"./index.192c8708.js";const R=b=>(we("data-v-951b5786"),b=b(),Ce(),b),Ie=R(()=>m("span",{class:"separate"},"/",-1)),Be=R(()=>m("span",null,"\u573A\u6240\u7BA1\u7406",-1)),Oe={class:"container-wrapper"},Re=R(()=>m("div",{class:"vertical-center"},null,-1)),$e={key:0},qe={key:2},Fe=["onClick"],Pe={__name:"index",setup(b){const{proxy:U}=Ne();ae();const V=h([{value:"",label:"\u5168\u90E8"},{value:1,label:"\u6B63\u5E38"},{value:0,label:"\u7981\u7528"}]),$=h([]),E=[{title:"\u573A\u6240\u540D\u79F0",dataIndex:"placeName",width:250,ellipsis:!0},{title:"\u521B\u5EFA\u4EBA",dataIndex:"createName",width:150},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",width:200},{title:"\u72B6\u6001",dataIndex:"enableStatus",width:100},{title:"\u64CD\u4F5C",dataIndex:"operation",width:200,align:"center"}],D=()=>{U.resetForm("queryRef"),l.value.enableStatus="",y()},Q=e=>{B.confirm({title:"\u64CD\u4F5C\u786E\u8BA4",icon:t(le),content:"\u662F\u5426\u5220\u9664\u8BE5\u573A\u6240\uFF1F",onOk(){const{id:a,version:o}=e;oe(a,o).then(i=>{i.success&&(O.success("\u64CD\u4F5C\u6210\u529F"),_())})}})},y=()=>{f.current=1,l.value.offset=0,_()},q=(e,a,o)=>{f.current=e,o&&(f.pageSize=a,l.value.limit=a),l.value.offset=(e-1)*a,_()},f=C({current:1,pageSize:10,total:0,showTotal:e=>`\u5171 ${e} \u6761`,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],onChange:(e,a)=>q(e,a),onShowSizeChange:(e,a)=>q(e,a,"sizeChange")}),F=h(),j=async()=>{try{const e=await F.value.validateFields();console.log(e),ce(e).then(a=>{console.log(a),x.value=!1,_()})}catch(e){console.log(e)}},A={placeName:[{required:!0,message:"\u5FC5\u586B",trigger:["blur"]}]},S=C({placeName:""}),x=h(!1),K=()=>{x.value=!0,S.placeName=""},L=C({queryParams:{offset:0,limit:10,enableStatus:"",placeName:""}}),{queryParams:l}=te(L),k=h(!0),_=async()=>{var a,o;k.value=!0;const e=await ie(l.value);if(e!=null&&e.success){let i=((a=e==null?void 0:e.data)==null?void 0:a.data)||[];i.forEach(c=>{c.transBooleanStatus=Boolean(c.enableStatus)}),$.value=i,f.total=((o=e==null?void 0:e.data)==null?void 0:o.row)||0,k.value=!1}};_();function M(e){let o=(e.enableStatus===0?1:0)===0?"\u505C\u7528":"\u542F\u7528";B.confirm({title:"\u64CD\u4F5C\u786E\u8BA4",content:'\u786E\u8BA4\u8981"'+o+'""'+e.placeName+'"?',onOk(){const{id:i,version:c}=e;if(c===null){O.warning("\u7248\u672C\u4E3A\u7A7A\uFF0C\u65E0\u6CD5\u8FDB\u884C\u76F8\u5173\u64CD\u4F5C\uFF01");return}(e.enableStatus===0?ue:_e)(i,c).then(u=>{u!=null&&u.success?(O.success("\u64CD\u4F5C\u6210\u529F"),_()):e.transBooleanStatus=!e.transBooleanStatus}).catch(()=>{e.transBooleanStatus=!e.transBooleanStatus})}})}return(e,a)=>{const o=pe,i=de,c=re,P=me,u=fe,T=he,G=ge,z=ve,J=be,H=ye,W=Se,X=xe,Y=ke,Z=B;return g(),v(I,null,[t(o,{title:"\u573A\u6240\u7BA1\u7406",icon:"icon-rongqi",back:"/overview"},{nav:n(()=>[d(N("\u5B57\u5178\u7BA1\u7406")+" "),Ie,Be]),_:1}),t(X,{class:"body-wrapper"},{header:n(()=>[t(z,{justify:"space-between",style:{flex:"1"},class:"app-container"},{default:n(()=>[m("div",Oe,[t(T,{layout:"inline",ref:"queryRef",colon:!1,model:r(l)},{default:n(()=>[t(c,{name:"status"},{default:n(()=>[t(i,{label:"\u72B6\u6001",placeholder:"\u8BF7\u9009\u62E9",style:{width:"240px"},value:r(l).enableStatus,"onUpdate:value":a[0]||(a[0]=s=>r(l).enableStatus=s),options:V.value,onChange:y},null,8,["value","options"])]),_:1}),t(c,{name:"placeName"},{default:n(()=>[t(P,{label:"\u573A\u6240\u540D\u79F0",value:r(l).placeName,"onUpdate:value":a[1]||(a[1]=s=>r(l).placeName=s),placeholder:"\u8BF7\u8F93\u5165",clearable:"",style:{width:"240px"},onKeyup:ne(y,["enter"])},null,8,["value"])]),_:1}),t(c,null,{default:n(()=>[t(u,{type:"primary",onClick:y},{default:n(()=>[d("\u67E5\u8BE2")]),_:1}),t(u,{onClick:D,style:{"margin-left":"15px"}},{default:n(()=>[d("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"]),t(z,{gutter:10,class:"fn-wrapper",justify:"space-between"},{default:n(()=>[Re,m("div",null,[t(G,{span:1.5},{default:n(()=>[t(u,{type:"primary",onClick:K},{default:n(()=>[d("\u65B0\u5EFA\u573A\u6240")]),_:1})]),_:1})])]),_:1})])]),_:1})]),default:n(()=>[t(W,{spinning:k.value},{default:n(()=>[t(H,{dataSource:$.value,columns:E,pagination:f},{bodyCell:n(({column:s,record:p})=>[s.dataIndex==="enableStatus"?(g(),v("span",$e,[t(J,{checked:p.transBooleanStatus,"onUpdate:checked":w=>p.transBooleanStatus=w,onChange:w=>M(p),"checked-children":"\u6B63\u5E38","un-checked-children":"\u7981\u7528"},null,8,["checked","onUpdate:checked","onChange"])])):s.dataIndex==="createTime"?(g(),v(I,{key:1},[d(N(r(se)(p.createTime)),1)],64)):s.dataIndex==="operation"?(g(),v("span",qe,[m("a",{onClick:w=>Q(p)},"\u5220\u9664",8,Fe)])):(g(),v(I,{key:3},[d(N(p[s.dataIndex]||"-"),1)],64))]),_:1},8,["dataSource","pagination"])]),_:1},8,["spinning"])]),_:1}),t(Z,{visible:x.value,"onUpdate:visible":a[3]||(a[3]=s=>x.value=s),title:"\u65B0\u5EFA\u573A\u6240",width:"480px",onOk:j},{default:n(()=>[t(T,{ref_key:"placeFormRef",ref:F,model:S,name:"place",autocomplete:"off",rules:A},{default:n(()=>[t(c,{label:"\u573A\u6240\u540D\u79F0",name:"placeName"},{default:n(()=>[t(Y,{placeholder:"\u8BF7\u8F93\u5165",value:S.placeName,"onUpdate:value":a[2]||(a[2]=s=>S.placeName=s),"show-count":"",maxlength:20},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])],64)}}},ze=ee(Pe,[["__scopeId","data-v-951b5786"]]);export{ze as default};
