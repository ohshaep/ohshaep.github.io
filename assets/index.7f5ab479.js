import{aI as C,z as $e,a as Re,A as O,r as i,V as Ue,C as Me,b as Pe,o as r,c as y,d as a,w as n,e as p,t as S,F as w,W as ee,g as o,i as I,f as k,h as T,D as qe,E as ze,P as Fe,Q as D,G as Ve,M as A,m as $,_ as Be,a$ as Oe,b0 as we,y as Ae,l as Ee,n as Qe,a3 as Ke,B as Ge,s as Je,K as je,b1 as We,a5 as Ze,L as He,x as Xe,a6 as Ye,a9 as et,aa as tt,ab as at,N as nt,O as lt}from"./index.192c8708.js";function ot(u){return C({url:"/cooperatorInfo/list",method:"post",params:u})}function te(u){return C({url:"categoryManage/queryList",method:"post",params:u})}function st(u){return C({url:"/cooperatorInfo/add",method:"post",params:u})}function ae(u){return C({url:"/cooperatorInfo/edit",method:"post",params:u})}function ut(u){return C({url:"/cooperatorInfo/delete/"+u,method:"post"})}const ne=u=>(nt("data-v-73072b4a"),u=u(),lt(),u),ct=ne(()=>k("span",{class:"separate"},"/",-1)),it=ne(()=>k("span",null,"\u5408\u4F5C\u5BA2\u6237\u7BA1\u7406",-1)),dt={class:"app-container"},rt={class:"container-wrapper"},pt={key:0},_t={key:1},vt={key:2},mt={class:"dialog-footer"},ft={__name:"index",setup(u){const{proxy:x}=Ve(),{sys_normal_disable:E}=x.useDict("sys_normal_disable"),le=Re(),oe=O([{label:"\u5546\u54C1\u5206\u7C7B",value:"/basic/productCate"},{label:"\u4F9B\u5E94\u5546\u5206\u7C7B",value:"/basic/supplierCate"},{label:"\u5408\u4F5C\u5BA2\u6237\u5206\u7C7B",value:"/basic/cooperatorCate"},{label:"\u5546\u54C1\u7BA1\u7406",value:"/basic/productMg"},{label:"\u4F9B\u5E94\u5546\u7BA1\u7406",value:"/basic/supplierMg"},{label:"\u5408\u4F5C\u5BA2\u6237\u7BA1\u7406",value:"/basic/cooperatorMg"},{label:"\u4ED3\u5E93\u7BA1\u7406",value:"/basic/storehouseMg"},{label:"\u4EA7\u5730\u7BA1\u7406",value:"/basic/productPlaceMg"}]),Q=i([]),m=i(!1),K=i(!0),se=i(!0),R=i([]);i(!0),i(!0),i(0);const U=i(""),ue=i([]),M=i("/basic/cooperatorMg"),P=i([]),L=i([]),ce=[{title:"\u5BA2\u6237\u540D\u79F0",dataIndex:"cooperatorName",ellipsis:!0},{title:"\u4E00\u7EA7\u5206\u7C7B",dataIndex:"ctgLevel1Name",ellipsis:!0},{title:"\u4E8C\u7EA7\u5206\u7C7B",dataIndex:"ctgLevel2Name",ellipsis:!0},{title:"\u72B6\u6001",dataIndex:"status"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime"},{title:"\u64CD\u4F5C",dataIndex:"operation",fixed:"right",align:"center"}],ie=O({categoryName:"",categoryData:["Zhejiang","Jiangsu"],form:{},queryParams:{offset:0,limit:10,dictName:void 0,dictType:void 0,status:void 0},rules:{dictName:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],dictType:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),{queryParams:d,form:s,rules:de,categoryName:gt,categoryData:yt}=Ue(ie);function re(e){G(s.value.ctgLevel1Id)}function pe(){te({ctgType:3,ctgLevel:1}).then(e=>{(e==null?void 0:e.data).forEach((c,g)=>{P.value[g]={value:c.id,label:c.ctgName}})})}function G(e,t){te({ctgType:3,ctgLevel:2,ctgParentId:e}).then(c=>{(c==null?void 0:c.data).forEach((N,F)=>{L.value[F]={value:N.id,label:N.ctgName}}),t&&(s.value.ctgLevel2Id=t)})}function _e(){le.push(M.value)}function f(){K.value=!0,pe(),ot(x.addDateRange(d.value)).then(e=>{const t=e==null?void 0:e.data;Q.value=t.data,h.total=(t==null?void 0:t.row)||0,K.value=!1})}function ve(e){const t=e.id||R.value,c=e!=null&&e.ctgName?e.ctgName+"\u7684":"",g=e.status==1?0:1;A.confirm({title:"\u64CD\u4F5C\u786E\u8BA4",content:"\u662F\u5426\u786E\u8BA4\u4FEE\u6539"+c+"\u72B6\u6001\uFF1F",onOk(){ae({status:g,id:t}).then(()=>{f(),$.success("\u4FEE\u6539\u6210\u529F")}).catch(()=>{})}})}function me(){m.value=!1,q()}function q(){s.value={dictId:void 0,dictName:void 0,dictType:void 0,status:"0",remark:void 0,ctgLevel1Id:void 0,ctgLevel2Id:void 0},L.value=[],x.resetForm("dictRef")}function z(){h.current=1,d.value.offset=0,f()}function J(){ue.value=[],x.resetForm("queryRef"),z()}const j=(e,t,c)=>{h.current=e,c&&(h.pageSize=t,d.value.limit=t),d.value.offset=(e-1)*t,f()},h=O({current:1,pageSize:10,total:0,showTotal:e=>`\u5171 ${e} \u6761`,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["2","20","50","100"],onChange:(e,t)=>j(e,t),onShowSizeChange:(e,t)=>j(e,t,"sizeChange")});function fe(){q(),m.value=!0,U.value="\u65B0\u589E"}function ge(e){q(),e.id||R.value,L.value=[],s.value.id=e.id,U.value="\u4FEE\u6539",s.value.cooperatorName=e.cooperatorName,s.value.ctgLevel1Id=e.ctgLevel1Id,s.value.status=e.status.toString(),e.ctgLevel==2&&(s.value.categoryId=e.ctgParentId),G(e.ctgLevel1Id,e.ctgLevel2Id),m.value=!0}const W=i();async function ye(){try{await W.value.validateFields(),s.value.id!=null?ae(s.value).then(e=>{$.success("\u4FEE\u6539\u6210\u529F"),m.value=!1,f()}):st(s.value).then(e=>{$.success("\u65B0\u589E\u6210\u529F"),m.value=!1,f()})}catch{}}function he(e){const t=e.id||R.value,c=e.cooperatorName;A.confirm({title:"\u64CD\u4F5C\u786E\u8BA4",content:'\u662F\u5426\u786E\u8BA4\u5220\u9664\u540D\u4E3A"'+c+'"\u7684\u6570\u636E\u9879\uFF1F',onOk(){ut(t).then(()=>{J(),$.success("\u5220\u9664\u6210\u529F")}).catch(()=>{})}})}return f(),(e,t)=>{const c=Be,g=Oe,N=we,F=Ae,be=Ee,_=Qe,Z=Ke,b=Ge,H=Je,V=je,Ie=Me("router-link"),ke=We,Ce=Ze,xe=He,Le=Xe,Ne=Ye,X=et,Se=tt,Te=at,De=A,B=Pe("hasPermi");return r(),y(w,null,[a(c,{title:"\u5408\u4F5C\u5BA2\u6237\u7BA1\u7406",icon:"icon-xuniziyuan",back:"/overview"},{nav:n(()=>[p(S("\u5408\u4F5C\u5BA2\u6237\u7BA1\u7406")+" "),ct,it]),_:1}),a(F,null,{default:n(()=>[a(N,{defaultValue:"",onChange:_e,value:M.value,"onUpdate:value":t[0]||(t[0]=l=>M.value=l)},{default:n(()=>[(r(!0),y(w,null,ee(o(oe),(l,v)=>(r(),I(g,{key:v,value:l.value},{default:n(()=>[p(S(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),k("div",dt,[k("div",rt,[T(a(H,{model:o(d),ref:"queryRef",layout:"inline","label-width":"68px"},{default:n(()=>[a(_,{name:"cooperatorName"},{default:n(()=>[a(be,{label:"\u5BA2\u6237\u540D\u79F0",value:o(d).cooperatorName,"onUpdate:value":t[1]||(t[1]=l=>o(d).cooperatorName=l),placeholder:"\u8BF7\u8F93\u5165",clearable:"",style:{width:"240px"},onKeyup:ze(z,["enter"])},null,8,["value"])]),_:1}),a(_,{name:"ctgLevel1Id"},{default:n(()=>[a(Z,{label:"\u5206\u7C7B",value:o(d).ctgLevel1Id,"onUpdate:value":t[2]||(t[2]=l=>o(d).ctgLevel1Id=l),placeholder:"\u8BF7\u9009\u62E9",clearable:"",style:{width:"240px"},options:P.value},null,8,["value","options"])]),_:1}),a(_,{name:"status"},{default:n(()=>[a(Z,{label:"\u72B6\u6001",value:o(d).status,"onUpdate:value":t[3]||(t[3]=l=>o(d).status=l),placeholder:"\u8BF7\u9009\u62E9",clearable:"",style:{width:"240px"},options:o(E)},null,8,["value","options"])]),_:1}),a(_,null,{default:n(()=>[a(b,{type:"primary",onClick:z},{default:n(()=>[p("\u67E5\u8BE2")]),_:1}),a(b,{type:"primary",ghost:"",onClick:J,style:{"margin-left":"15px"}},{default:n(()=>[p("\u91CD\u7F6E")]),_:1})]),_:1}),a(_,{style:{"margin-left":"165px"}},{default:n(()=>[T((r(),I(b,{type:"primary",onClick:fe},{icon:n(()=>[a(o(Fe))]),default:n(()=>[p(" \u65B0\u589E ")]),_:1})),[[B,["system:dict:add"]]])]),_:1})]),_:1},8,["model"]),[[qe,se.value]])]),a(Le,{dataSource:Q.value,columns:ce,pagination:o(h)},{bodyCell:n(({column:l,record:v})=>[l.dataIndex==="dictType"?(r(),y("span",pt,[a(Ie,{to:"/system/dict-data/index/"+v.dictId,class:"link-type"},{default:n(()=>[a(V,null,{default:n(()=>[p(S(v.dictType),1)]),_:2},1024)]),_:2},1032,["to"])])):D("",!0),l.dataIndex==="status"?(r(),y("span",_t,[a(ke,{checked:v.status!="1",onClick:Y=>ve(v)},null,8,["checked","onClick"])])):D("",!0),l.dataIndex==="operation"?(r(),y("span",vt,[a(xe,{size:"small"},{default:n(()=>[T((r(),I(V,{onClick:Y=>ge(v)},{default:n(()=>[p("\u7F16\u8F91")]),_:2},1032,["onClick"])),[[B,["system:dict:edit"]]]),a(Ce,{type:"vertical",style:{"background-color":"#05C059"}}),v.roleId!==1?T((r(),I(V,{key:0,onClick:Y=>he(v)},{default:n(()=>[p("\u5220\u9664")]),_:2},1032,["onClick"])),[[B,["system:dict:remove"]]]):D("",!0)]),_:2},1024)])):D("",!0)]),_:1},8,["dataSource","pagination"]),a(De,{title:U.value,visible:m.value,"onUpdate:visible":t[8]||(t[8]=l=>m.value=l),width:"500px","append-to-body":""},{footer:n(()=>[k("div",mt,[a(b,{type:"primary",onClick:ye},{default:n(()=>[p("\u786E \u5B9A")]),_:1}),a(b,{onClick:me},{default:n(()=>[p("\u53D6 \u6D88")]),_:1})])]),default:n(()=>[a(H,{ref_key:"dictRef",ref:W,model:o(s),rules:o(de),labelAlign:"left","label-col":{span:5}},{default:n(()=>[a(_,{label:"\u5BA2\u6237\u540D\u79F0",name:"cooperatorName"},{default:n(()=>[a(Ne,{value:o(s).cooperatorName,"onUpdate:value":t[4]||(t[4]=l=>o(s).cooperatorName=l),placeholder:"\u8BF7\u8F93\u5165\u5408\u4F5C\u5BA2\u6237\u540D"},null,8,["value"])]),_:1}),a(_,{label:"\u4E00\u7EA7\u5206\u7C7B",name:"ctgLevel1Id"},{default:n(()=>[a(X,{value:o(s).ctgLevel1Id,"onUpdate:value":t[5]||(t[5]=l=>o(s).ctgLevel1Id=l),options:P.value,onChange:re,placeholder:"\u8BF7\u9009\u62E9"},null,8,["value","options"])]),_:1}),a(_,{label:"\u4E8C\u7EA7\u5206\u7C7B",name:"ctgLevel2Id"},{default:n(()=>[a(X,{value:o(s).ctgLevel2Id,"onUpdate:value":t[6]||(t[6]=l=>o(s).ctgLevel2Id=l),options:L.value,placeholder:"\u8BF7\u9009\u62E9"},null,8,["value","options"])]),_:1}),a(_,{label:"\u72B6\u6001",name:"status"},{default:n(()=>[a(Te,{value:o(s).status,"onUpdate:value":t[7]||(t[7]=l=>o(s).status=l)},{default:n(()=>[(r(!0),y(w,null,ee(o(E),l=>(r(),I(Se,{key:l.value,value:l.value},{default:n(()=>[p(S(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","visible"])])],64)}}},bt=$e(ft,[["__scopeId","data-v-73072b4a"]]);export{bt as default};
