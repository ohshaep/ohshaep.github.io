import{z as pe,a as ce,r as u,aO as J,A as W,V as ve,o as p,c as x,d as l,f as _,w as n,g as D,R as H,E as _e,F as U,W as F,i as $,e as C,t as X,Q as Z,G as fe,m as w,_ as me,b3 as ge,n as ye,a8 as be,a9 as he,a6 as xe,B as Ce,L as we,s as ke,q as Se,x as Re,S as Me,M as Te,N as Ie,O as ze}from"./index.192c8708.js";import{_ as Oe}from"./index.fab15c34.js";import{c as Ue,f as $e,h as Be,i as Ne,j as Ve}from"./approveSaleOut.1dd4a8dc.js";const qe=k=>(Ie("data-v-eeeb59bc"),k=k(),ze(),k),Ee={class:"app-container"},Le={class:"container-wrapper"},je={key:1},De=["onClick"],Fe=qe(()=>_("a",{href:"#"},"\u5220\u9664",-1)),Pe={__name:"index",setup(k){const S=ce();u(!1);const{proxy:ee}=fe();ee.useDict("sys_point_type");const R=u([{value:"deliveryOrderCode",label:"\u51FA\u5E93\u8BB8\u53EF\u5355\u53F7"},{value:"deliveryMode",label:"\u51FA\u5E93\u65B9\u5F0F"},{value:"licenseRegister",label:"\u724C\u7167\u767B\u8BB0"},{value:"approveUser",label:"\u5BA1\u6838\u4EBA"},{value:"createBy",label:"\u9500\u521B\u5EFA\u4EBA"},{value:"createBy",label:"\u521B\u5EFA\u4EBA"}]),M=u([]),r=u([]);u([]);const T=u({path:"170987898211",list:[[{fieldMapping:"field0",data:"test01"},{fieldMapping:"field1",data:"test02"},{fieldMapping:"field2",data:"test03"}]]}),ae=u(),f=u(!1),I=u(!1),B=u(!0),c=u([]),m=u([]),te=async()=>{c.value=[],i.value={current:1,pageSize:10,orderStatus:"",beginTime:"",endTime:"",orderStatus:""},y.value="",z()},le=u([]);u({onChange:(a,e)=>{le.value=a}});const z=a=>{g.current=1,i.value.current=1,i.value.timeType=1,b()};function ne(a){R.value.forEach((e,o)=>{e.value!=a&&(i.value[e.value]="")})}J(m,(a,e)=>{if(!!a.length)for(let o=0;o<a.length;o++)m.value[o].key=m.value[o].id});const P=(a,e,o)=>{g.current=a,o&&(g.pageSize=e,i.value.pageSize=e),i.value.current=a,b()},g=W({current:1,pageSize:10,total:0,showTotal:a=>`\u5171 ${a} \u6761`,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["2","20","50","100"],onChange:(a,e)=>P(a,e),onShowSizeChange:(a,e)=>P(a,e,"sizeChange")}),Y=W({queryParams:{current:1,pageSize:10,orderStatus:"",beginTime:"",endTime:""},searchType:"",searchValue:""}),{queryParams:i,searchType:O,searchValue:y}=ve(Y),b=async()=>{B.value=!0,c.value&&c.value.length>0?(i.value.beginTime=c.value[0],i.value.endTime=c.value[1]):(i.value.beginTime="",i.value.endTime=""),i.value.fieldMapping=O.value,i.value.fieldValue=y.value,$e({...i.value,path:S.currentRoute.value.name}).then(a=>{a.code===200&&w.success("\u67E5\u8BE2\u6210\u529F");const e=a.data;m.value=e.records,g.total=e.total||0,B.value=!1})},Q=u(""),oe=a=>{I.value=!0,Q.value=a.id,r.value.forEach((e,o)=>{for(let s in a)e.fieldMapping==s&&(e.data=a[s])})},se=a=>{const e=S.currentRoute.value.name;console.log(a,"ssssssssss"),Be({path:e,ids:[a.id]}).then(o=>{o.code===200?w.success("\u5220\u9664\u6210\u529F"):w.error("\u5220\u9664\u5931\u8D25"),b()})},K=async(a=0)=>{const e=S.currentRoute.value.name,o=r.value.map(d=>({fieldMapping:d.fieldMapping,data:d.data}));let s;a==0?(T.value={path:e,list:[o]},s=await Ne(T.value)):(T.value={path:e,dataList:[{id:Q.value,list:o}]},s=await Ve(T.value)),s.code==200?(w.success("\u63D0\u4EA4\u6210\u529F"),f.value=!1,b()):w.error("\u63D0\u4EA4\u5931\u8D25")},A=()=>{console.log(r.value,"sadasdas"),r.value.forEach((a,e)=>{a.data=""})};return J(()=>S.currentRoute.value.name,(a,e)=>{Ue(a).then(o=>{r.value=o.data.map((s,d,N)=>(s.data="",s)),R.value=[],M.value=o.data.map((s,d,N)=>{const V={title:s.fieldName,dataIndex:s.fieldMapping,width:150,ellipsis:!0};return R.value.push({value:s.fieldMapping,label:s.fieldName}),V}),Y.searchType=M.value[0].dataIndex,M.value.push({title:"\u64CD\u4F5C",dataIndex:"operation",fixed:"right",align:"center",width:150})}),b()},{immediate:!0}),(a,e)=>{const o=me,s=ge,d=ye,N=be,V=he,q=xe,E=Ce,L=we,j=ke,ue=Se,ie=Oe,de=Re,re=Me,G=Te;return p(),x(U,null,[l(o,{title:"\u83DC\u5355\u7BA1\u7406",icon:"icon-rongqi"}),_("div",Ee,[l(ue,{justify:"space-between",style:{flex:"1"}},{default:n(()=>[_("div",Le,[l(j,{layout:"inline",model:D(i)},{default:n(()=>[l(d,{style:{width:"308px"},name:"dateRange",label:"\u521B\u5EFA\u65F6\u95F4"},{default:n(()=>[l(s,{value:c.value,"onUpdate:value":e[0]||(e[0]=t=>c.value=t),"value-format":"YYYY-MM-DD",onChange:z},null,8,["value"])]),_:1}),l(d,{label:""},{default:n(()=>[l(q,{placeholder:"\u8BF7\u8F93\u5165",value:D(y),"onUpdate:value":e[2]||(e[2]=t=>H(y)?y.value=t:null),onKeyup:_e(z,["enter"])},{addonBefore:n(()=>[l(V,{style:{width:"120px"},value:D(O),"onUpdate:value":e[1]||(e[1]=t=>H(O)?O.value=t:null),onChange:ne},{default:n(()=>[(p(!0),x(U,null,F(R.value,(t,v)=>(p(),$(N,{key:v,value:t.value},{default:n(()=>[C(X(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},8,["value"])]),_:1}),l(d,{style:{"margin-left":"auto"}},{default:n(()=>[l(L,null,{default:n(()=>[l(E,{type:"primary",onClick:z},{default:n(()=>[C("\u67E5\u8BE2")]),_:1}),l(E,{type:"primary",ghost:"",onClick:te},{default:n(()=>[C("\u91CD\u7F6E")]),_:1}),l(E,{type:"primary",onClick:e[3]||(e[3]=t=>f.value=!0)},{default:n(()=>[C("\u6DFB\u52A0")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1}),l(re,{spinning:B.value},{default:n(()=>[l(de,{dataSource:m.value,columns:M.value,pagination:g,scroll:{x:0,y:500}},{bodyCell:n(({column:t,record:v})=>[t.dataIndex==="status"?(p(),$(L,{key:0},{default:n(()=>[C(X(["\u505C\u7528","\u542F\u52A8"][v.status]),1)]),_:2},1024)):Z("",!0),t.dataIndex==="operation"?(p(),x("span",je,[l(L,{size:"middle",style:{color:"#05C059",cursor:"pointer"}},{default:n(()=>[_("span",{onClick:h=>oe(v)},"\u7F16\u8F91",8,De),l(ie,{title:"\u786E\u5B9A\u5220\u9664\u8BE5\u8BB0\u5F55\u5417?","ok-text":"\u786E\u5B9A","cancel-text":"\u5426",onConfirm:h=>se(v)},{default:n(()=>[Fe]),_:2},1032,["onConfirm"])]),_:2},1024)])):Z("",!0)]),_:1},8,["dataSource","columns","pagination"])]),_:1},8,["spinning"])]),l(G,{ref_key:"queryRef",ref:ae,visible:f.value,"onUpdate:visible":e[4]||(e[4]=t=>f.value=t),title:"\u8BB0\u5F55\u503C\u6DFB\u52A0",onOk:e[5]||(e[5]=t=>K()),onCancel:e[6]||(e[6]=t=>(A(),f.value=!1)),"append-to-body":"",destroyOnClose:"",style:{width:"400px"}},{default:n(()=>[_("div",null,[l(j,{layout:"vertical",model:r.value,style:{display:"flex","flex-wrap":"wrap","justify-content":"space-around"}},{default:n(()=>[(p(!0),x(U,null,F(r.value,(t,v)=>(p(),$(d,{label:t.fieldName+":"},{default:n(()=>[l(q,{value:t.data,"onUpdate:value":h=>t.data=h},null,8,["value","onUpdate:value"])]),_:2},1032,["label"]))),256))]),_:1},8,["model"])])]),_:1},8,["visible"]),l(G,{visible:I.value,"onUpdate:visible":e[7]||(e[7]=t=>I.value=t),title:"\u53F0\u8D26\u7F16\u8F91",onOk:e[8]||(e[8]=t=>K(1)),onCancel:e[9]||(e[9]=t=>(A(),I.value=!1)),"append-to-body":"",destroyOnClose:"",style:{width:"400px"}},{default:n(()=>[_("div",null,[l(j,{layout:"vertical",model:r.value,style:{display:"flex","flex-wrap":"wrap","justify-content":"space-around"}},{default:n(()=>[(p(!0),x(U,null,F(r.value,(t,v)=>(p(),$(d,{label:t.fieldName+":"},{default:n(()=>[l(q,{value:t.data,"onUpdate:value":h=>t.data=h},null,8,["value","onUpdate:value"])]),_:2},1032,["label"]))),256))]),_:1},8,["model"])])]),_:1},8,["visible"])],64)}}},Ae=pe(Pe,[["__scopeId","data-v-eeeb59bc"]]);export{Ae as default};
