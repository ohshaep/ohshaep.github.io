import{r as p,A as I,C as j,o as w,i as D,w as o,f as G,d as n,e as m,g as s,E as C,c as J,Q as O,R as P,G as H,T as W,m as k,U as X,l as Y,n as Z,B as ee,s as te,x as ne,S as oe,q as ae,M as se}from"./index.192c8708.js";const le={key:0},re={class:"dialog-footer"},ue={__name:"selectUser",props:{roleId:{type:[Number,String]},roles:{type:Array,default:()=>[]}},emits:["ok"],setup(S,{expose:N,emit:U}){const h=S,{proxy:v}=H(),{sys_normal_disable:B}=v.useDict("sys_normal_disable"),y=p([]),r=p(!1),b=p([]),_=p(!0),R=[{title:"\u7528\u6237\u540D\u79F0",dataIndex:"userName",ellipsis:!0},{title:"\u7528\u6237\u6635\u79F0",dataIndex:"nickName",ellipsis:!0},{title:"\u90AE\u7BB1",dataIndex:"email",ellipsis:!0},{title:"\u624B\u673A",dataIndex:"phonenumber",ellipsis:!0},{title:"\u72B6\u6001",dataIndex:"status",ellipsis:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime"}],a=I({offset:0,limit:10,roleId:void 0,userName:void 0,phonenumber:void 0});function T(){a.roleId=h.roleId,f(),r.value=!0}const q={onChange:(t,e)=>{b.value=t}};function f(){_.value=!0,W(a).then(t=>{_.value=!1;const e=t==null?void 0:t.data;y.value=e.data,u.total=(e==null?void 0:e.row)||0,h.roles.length})}function d(){u.current=1,a.offset=0,f()}const x=(t,e,i)=>{u.current=t,i&&(u.pageSize=e,a.limit=e),a.offset=(t-1)*e,f()},u=I({current:1,pageSize:10,total:0,showTotal:t=>`\u5171 ${t} \u6761`,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["2","20","50","100"],onChange:(t,e)=>x(t,e),onShowSizeChange:(t,e)=>x(t,e,"sizeChange")});function z(){v.resetForm("queryRef"),d()}const K=U;function Q(){const t=a.roleId,e=b.value.join(",");if(e==""){k.error("\u8BF7\u9009\u62E9\u8981\u5206\u914D\u7684\u7528\u6237");return}X({roleId:t,userIds:e}).then(i=>{k.success("\u6388\u6743\u6210\u529F"),i.code===200&&(r.value=!1,K("ok"))})}return N({show:T}),(t,e)=>{const i=Y,g=Z,c=ee,V=te,$=j("dict-tag"),A=ne,L=oe,E=ae,F=se;return w(),D(F,{title:"\u9009\u62E9\u7528\u6237",visible:s(r),"onUpdate:visible":e[3]||(e[3]=l=>P(r)?r.value=l:null),width:"800px",top:"5vh","append-to-body":""},{footer:o(()=>[G("div",re,[n(c,{type:"primary",onClick:Q},{default:o(()=>[m("\u786E \u5B9A")]),_:1}),n(c,{onClick:e[2]||(e[2]=l=>r.value=!1)},{default:o(()=>[m("\u53D6 \u6D88")]),_:1})])]),default:o(()=>[n(V,{model:s(a),ref:"queryRef",layout:"inline"},{default:o(()=>[n(g,{name:"userName"},{default:o(()=>[n(i,{label:"\u7528\u6237\u540D\u79F0",value:s(a).userName,"onUpdate:value":e[0]||(e[0]=l=>s(a).userName=l),placeholder:"\u8BF7\u8F93\u5165",clearable:"",style:{width:"200px"},onKeyup:C(d,["enter"])},null,8,["value"])]),_:1}),n(g,{name:"phonenumber"},{default:o(()=>[n(i,{label:"\u624B\u673A\u53F7\u7801",value:s(a).phonenumber,"onUpdate:value":e[1]||(e[1]=l=>s(a).phonenumber=l),placeholder:"\u8BF7\u8F93\u5165",clearable:"",style:{width:"200px"},onKeyup:C(d,["enter"])},null,8,["value"])]),_:1}),n(g,null,{default:o(()=>[n(c,{type:"primary",onClick:d},{default:o(()=>[m("\u67E5\u8BE2")]),_:1}),n(c,{onClick:z,style:{"margin-left":"15px"}},{default:o(()=>[m("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"]),n(E,null,{default:o(()=>[n(L,{spinning:s(_)},{default:o(()=>[n(A,{ref:"refTable",dataSource:s(y),columns:R,"row-selection":q,pagination:s(u),height:"260px",rowKey:"userId"},{bodyCell:o(({column:l,record:M})=>[l.dataIndex==="status"?(w(),J("span",le,[n($,{options:s(B),value:M.status},null,8,["options","value"])])):O("",!0)]),_:1},8,["dataSource","pagination"])]),_:1},8,["spinning"])]),_:1})]),_:1},8,["visible"])}}};export{ue as default};
