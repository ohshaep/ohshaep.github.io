import{z as xe,a as be,r as p,A as q,V as Ce,o as s,c,d as r,w as n,e as i,t as l,f as y,g as h,R as W,F as w,W as we,i as d,Q as o,bU as X,h as Ue,D as Te,G as De,c9 as Ne,m as Re,_ as Me,b3 as Oe,n as Pe,a8 as qe,a9 as Qe,a6 as ze,a3 as Le,B as Be,s as $e,q as Ve,a4 as Fe,aB as Ye,K as Ee,a5 as Ae,L as Je,x as je,S as Ge,ac as He,M as Ke,N as We,O as Xe}from"./index.192c8708.js";import{t as Ze,c as ea,a as aa,b as ta,p as na}from"./create-receipt-modal.27ea8aa6.js";import{p as sa}from"./saleList.d7f64940.js";import"./qualityConversion.db7f34ff.js";const Q=x=>(We("data-v-a3442dfe"),x=x(),Xe(),x),ua=Q(()=>y("span",{class:"separate"},"/",-1)),oa=Q(()=>y("span",null,"\u5BA1\u6279\u5217\u8868",-1)),la={class:"app-container"},ra={class:"container-wrapper"},ia={key:7},da=Q(()=>y("p",null,"\u5907\u6CE8",-1)),pa={key:2},ca={key:3},_a={key:4},va={key:6},fa={key:7},ha={key:8},ga={key:9},ya={key:10},ma={key:11},ka={key:12},Ia={key:13},Sa={key:14},xa={__name:"index",setup(x){be();const{proxy:Z}=De();Z.useDict("sys_point_type");const b=p(!1),z=p(""),U=p(""),ee=p([]);function ae(u){sa().then(a=>{a.data.length>0&&a.data.forEach(f=>{ee.value.push({value:f.id,label:f.placeName})})})}const te=p([]);function ne(){var u=new Date,a=u.getFullYear()+1;for(let f=0;f<5;f++)a-=1,te.value.push({value:a,label:a})}const L=p([{value:"purchaseOrderCode",label:"\u91C7\u8D2D\u8BA2\u5355\u7F16\u53F7"},{value:"supplierName",label:"\u4F9B\u5E94\u5546\u540D\u79F0"},{value:"productCode",label:"\u5546\u54C1\u7F16\u53F7"},{value:"productName",label:"\u5546\u54C1\u540D\u79F0"},{value:"contractNo",label:"\u91C7\u8D2D\u5408\u540C\u53F7"},{value:"orderUser",label:"\u4E0B\u5355\u4EBA"}]),se=p([{value:"1",label:"\u5168\u90E8"},{value:"2",label:"\u672A\u6536\u8D27"},{value:"3",label:"\u90E8\u5206\u6536\u8D27"},{value:"4",label:"\u5168\u90E8\u6536\u8D27"}]),T=p(!0),g=p([]),B=p([]);p(""),p(null),p(!1);const ue=async()=>{g.value=[],v.value={offset:0,limit:10,orderStatus:"",beginTime:"",endTime:""},I.value="purchaseOrderCode",S.value="",D()},oe=u=>{Ne(z.value,U.value).then(a=>{Re.success("\u64CD\u4F5C\u6210\u529F")}).finally(a=>b.value=!1),m()},D=()=>{k.current=1,v.value.offset=0,m()};function le(u){L.value.forEach((a,f)=>{a.value!=u&&(v.value[a.value]="")})}p();const $=(u,a,f)=>{k.current=u,f&&(k.pageSize=a,v.value.limit=a),v.value.offset=(u-1)*a,m()},k=q({current:1,pageSize:10,total:0,showTotal:u=>`\u5171 ${u} \u6761`,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["2","20","50","100"],onChange:(u,a)=>$(u,a),onShowSizeChange:(u,a)=>$(u,a,"sizeChange")}),V=(u,a,f)=>{N.current=u,f&&(N.pageSize=a,R.value.limit=a),R.value.offset=(u-1)*a,m()},N=q({current:1,pageSize:10,total:0,showTotal:u=>`\u5171 ${u} \u6761`,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["2","20","50","100"],onChange:(u,a)=>V(u,a),onShowSizeChange:(u,a)=>V(u,a,"sizeChange")}),re=p(3),ie=q({form:{},queryParams:{offset:0,limit:10,orderStatus:1,beginTime:"",endTime:""},detailQueryParams:{offset:0,limit:10},searchType:"purchaseOrderCode",searchValue:""}),{queryParams:v,detailQueryParams:R,searchType:I,searchValue:S,form:ba}=Ce(ie),m=async()=>{T.value=!0,g.value&&g.value.length>0?(v.value.beginTime=g.value[0],v.value.endTime=g.value[1]):(v.value.beginTime="",v.value.endTime=""),v.value[I.value]=S.value,ta({...v.value,orderStatus:re.value}).then(u=>{const a=(u==null?void 0:u.data.data)||[];B.value=a,k.total=(u==null?void 0:u.data.row)||0,T.value=!1})},F=p(""),Y=p(null),M=p({});function de(u){M.value=u,Y.value.showModal(u.receiveStorehouse)}const O=p(!1),E=p([]);function pe(u){na({...R.value,purchaseOrderCode:u.purchaseOrderCode}).then(a=>{a.code==200&&(F.value="\u6536\u8D27\u660E\u7EC6",E.value=a.data.data,O.value=!0)})}const ce={verifyStatus:[{required:!0,message:"\u5FC5\u9009",trigger:["change"]}],receiveQuality:[{required:!0,message:"\u5FC5\u586B",trigger:["change"]}],receiveArea:[{required:!0,message:"\u5FC5\u9009",trigger:["change"]}],receivePosition:[{required:!0,message:"\u5FC5\u9009",trigger:["change"]}],receiveDate:[{required:!0,message:"\u5FC5\u9009",trigger:["change"]}],receiveYear:[{required:!0,message:"\u5FC5\u9009",trigger:["change"]}],producePlaceId:[{required:!0,message:"\u5FC5\u9009",trigger:["change"]}],productDate:[{required:!0,message:"\u5FC5\u9009",trigger:["change"]}]};return ne(),ae(),m(),(u,a)=>{const f=Me,_e=Oe,C=Pe,ve=qe,fe=Qe,he=ze,ge=Le,A=Be,ye=$e,me=Ve,_=Fe,J=Ye,P=Ee,j=Ae,ke=Je,G=je,Ie=Ge,Se=He,H=Ke;return s(),c(w,null,[r(f,{title:"\u65B0\u589E\u91C7\u8D2D\u6536\u8D27\u5355",icon:"icon-rongqi"},{nav:n(()=>[i(l("\u91C7\u96C6\u7BA1\u7406")+" "),ua,oa]),_:1}),y("div",la,[r(me,{justify:"space-between",style:{flex:"1"}},{default:n(()=>[y("div",ra,[r(ye,{layout:"inline",ref:"queryRef",rules:ce,model:h(v)},{default:n(()=>[r(C,{style:{width:"308px"},name:"dateRange",label:"\u63D0\u4EA4\u65F6\u95F4"},{default:n(()=>[r(_e,{value:g.value,"onUpdate:value":a[0]||(a[0]=t=>g.value=t),"value-format":"YYYY-MM-DD",onChange:D},null,8,["value"])]),_:1}),r(C,{label:""},{default:n(()=>[r(he,{placeholder:"\u8BF7\u8F93\u5165",value:h(S),"onUpdate:value":a[2]||(a[2]=t=>W(S)?S.value=t:null)},{addonBefore:n(()=>[r(fe,{style:{width:"120px"},value:h(I),"onUpdate:value":a[1]||(a[1]=t=>W(I)?I.value=t:null),onChange:le},{default:n(()=>[(s(!0),c(w,null,we(L.value,(t,e)=>(s(),d(ve,{key:e,value:t.value},{default:n(()=>[i(l(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},8,["value"])]),_:1}),r(C,{name:"receiveStatus"},{default:n(()=>[r(ge,{label:"\u72B6\u6001",value:h(v).receiveStatus,"onUpdate:value":a[3]||(a[3]=t=>h(v).receiveStatus=t),placeholder:"\u8BF7\u9009\u62E9",clearable:"",style:{width:"240px"},options:se.value},null,8,["value","options"])]),_:1}),r(C,null,{default:n(()=>[r(A,{type:"primary",onClick:D},{default:n(()=>[i("\u67E5\u8BE2")]),_:1}),r(A,{type:"primary",ghost:"",onClick:ue,style:{"margin-left":"15px"}},{default:n(()=>[i("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1}),r(Ie,{spinning:T.value},{default:n(()=>[r(G,{dataSource:B.value,columns:h(Ze),pagination:k,scroll:{x:"max-content",y:500}},{bodyCell:n(({column:t,record:e})=>[t.dataIndex==="orderType"?(s(),d(_,{key:0},{default:n(()=>[i(l(e.orderType==1?"\u5B9A\u5411\u8D2D\u9500":"\u81EA\u4E3B\u7ECF\u8425"),1)]),_:2},1024)):o("",!0),t.dataIndex==="natureConvert"?(s(),d(_,{key:1},{default:n(()=>[i(l(e.natureConvert==1?"\u5408\u4F5C\u8F6C\u6362":"\u81EA\u4E3B\u8F6C\u6362"),1)]),_:2},1024)):o("",!0),t.dataIndex==="currency"?(s(),d(_,{key:2},{default:n(()=>[i(l(e.currency==1?"\u4EBA\u6C11\u5E01":"\u7F8E\u5143"),1)]),_:2},1024)):o("",!0),t.dataIndex==="measureUnit"?(s(),d(_,{key:3},{default:n(()=>[i(l(e.measureUnit==1?"\u65A4":e.measureUnit==2?"\u516C\u65A4":"\u5428"),1)]),_:2},1024)):o("",!0),t.dataIndex==="baseMeasureUnit"?(s(),d(_,{key:4},{default:n(()=>[i(l(e.baseMeasureUnit==1?"\u65A4":e.baseMeasureUnit==2?"\u516C\u65A4":"\u5428"),1)]),_:2},1024)):o("",!0),t.dataIndex==="nature"?(s(),d(_,{key:5},{default:n(()=>[i(l(e.nature==1?"\u50A8\u5907\u7CAE":e.nature==2?"\u5546\u54C1\u7CAE":"\u8F6E\u6362\u7CAE\u6CB9"),1)]),_:2},1024)):o("",!0),t.dataIndex==="orderStatus"?(s(),c(w,{key:6},[r(_,null,{default:n(()=>[i(l(e.orderStatus==1?"\u5F85\u5BA1\u6838":e.orderStatus==2?"\u5BA1\u6838\u4E0D\u901A\u8FC7":e.orderStatus==3?"\u5BA1\u6838\u901A\u8FC7":"\u5DF2\u53D6\u6D88"),1)]),_:2},1024),e.orderStatus==2?(s(),d(J,{key:0,placement:"top"},{title:n(()=>[y("span",null,l(e.approveReason),1)]),default:n(()=>[r(h(X))]),_:2},1024)):o("",!0)],64)):o("",!0),t.dataIndex==="receiveStatus"?(s(),c("span",ia,l(e.receiveStatus===4?"\u5168\u90E8\u6536\u8D27":e.receiveStatus===3?"\u90E8\u5206\u6536\u8D27":"\u672A\u6536\u8D27"),1)):o("",!0),t.dataIndex==="edit"?(s(),d(ke,{key:8,size:"small"},{default:n(()=>[e.receiveStatus==2||e.receiveStatus==3?(s(),d(P,{key:0,onClick:K=>de(e)},{default:n(()=>[i("\u521B\u5EFA\u6536\u8D27\u5355 ")]),_:2},1032,["onClick"])):o("",!0),e.receiveStatus==3?(s(),d(j,{key:1,type:"vertical",style:{"background-color":"#05C059"}})):o("",!0),e.receiveStatus==3||e.receiveStatus==4?(s(),d(P,{key:2,onClick:K=>pe(e)},{default:n(()=>[i("\u6536\u8D27\u660E\u7EC6")]),_:2},1032,["onClick"])):o("",!0),e.receiveStatus==3?(s(),d(j,{key:3,type:"vertical",style:{"background-color":"#05C059"}})):o("",!0),e.receiveStatus==3?(s(),d(P,{key:4,onClick:K=>(b.value=!0,z.value=e.id)},{default:n(()=>[i("\u5173\u95ED\u8BA2\u5355")]),_:2},1032,["onClick"])):o("",!0)]),_:2},1024)):o("",!0)]),_:1},8,["dataSource","columns","pagination"])]),_:1},8,["spinning"])]),r(H,{visible:b.value,"onUpdate:visible":a[5]||(a[5]=t=>b.value=t),title:"\u662F\u5426\u5173\u95ED\u8BA2\u5355",onOk:oe},{default:n(()=>[da,r(Se,{value:U.value,"onUpdate:value":a[4]||(a[4]=t=>U.value=t),rows:4},null,8,["value"])]),_:1},8,["visible"]),Ue(r(ea,{ref_key:"ReceiptModalComponents",ref:Y,receiptData:M.value,onReload:m},null,8,["receiptData"]),[[Te,M.value.length>=0]]),r(H,{title:F.value,visible:O.value,"onUpdate:visible":a[6]||(a[6]=t=>O.value=t),width:"1200px",footer:"","append-to-body":"",destroyOnClose:""},{default:n(()=>[r(G,{dataSource:E.value,columns:h(aa),pagination:N,scroll:{x:"max-content",y:240}},{bodyCell:n(({column:t,record:e})=>[t.dataIndex==="orderType"?(s(),d(_,{key:0},{default:n(()=>[i(l(e.orderType==1?"\u5B9A\u5411\u8D2D\u9500":"\u81EA\u4E3B\u7ECF\u8425"),1)]),_:2},1024)):o("",!0),t.dataIndex==="natureConvert"?(s(),d(_,{key:1},{default:n(()=>[i(l(e.natureConvert==1?"\u5408\u4F5C\u8F6C\u6362":"\u81EA\u4E3B\u8F6C\u6362"),1)]),_:2},1024)):o("",!0),t.dataIndex==="productCode"?(s(),c("span",pa,l(e.purchaseInfo.productCode),1)):o("",!0),t.dataIndex==="productName"?(s(),c("span",ca,l(e.purchaseInfo.productName),1)):o("",!0),t.dataIndex==="productSpec"?(s(),c("span",_a,l(e.purchaseInfo.productSpec),1)):o("",!0),t.dataIndex==="currency"?(s(),d(_,{key:5},{default:n(()=>[i(l(e.purchaseInfo.currency==1?"\u4EBA\u6C11\u5E01":"\u7F8E\u5143"),1)]),_:2},1024)):o("",!0),t.dataIndex==="cooperatorName"?(s(),c("span",va,l(e.purchaseInfo.cooperatorName),1)):o("",!0),t.dataIndex==="receiveStorehouseName"?(s(),c("span",fa,l(e.purchaseInfo.receiveStorehouseName),1)):o("",!0),t.dataIndex==="unitPrice"?(s(),c("span",ha,l(e.purchaseInfo.unitPrice),1)):o("",!0),t.dataIndex==="deliveryDate"?(s(),c("span",ga,l(e.purchaseInfo.deliveryDate),1)):o("",!0),t.dataIndex==="baseQuality"?(s(),c("span",ya,l(e.purchaseInfo.baseQuality),1)):o("",!0),t.dataIndex==="orderQuality"?(s(),c("span",ma,l(e.purchaseInfo.orderQuality),1)):o("",!0),t.dataIndex==="orderUser"?(s(),c("span",ka,l(e.purchaseInfo.createBy),1)):o("",!0),t.dataIndex==="orderTime"?(s(),c("span",Ia,l(e.purchaseInfo.createTime),1)):o("",!0),t.dataIndex==="orderRemark"?(s(),c("span",Sa,l(e.purchaseInfo.remark),1)):o("",!0),t.dataIndex==="measureUnit"?(s(),d(_,{key:15},{default:n(()=>[i(l(e.purchaseInfo.measureUnit==1?"\u65A4":e.purchaseInfo.measureUnit==2?"\u516C\u65A4":"\u5428"),1)]),_:2},1024)):o("",!0),t.dataIndex==="baseMeasureUnit"?(s(),d(_,{key:16},{default:n(()=>[i(l(e.purchaseInfo.baseMeasureUnit==1?"\u65A4":e.purchaseInfo.baseMeasureUnit==2?"\u516C\u65A4":"\u5428"),1)]),_:2},1024)):o("",!0),t.dataIndex==="totalPrice"?(s(),d(_,{key:17},{default:n(()=>[i(l(e.purchaseInfo.totalPrice),1)]),_:2},1024)):o("",!0),t.dataIndex==="nature"?(s(),d(_,{key:18},{default:n(()=>[i(l(e.purchaseInfo.nature==1?"\u50A8\u5907\u7CAE":e.purchaseInfo.nature==2?"\u5546\u54C1\u7CAE":"\u8F6E\u6362\u7CAE\u6CB9"),1)]),_:2},1024)):o("",!0),t.dataIndex==="orderStatus"?(s(),c(w,{key:19},[r(_,null,{default:n(()=>[i(l(e.orderStatus==1?"\u5F85\u5BA1\u6838":e.orderStatus==2?"\u5BA1\u6838\u4E0D\u901A\u8FC7":e.orderStatus==3?"\u5BA1\u6838\u901A\u8FC7":"\u5DF2\u53D6\u6D88"),1)]),_:2},1024),e.orderStatus==2?(s(),d(J,{key:0,placement:"top"},{title:n(()=>[y("span",null,l(e.approveReason),1)]),default:n(()=>[r(h(X))]),_:2},1024)):o("",!0)],64)):o("",!0)]),_:1},8,["dataSource","columns","pagination"])]),_:1},8,["title","visible"])],64)}}},Da=xe(xa,[["__scopeId","data-v-a3442dfe"]]);export{Da as default};
