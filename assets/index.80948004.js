import{z as ea,A as te,o as p,c as S,t as h,Q as _,d as l,b6 as aa,W as ye,w as n,b5 as pt,ba as vt,g as u,aO as We,bv as Ge,b3 as ct,r,V as ft,at as Te,e as f,h as Pe,D as Ne,f as b,R as mt,F as ae,i as g,bU as yt,m as F,M as V,_ as gt,a3 as _t,n as ht,a8 as bt,a9 as kt,a6 as xt,B as St,s as wt,ac as It,a4 as Ct,aB as Ut,b1 as Tt,K as Pt,a5 as Nt,L as Dt,x as Ot,l as Rt,q as $t,bW as Qt,bX as jt,bY as Lt,bZ as Mt,b_ as qt,b$ as Ft,p as Yt,N as At,O as Bt,G as Et}from"./index.192c8708.js";import{t as zt,c as He,a as Kt}from"./creat-sale-modal.41d455a3.js";import{g as Vt}from"./receiveList.732535dd.js";import{d as Wt,e as Gt,a as Ht,f as Je,g as Jt,c as Xt,p as Zt,h as Xe,i as el,j as al,k as tl,l as ll,s as nl,m as ul}from"./saleList.d7f64940.js";import{c as Ze,g as ol}from"./storageMg.e8e488da.js";import"./qualityConversion.db7f34ff.js";const sl={class:"g-range-wrapper"},rl={key:0,class:"g-range-label"},dl={__name:"g-range-picker",props:{start:{tyep:String,default:void 0},end:{tyep:String,default:void 0},format:{type:String,default:"YYYY-MM-DD"},label:{type:String,default:""}},emits:["update:start","update:end","update:value","change"],setup(N,{emit:Y}){const A=N,C=te({value:[]}),$=Y,D={init(){We(()=>A.format,()=>{D.updateMethod(C.value)}),We(()=>[A.start,A.end],k=>{k[0]&&k[1]?C.value=Ge.getDayjsTime([k[0],k[1]]):C.value=[]},{immediate:!0})},updateMethod(k){let U=[];k&&k.length>=2&&(U=Ge(k).format(A.format)),$("update:start",U[0]||void 0),$("update:end",U[1]||void 0)},changeRangePicker(k){D.updateMethod(k)}};return D.init(),(k,U)=>{const W=ct;return p(),S("div",sl,[N.label?(p(),S("div",rl,h(N.label),1)):_("",!0),l(W,vt({format:N.format,value:u(C).value,"onUpdate:value":U[0]||(U[0]=B=>u(C).value=B)},k.$attrs,{onChange:D.changeRangePicker}),aa({_:2},[ye(Object.keys(k.$slots),B=>({name:B,fn:n(()=>[pt(k.$slots,B,{},void 0,!0)])}))]),1040,["format","value","onChange"])])}}},il=ea(dl,[["__scopeId","data-v-06c3c4e9"]]);const le=N=>(At("data-v-97ff8b5b"),N=N(),Bt(),N),pl=le(()=>b("span",{class:"separate"},"/",-1)),vl=le(()=>b("span",null,"\u9500\u552E\u8BA2\u5355\u5217\u8868",-1)),cl={class:"app-container"},fl={class:"container-wrapper"},ml=le(()=>b("p",null,"\u5907\u6CE8",-1)),yl={key:9},gl={key:10},_l={key:1},hl={class:"app-container"},bl={class:"container-wrapper"},kl={key:0,style:{"margin-bottom":"10px",color:"#f50736","font-weight":"bolder","font-size":"16px"}},xl={style:{display:"flex","justify-content":"space-between",width:"100%","margin-top":"20px"}},Sl={style:{display:"flex","justify-content":"space-between",width:"100%","margin-top":"20px"}},wl={style:{display:"flex","justify-content":"space-between",width:"100%","margin-top":"20px"}},Il={key:4},Cl={key:5},Ul=le(()=>b("div",null,[b("span",null,"\u5546\u54C1\u5206\u7C7B")],-1)),Tl={class:"head-container"},Pl={key:1,style:{"text-align":"center"}},Nl=le(()=>b("span",null,"\u6682\u65E0\u6570\u636E",-1)),Dl=[Nl],Ol={class:"dialog-footer"},Rl={__name:"index",setup(N){const{proxy:Y}=Et(),A=r([]),C=r([]),$=r([]),D=r(!1),k=r(""),U=r(""),W=r(""),B=r([]),E=r(!1),ne=r(!0),ta=r(!0),la=r([]),ge=r(""),O=r([]),Q=r(null),ue=r(),oe=r(),se=r(),G=r(),H=r(),re=r(),De=r(),na=["productCode","productName","productSpec","orderQuality","measureUnit","jbjsdwsl","baseMeasureUnit","unitPrice","hshj","nature","cooperatorId","sendStorehouse","sendDate","remark"],ua=["sendDate"],oa=[""],sa=["orderQuality","unitPrice","remark"],ra=["measureUnit","nature","cooperatorId","sendStorehouse"],Oe=r([]),v=r([{key:1,orderQuality:void 0,unitPrice:void 0,remark:void 0,productName:void 0,measureUnit:void 0,cooperatorId:void 0,sendStorehouse:void 0,sendDate:void 0,editable:!0}]),da=r([{value:"",label:"\u5168\u90E8"},{value:4,label:"\u5DF2\u53D6\u6D88"},{value:1,label:"\u5F85\u5BA1\u6838"},{value:3,label:"\u5BA1\u6838\u901A\u8FC7"},{value:2,label:"\u5BA1\u6838\u4E0D\u901A\u8FC7"}]),ia=r([{value:1,label:"\u63D0\u4EA4\u65F6\u95F4"},{value:2,label:"\u5BA1\u6838\u65F6\u95F4"}]),Re=r([{value:"saleOrderCode",label:"\u9500\u552E\u8BA2\u5355\u7F16\u53F7"},{value:"cooperatorName",label:"\u5BA2\u6237\u540D\u79F0"},{value:"productCode",label:"\u5546\u54C1\u7F16\u7801"},{value:"productName",label:"\u5546\u54C1\u540D\u79F0"},{value:"contractNo",label:"\u9500\u552E\u5408\u540C\u53F7"},{value:"orderUser",label:"\u5236\u5355\u4EBA"}]),de=r(!1),pa=r([{title:"\u7269\u6599\u7F16\u7801",dataIndex:"id",ellipsis:!0,scopedSlots:{customRender:"id"},slots:{customRender:"id"}},{title:"\u7269\u6599\u540D\u79F0",dataIndex:"productName",ellipsis:!0,scopedSlots:{customRender:"productName"},slots:{customRender:"productName"}},{title:"\u89C4\u683C\u578B\u53F7",dataIndex:"specName",ellipsis:!0,scopedSlots:{customRender:"specName"},slots:{customRender:"specName"}},{title:"\u57FA\u672C\u8BA1\u91CF\u5355\u4F4D",dataIndex:"measurementUnit",ellipsis:!0}]),va=a=>{Wt(k.value,U.value).then(e=>{F.success("\u64CD\u4F5C\u6210\u529F")}).finally(e=>D.value=!1),T()},ca=r([{value:1,label:"\u5B9A\u5411\u8D2D\u9500"},{value:2,label:"\u81EA\u4E3B\u7ECF\u8425"}]),fa=te({form:{},searchType:"saleOrderCode",queryParams:{offset:0,limit:10,timeType:1,orderStatus:"",beginTime:"",endTime:""},queryParamsTwo:{},rules:{ctgName:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],deliveryQuality:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],receiveArea:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],receivePosition:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],receiveOrderCode:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],supplierId:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],qualityLevel:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],nature:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],batchNo:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],deliveryDate:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),R=r([]),J=r(""),{queryParams:y,form:c,rules:X,searchType:K,queryParamsTwo:d}=ft(fa);function $l(a,e){}const ma=r([{value:1,label:"\u4E00\u7EA7"},{value:2,label:"\u4E8C\u7EA7"},{value:3,label:"\u4E09\u7EA7"}]),ya=r([{value:1,label:"\u50A8\u5907\u7CAE"},{value:2,label:"\u5546\u54C1\u7CAE"},{value:3,label:"\u8F6E\u6362\u7CAE\u6CB9"}]),ie=r(!1),j=r(void 0);function ga(a){j.value=a,Ka(),ie.value=!0}const pe=r(""),_a=te({type:"radio",onChange:(a,e)=>{pe.value=e.length-1}}),ha=()=>{if(pe.value!==""&&pe.value!==null){let a=pe.value;v.value[j.value].productName=R.value[a].productName,v.value[j.value].productCode=R.value[a].productId,v.value[j.value].productId=R.value[a].productId,v.value[j.value].productSpec=R.value[a].specName,v.value[j.value].productSpecId=R.value[a].id,v.value[j.value].baseMeasureUnit=R.value[a].measurementUnit,ve(j.value),ie.value=!1}else F.error("\u8BF7\u9009\u62E9\u89C4\u683C")};function ba(a,e,o){e=="unitPrice"?(a!==""&&a.substr(0,1)==="."&&(a=""),a=a.replace(/^0*(0\.|[1-9])/,"$1"),a=a.replace(/[^\d.]/g,""),a=a.replace(/\.{2,}/g,"."),a=a.replace(".","$#$").replace(/\./g,"").replace("$#$","."),a=a.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),a.indexOf(".")<0&&a!==""&&a.substr(0,1)==="0"&&a.length===2&&(a=a.substr(1,a.length)),v.value[o][e]=a):(e=="orderQuality"&&(a=a.replace(/^0*(0\.|[1-9])/,"$1"),a=a.replace(/[^\d.]/g,"")),v.value[o][e]=a),a==""&&(v.value[o].jbjsdwsl=null,v.value[o].hshj=null),(e=="orderQuality"||e=="unitPrice")&&ve(o)}function ka(a){a.deliveryQuality&&(a.deliveryQuality=a.deliveryQuality.replace(/^0*(0\.|[1-9])/,"$1"),a.deliveryQuality=a.deliveryQuality.replace(/[^\d.]/g,""),a.deliveryQuality=a.deliveryQuality.replace(/\D/g,""),a.deliveryQuality=a.deliveryQuality.replace(/^0{1,}/g,""))}function xa(a){Re.value.forEach((e,o)=>{e.value!=a&&(y.value[e.value]="")})}function Ql(a,e,o){}function Sa(a,e,o){v.value[o][e]=a,e=="measureUnit"&&ve(o)}const wa=async(a,e)=>(await ul(a)).data;function ve(a,e){if(v.value[a].orderQuality&&v.value[a].measureUnit&&v.value[a].unitPrice&&v.value[a].baseMeasureUnit){let o={orderQuality:v.value[a].orderQuality,measureUnit:v.value[a].measureUnit,baseMeasureUnit:v.value[a].baseMeasureUnit,unitPrice:v.value[a].unitPrice};wa(o).then(s=>{v.value[a].jbjsdwsl=s.baseQuality,v.value[a].hshj=s.totalPrice})}}const _e=r(0),Ia=Te(()=>(_e.value=0,v.value.forEach((a,e)=>{a.hshj&&(_e.value+=Number(a.hshj))}),_e.value)),he=r(0),Ca=Te(()=>(he.value=0,v.value.forEach((a,e)=>{a.orderQuality&&(he.value+=Number(a.orderQuality))}),he.value)),be=r(0),Ua=Te(()=>(be.value=0,v.value.forEach((a,e)=>{a.jbjsdwsl&&(be.value+=Number(a.jbjsdwsl))}),be.value)),ke=r([]),$e=r([]);function Ta(a){if(a=="measureUnit")return[{value:1,label:"\u65A4"},{value:2,label:"\u516C\u65A4/\u5343\u514B"},{value:3,label:"\u5428"}];if(a=="cooperatorId")return ke.value;if(a=="sendStorehouse")return ke.value}function T(){ne.value=!0,y.value[K.value]=J.value,Gt(Y.addDateRange(y.value)).then(a=>{const e=a==null?void 0:a.data;B.value=e.data,Z.total=(e==null?void 0:e.row)||0,ne.value=!1})}function Pa(a){const e=a.id||la.value,o=a.ctgName,m=a.status==1?0:1;V.confirm({title:"\u64CD\u4F5C\u786E\u8BA4",content:'\u662F\u5426\u786E\u8BA4\u4FEE\u6539"'+o+'"\u7684\u72B6\u6001\uFF1F',onOk(){categoryUpdate({status:m,id:e,ctgName:a.ctgName,ctgParentId:a.ctgParentId}).then(()=>{T(),F.success("\u4FEE\u6539\u6210\u529F")}).catch(()=>{})}})}function Qe(){c.value={id:void 0,ctgName:void 0,status:"0",remark:void 0},Y.resetForm("dictRef"),A.value=[],C.value=[]}function je(){Z.current=1,y.value.offset=1,O.value.length>0?(y.value.beginTime=O.value[0],y.value.endTime=O.value[1]):(y.value.beginTime="",y.value.endTime=""),T()}function Na(){ne.value=!0,O.value.length>0?(y.value.beginTime=O.value[0],y.value.endTime=O.value[1]):(y.value.beginTime="",y.value.endTime=""),y.value[K.value]=J.value,Y.addDateRange(y.value),Y.download("/saleOrderInfo/exportData",{...y.value},`\u9500\u552E\u8BA2\u5355_${new Date().getTime()}.xlsx`),ne.value=!1}function Le(){O.value=[],y.value={timeType:1,offset:0,limit:10},K.value="saleOrderCode",J.value="",Y.resetForm("queryRef"),je()}const Me=(a,e,o)=>{Z.current=a,o&&(Z.pageSize=e,y.value.limit=e),y.value.offset=(a-1)*e,T()},Z=te({current:1,pageSize:10,total:0,showTotal:a=>`\u5171 ${a} \u6761`,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["2","20","50","100"],onChange:(a,e)=>Me(a,e),onShowSizeChange:(a,e)=>Me(a,e,"sizeChange")}),Da=te({onChange:(a,e)=>{Oe.value=[],Oe.value=e.map(o=>o.key)}});function Oa(){W.value.validateFields(),Qe(),de.value=!1}const Ra=async()=>{await W.value.validateFields(),Q.value&&Ht({...c.value,saleOrderCode:Q.value,producePlaceId:De.value,productDate:G.value,receiveYear:H.value}).then(a=>{F.success("\u65B0\u589E\u6210\u529F"),de.value=!1,T()})};function $a(){E.value=!1,d.value={}}function Qa(a){const e=a.id;V.confirm({title:"\u64CD\u4F5C\u786E\u8BA4",content:"\u662F\u5426\u786E\u5B9A\u64A4\u56DE\uFF1F",onOk(){Je({id:e,orderStatus:4}).then(()=>{T(),F.success("\u64A4\u56DE\u6210\u529F")}).catch(()=>{})}})}function ja(a){Qe(),Q.value=a.id,c.value.id=a.id,Jt(Q.value).then(e=>{ge.value="\u4FEE\u6539\u9500\u552E\u8BA2\u5355",v.value[0]=e.data,ve(0),d.value.orderType=e.data.orderType,d.value.natureConvert=e.data.natureConvert,d.value.cooperatorId=e.data.cooperatorId,d.value.supplierId=e.data.supplierId,d.value.contractNo=e.data.contractNo,d.value.currency=e.data.currency,d.value.approveReason=e.data.approveReason,d.value.saleOrderCode=e.data.saleOrderCode,d.value.approveTime=e.data.approveTime,d.value.orderUser=e.data.orderUser,d.value.createBy=e.data.createBy,d.value.orderStatus=e.data.orderStatus==1?"\u5F85\u5BA1\u6838":e.data.orderStatus==2?"\u5BA1\u6838\u4E0D\u901A\u8FC7":e.data.orderStatus==3?"\u5BA1\u6838\u901A\u8FC7":"\u5DF2\u53D6\u6D88",d.value.approveUser=e.data.approveUser,d.value.orderTime=e.data.orderTime,d.value.createTime=e.data.createTime,d.value.remark=e.data.remark,v.value[0].key=1,v.value[0].editable=!0,E.value=!0})}const qe=r(null),Fe=r({}),La=a=>{console.log(a,"row"),Fe.value=a,qe.value.showModal()},xe=r([]),Ma=r([]);function qa(){xe.value=[],Xt().then(a=>{a.data.length>0&&a.data.forEach(e=>{xe.value.push({value:e.id,label:e.supplierName})})})}function Fa(a){Zt().then(e=>{e.data.length>0&&e.data.forEach(o=>{Ma.value.push({value:o.id,label:o.placeName})})})}function Ya(a){Q.value=a.id,V.confirm({title:"\u64CD\u4F5C\u786E\u8BA4",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u8BE5\u6570\u636E\uFF1F",onOk(){Xe(Q.value).then(()=>{Le(),F.success("\u5220\u9664\u6210\u529F")}).catch(()=>{})}})}const ce=r([]),Ye=r([]),Aa=r(!0);function Ba(a,e){if(R.value=void 0,a.length!=0){let o;e.node.ctgLevel==1?o={ctgLevel1Id:a[0]}:o={ctgLevel2Id:a[0]},el(o).then(m=>{let s=m==null?void 0:m.data;R.value=s})}}const Ea=a=>{Ye.value=a,Aa.value=!1},za=a=>{if(a.length<1)return[];function e(o){o.map(m=>{m.key=m.id,m.title=m.ctgName,m.children&&m.children.length&&e(m.children)})}return e(a),a};function Ka(){al().then(a=>{const e=(a==null?void 0:a.data)||[],o=za(e);ce.value=o,Ae(e)})}const Va=[],Ae=a=>{if(!!a)for(let e=0;e<a.length;e++){const o=a[e],m=o.key;Va.push({key:m,title:o.title}),o.children&&Ae(o.children)}};function Wa(){V.confirm({title:"\u64CD\u4F5C\u786E\u8BA4",content:"\u662F\u5426\u786E\u5B9A\u4FEE\u6539\uFF1F",onOk(){Je({...d.value,...v.value[0],orderStatus:1,id:Q.value}).then(()=>{E.value=!1,T(),F.success("\u63D0\u4EA4\u6210\u529F")}).catch(()=>{})}})}function Ga(){V.confirm({title:"\u64CD\u4F5C\u786E\u8BA4",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onOk(){Xe(Q.value).then(()=>{E.value=!1,T(),F.success("\u5220\u9664\u6210\u529F")}).catch(()=>{})}})}function Ha(){tl().then(a=>{(a==null?void 0:a.data).forEach(o=>{$e.value.push({value:o.id,label:o.cooperatorName})})})}function Ja(){ll().then(a=>{(a==null?void 0:a.data).forEach(o=>{ke.value.push({value:o.id,label:o.storeName})})})}const Xa=r([]);function Za(){var a=new Date,e=a.getFullYear()+1;for(let o=0;o<5;o++)e-=1,Xa.value.push({value:e,label:e})}function et(a){tt(),C.value=[],$.value=[],c.value.receiveOrderCode=null,c.value.receivePosition=void 0,at(a)}const at=a=>{nl({areaId:a}).then(e=>{X.value.receivePosition[0].required=!0,e.data.length!=0?e.data.forEach(o=>{C.value.push({value:o.id,label:o.storePositionName})}):Se(c,!0)})};function Se(a,e=!1){if(e&&(X.value.receivePosition[0].required=!1,a={...a.value}),console.log(X.value,"\u89C4\u5219"),a.receiveOrderCode)Ze({productId:a.productId,productSpecId:a.productSpecId,storehouseId:a.sendStorehouse,storeAreaId:a.receiveArea,storePositionId:a.receivePosition,receiveOrderCode:a.receiveOrderCode}).then(s=>{oe.value=s.data}),Vt({receiveOrderCode:a.receiveOrderCode}).then(s=>{console.log("purchaseInfo",s.data),se.value=s.data.unitPrice,G.value=s.data.productDate,H.value=s.data.receiveYear,re.value=s.data.placeName,De.value=s.data.producePlaceId});else{$.value=[];let o=Ze({productId:a.productId,productSpecId:a.productSpecId,storehouseId:a.sendStorehouse,storeAreaId:a.receiveArea,storePositionId:a.receivePosition}),m=ol({productId:a.productId,productSpecId:a.productSpecId,storehouseId:a.sendStorehouse,storeAreaId:a.receiveArea,storePositionId:a.receivePosition});o.then(s=>{ue.value=s.data}),m.then(s=>{s.data.length!==0&&(s.data.forEach(fe=>{$.value.push({value:fe.id,label:fe.receiveOrderCode})}),console.log($.value,"\u6807\u7B7E"))})}}const tt=()=>{ue.value=null,oe.value=null,se.value=null,c.jldw=null,H.value=null,re.value=null,G.value=null};return Za(),Ha(),Ja(),qa(),Fa(),T(),(a,e)=>{const o=gt,m=_t,s=ht,fe=il,lt=bt,L=kt,x=xt,M=St,me=wt,Be=It,we=V,P=Ct,nt=Ut,ut=Tt,ee=Pt,ot=Nt,st=Dt,Ie=Ot,z=Rt,Ee=$t,ze=Qt,Ke=jt,Ce=Lt,rt=Mt,dt=qt,it=Ft,Ve=Yt;return p(),S(ae,null,[l(o,{title:E.value?"\u91CD\u65B0\u7F16\u8F91":"\u9500\u552E\u8BA2\u5355\u5217\u8868",icon:"icon-xuniziyuan",back:"/overview"},{nav:n(()=>[f(h("\u9500\u552E\u8BA2\u5355\u5217\u8868")+" "),pl,vl]),_:1},8,["title"]),Pe(b("div",cl,[b("div",fl,[Pe(l(me,{model:u(y),ref:"queryRef",layout:"inline","label-width":"68px"},{default:n(()=>[l(s,{name:"timeType"},{default:n(()=>[l(m,{label:"",value:u(y).timeType,"onUpdate:value":e[0]||(e[0]=t=>u(y).timeType=t),clearable:"",style:{width:"100px"},options:ia.value},null,8,["value","options"])]),_:1}),l(s,{style:{width:"228px","margin-left":"-15px"},name:"dateRange"},{default:n(()=>[l(fe,{value:O.value,"onUpdate:value":e[1]||(e[1]=t=>O.value=t),"value-format":"YYYY-MM-DD"},null,8,["value"])]),_:1}),l(s,{label:""},{default:n(()=>[l(x,{placeholder:"\u8BF7\u8F93\u5165",value:J.value,"onUpdate:value":e[3]||(e[3]=t=>J.value=t)},{addonBefore:n(()=>[l(L,{style:{width:"120px"},value:u(K),"onUpdate:value":e[2]||(e[2]=t=>mt(K)?K.value=t:null),onChange:xa},{default:n(()=>[(p(!0),S(ae,null,ye(Re.value,(t,i)=>(p(),g(lt,{key:i,value:t.value},{default:n(()=>[f(h(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},8,["value"])]),_:1}),l(s,{name:"orderStatus"},{default:n(()=>[l(m,{label:"\u8BA2\u5355\u72B6\u6001",value:u(y).orderStatus,"onUpdate:value":e[4]||(e[4]=t=>u(y).orderStatus=t),placeholder:"\u8BF7\u9009\u62E9",clearable:"",style:{width:"240px"},options:da.value},null,8,["value","options"])]),_:1}),l(s,null,{default:n(()=>[l(M,{type:"primary",onClick:je},{default:n(()=>[f(" \u67E5\u8BE2 ")]),_:1}),l(M,{type:"primary",ghost:"",onClick:Le,style:{"margin-left":"15px"}},{default:n(()=>[f(" \u91CD\u7F6E ")]),_:1}),l(M,{type:"primary",onClick:Na,style:{"margin-left":"15px"}},{default:n(()=>[f(" \u5BFC\u51FA ")]),_:1})]),_:1})]),_:1},8,["model"]),[[Ne,ta.value]])]),l(we,{visible:D.value,"onUpdate:visible":e[6]||(e[6]=t=>D.value=t),title:"\u662F\u5426\u5173\u95ED\u8BA2\u5355",onOk:va},{default:n(()=>[ml,l(Be,{value:U.value,"onUpdate:value":e[5]||(e[5]=t=>U.value=t),rows:4},null,8,["value"])]),_:1},8,["visible"]),l(Ie,{scroll:{x:0,y:500},dataSource:B.value,columns:u(zt),pagination:u(Z),expandIconColumnIndex:-1},{bodyCell:n(({column:t,record:i})=>[t.dataIndex==="saleStatus"?(p(),g(P,{key:0},{default:n(()=>[f(h({2:"\u672A\u9500\u552E",3:"\u90E8\u5206\u9500\u552E",4:"\u5168\u90E8\u9500\u552E"}[i.saleStatus]),1)]),_:2},1024)):_("",!0),t.dataIndex==="orderType"?(p(),g(P,{key:1},{default:n(()=>[f(h(i.orderType==1?"\u5B9A\u5411\u8D2D\u9500":"\u81EA\u4E3B\u7ECF\u8425"),1)]),_:2},1024)):_("",!0),t.dataIndex==="natureConvert"?(p(),g(P,{key:2},{default:n(()=>[f(h(i.natureConvert==1?"\u5408\u4F5C\u8F6C\u6362":"\u81EA\u4E3B\u8F6C\u6362"),1)]),_:2},1024)):_("",!0),t.dataIndex==="currency"?(p(),g(P,{key:3},{default:n(()=>[f(h(i.currency==1?"\u4EBA\u6C11\u5E01":"\u7F8E\u5143"),1)]),_:2},1024)):_("",!0),t.dataIndex==="measureUnit"?(p(),g(P,{key:4},{default:n(()=>[f(h(i.measureUnit==1?"\u65A4":i.measureUnit==2?"\u516C\u65A4":"\u5428"),1)]),_:2},1024)):_("",!0),t.dataIndex==="baseMeasureUnit"?(p(),g(P,{key:5},{default:n(()=>[f(h(i.baseMeasureUnit==1?"\u65A4":i.baseMeasureUnit==2?"\u516C\u65A4":"\u5428"),1)]),_:2},1024)):_("",!0),t.dataIndex==="totalPrice"?(p(),g(P,{key:6},{default:n(()=>[f(h(i.totalPrice),1)]),_:2},1024)):_("",!0),t.dataIndex==="nature"?(p(),g(P,{key:7},{default:n(()=>[f(h(i.nature==1?"\u50A8\u5907\u7CAE":i.nature==2?"\u5546\u54C1\u7CAE":"\u8F6E\u6362\u7CAE\u6CB9"),1)]),_:2},1024)):_("",!0),t.dataIndex==="orderStatus"?(p(),S(ae,{key:8},[l(P,null,{default:n(()=>[f(h(i.orderStatus==1?"\u5F85\u5BA1\u6838":i.orderStatus==2?"\u5BA1\u6838\u4E0D\u901A\u8FC7":i.orderStatus==3?"\u5BA1\u6838\u901A\u8FC7":"\u5DF2\u53D6\u6D88"),1)]),_:2},1024),i.orderStatus==2?(p(),g(nt,{key:0,placement:"top"},{title:n(()=>[b("span",null,h(i.approveReason),1)]),default:n(()=>[l(u(yt))]),_:2},1024)):_("",!0)],64)):_("",!0),t.dataIndex==="status"?(p(),S("span",yl,[l(ut,{checked:i.status!=1,onClick:w=>Pa(i)},null,8,["checked","onClick"])])):_("",!0),t.dataIndex==="edit"?(p(),S("span",gl,[l(st,{size:"small"},{default:n(()=>[i.orderStatus==1?(p(),g(ee,{key:0,onClick:w=>Qa(i)},{default:n(()=>[f(" \u64A4\u56DE ")]),_:2},1032,["onClick"])):_("",!0),i.orderStatus==2||i.orderStatus==4?(p(),S("div",_l,[l(ee,{onClick:w=>ja(i)},{default:n(()=>[f(" \u91CD\u65B0\u7F16\u8F91 ")]),_:2},1032,["onClick"]),l(ot,{type:"vertical",style:{"background-color":"#05C059"}}),l(ee,{onClick:w=>Ya(i)},{default:n(()=>[f(" \u5220\u9664 ")]),_:2},1032,["onClick"])])):_("",!0),i.orderStatus==3||i.saleStatus==4?(p(),g(ee,{key:2,onClick:w=>La(i)},{default:n(()=>[f(" \u65B0\u589E\u9500\u552E\u51FA\u5E93\u5355 ")]),_:2},1032,["onClick"])):_("",!0),i.saleStatus==3?(p(),g(ee,{key:3,onClick:w=>(D.value=!0,k.value=i.id)},{default:n(()=>[f("\u5173\u95ED\u8BA2\u5355")]),_:2},1032,["onClick"])):_("",!0)]),_:2},1024)])):_("",!0)]),_:1},8,["dataSource","columns","pagination"])],512),[[Ne,!E.value]]),Pe(b("div",hl,[l(Ee,{justify:"space-between",style:{flex:"1"}},{default:n(()=>[b("div",bl,[l(me,{class:"backBox",style:{display:"flex","justify-content":"space-between",width:"100%","margin-bottom":"20px"}},{default:n(()=>[b("div",null,[l(M,{type:"primary",onClick:$a},{default:n(()=>[f("\u8FD4\u56DE\u4E0A\u4E00\u9875")]),_:1})]),b("div",null,[l(M,{type:"primary",onClick:e[7]||(e[7]=t=>Ga()),style:{"margin-right":"20px"}},{default:n(()=>[f("\u5220\u9664")]),_:1}),l(M,{type:"primary",onClick:Wa},{default:n(()=>[f("\u63D0\u4EA4")]),_:1})])]),_:1}),l(me,{layout:"inline",ref:"queryRefUpdata",rules:u(X),model:u(d)},{default:n(()=>[u(d).orderStatus=="\u5BA1\u6838\u4E0D\u901A\u8FC7"?(p(),S("div",kl,"\u4E0D\u901A\u8FC7\u539F\u56E0")):_("",!0),l(Be,{value:u(d).approveReason,"onUpdate:value":e[8]||(e[8]=t=>u(d).approveReason=t),disabled:"",defaultValue:"\u65E0","auto-size":{minRows:2,maxRows:5}},null,8,["value"]),b("div",xl,[l(s,{name:"contractNo"},{default:n(()=>[l(z,{label:"\u9500\u552E\u8BA2\u5355\u7F16\u53F7",placeholder:"\u65E0",disabled:"",value:u(d).saleOrderCode,"onUpdate:value":e[9]||(e[9]=t=>u(d).saleOrderCode=t),style:{width:"400px"}},null,8,["value"])]),_:1}),l(s,{name:"createTime"},{default:n(()=>[l(z,{label:"\u5236\u5355\u65F6\u95F4",placeholder:"\u65E0",disabled:"",value:u(d).createTime,"onUpdate:value":e[10]||(e[10]=t=>u(d).createTime=t),style:{width:"400px"}},null,8,["value"])]),_:1}),l(s,{name:"createBy"},{default:n(()=>[l(z,{label:"\u5236\u5355\u4EBA",placeholder:"\u65E0",disabled:"",value:u(d).createBy,"onUpdate:value":e[11]||(e[11]=t=>u(d).createBy=t),style:{width:"400px"}},null,8,["value"])]),_:1})]),b("div",Sl,[l(s,{name:"approveTime"},{default:n(()=>[l(z,{label:"\u5BA1\u6838\u65F6\u95F4",placeholder:"\u65E0",disabled:"",value:u(d).approveTime,"onUpdate:value":e[12]||(e[12]=t=>u(d).approveTime=t),style:{width:"400px"}},null,8,["value"])]),_:1}),l(s,{name:"approveUser"},{default:n(()=>[l(z,{label:"\u5BA1\u6838\u4EBA",placeholder:"\u65E0",disabled:"",value:u(d).approveUser,"onUpdate:value":e[13]||(e[13]=t=>u(d).approveUser=t),style:{width:"400px"}},null,8,["value"])]),_:1}),l(s,{name:"orderStatus"},{default:n(()=>[l(z,{label:"\u8BA2\u5355\u72B6\u6001",placeholder:"\u65E0",disabled:"",value:u(d).orderStatus,"onUpdate:value":e[14]||(e[14]=t=>u(d).orderStatus=t),style:{width:"400px"}},null,8,["value"])]),_:1})]),b("div",wl,[l(s,{label:"",name:"orderType"},{default:n(()=>[l(m,{label:"\u8BA2\u5355\u7C7B\u578B",placeholder:"\u8BF7\u9009\u62E9",style:{width:"400px"},disabled:"",value:u(d).orderType,"onUpdate:value":e[15]||(e[15]=t=>u(d).orderType=t),options:ca.value,onChange:e[16]||(e[16]=t=>void 0)},null,8,["value","options"])]),_:1}),l(s,{name:"cooperatorId"},{default:n(()=>[l(m,{label:"\u5408\u4F5C\u5BA2\u6237",placeholder:"\u8BF7\u9009\u62E9",style:{width:"400px"},disabled:"",value:u(d).cooperatorId,"onUpdate:value":e[17]||(e[17]=t=>u(d).cooperatorId=t),options:$e.value,onChange:e[18]||(e[18]=t=>void 0)},null,8,["value","options"])]),_:1}),l(s,{name:"contractNo"},{default:n(()=>[l(z,{label:"\u9500\u552E\u5408\u540C\u53F7",placeholder:"\u8BF7\u9009\u62E9",disabled:"",value:u(d).contractNo,"onUpdate:value":e[19]||(e[19]=t=>u(d).contractNo=t),style:{width:"400px"}},null,8,["value"])]),_:1})])]),_:1},8,["rules","model"])])]),_:1}),l(Ie,{scroll:{x:"max-content",y:240},columns:u(He),"data-source":v.value,bordered:"",size:"small","row-Selection":u(Da),rowKey:t=>t.key,summary:!0},aa({summary:n(()=>[l(dt,{fixed:""},{default:n(()=>[l(rt,null,{default:n(()=>[l(Ke,{index:0},{default:n(()=>[f(" \u5408\u8BA1")]),_:1}),(p(!0),S(ae,null,ye(u(He),(t,i)=>(p(),g(Ke,{key:i,index:1},{default:n(()=>[t!=null&&t.summary?(p(),S(ae,{key:0},[t.type=="orderQuality"?(p(),g(Ce,{key:0},{default:n(()=>[f(h(u(Ca)),1)]),_:1})):_("",!0),t.type=="jbjsdwsl"?(p(),g(Ce,{key:1},{default:n(()=>[f(h(u(Ua)),1)]),_:1})):_("",!0),t.type=="hshj"?(p(),g(Ce,{key:2},{default:n(()=>[f(h(u(Ia)),1)]),_:1})):_("",!0)],64)):_("",!0)]),_:2},1024))),128))]),_:1})]),_:1})]),_:2},[ye(na,t=>({name:t,fn:n(({column:i,record:w,index:I,text:Ue,value:jl})=>[(p(),S("div",{key:t},[w.editable&&sa.includes(t)?(p(),g(x,{key:0,"read-only":oa.includes(t),placeholder:"\u8BF7\u8F93\u5165",value:Ue,onChange:q=>ba(q.target.value,t,I)},null,8,["read-only","value","onChange"])):w.editable&&ua.includes(t)?(p(),g(ze,{key:1,placeholder:"\u8BF7\u9009\u62E9\u65F6\u95F4",valueFormat:"YYYY-MM-DD",value:v.value[I][t],"onUpdate:value":q=>v.value[I][t]=q,onChange:q=>void 0},null,8,["value","onUpdate:value","onChange"])):w.editable&&ra.includes(t)?(p(),g(L,{key:2,placeholder:"\u8BF7\u9009\u62E9",style:{display:"block"},value:Ue,options:Ta(t),onChange:q=>Sa(q,t,I)},null,8,["value","options","onChange"])):w.editable&&t=="productName"?(p(),g(x,{key:3,"read-only":"true",placeholder:"\u8BF7\u70B9\u51FB\u9009\u62E9",value:Ue,onClick:q=>ga(I)},null,8,["value","onClick"])):w.editable&&t=="baseMeasureUnit"?(p(),S("span",Il,h(v.value[I][t]==null?"\u81EA\u52A8\u5E26\u51FA":v.value[I][t]==1?"\u65A4":v.value[I][t]==2?"\u516C\u65A4":"\u5428"),1)):(p(),S("span",Cl,h(v.value[I][t]==null?"\u81EA\u52A8\u5E26\u51FA":v.value[I][t]),1))]))])}))]),1032,["columns","data-source","row-Selection","rowKey"])],512),[[Ne,E.value]]),l(we,{title:ge.value,visible:ie.value,"onUpdate:visible":e[20]||(e[20]=t=>ie.value=t),width:"800px",onOk:ha},{default:n(()=>[l(Ee,{gutter:24},{default:n(()=>[l(Ve,{span:8},{default:n(()=>[Ul,b("div",Tl,[ce.value&&ce.value.length>0?(p(),g(it,{key:0,"tree-data":ce.value,"field-names":{key:"id",title:"label",children:"children"},"expand-on-click-node":!1,ref:"deptTreeRef",defaultExpandAll:"",onSelect:Ba,onExpand:Ea,expandedKeys:Ye.value,showLine:""},{title:n(({title:t})=>[b("span",null,h(t),1)]),_:1},8,["tree-data","expandedKeys"])):(p(),S("div",Pl,Dl))])]),_:1}),l(Ve,{span:16},{default:n(()=>[l(Ie,{dataSource:R.value,columns:pa.value,pagination:!1,style:{"margin-left":"0px"},"row-Selection":u(_a),rowKey:(t,i)=>i,class:"productTable"},{bodyCell:n(({column:t,record:i})=>[t.dataIndex==="measurementUnit"?(p(),g(P,{key:0},{default:n(()=>[f(h(i.measurementUnit==1?"\u65A4":i.measurementUnit==2?"\u516C\u65A4":"\u5428"),1)]),_:2},1024)):_("",!0)]),_:1},8,["dataSource","columns","row-Selection","rowKey"])]),_:1})]),_:1})]),_:1},8,["title","visible"]),l(we,{title:ge.value,visible:de.value,"onUpdate:visible":e[43]||(e[43]=t=>de.value=t),width:"800px","append-to-body":""},{footer:n(()=>[b("div",Ol,[l(M,{type:"primary",onClick:Ra,htmlType:"button"},{default:n(()=>[f("\u786E \u5B9A")]),_:1}),l(M,{onClick:Oa},{default:n(()=>[f("\u53D6 \u6D88")]),_:1})])]),default:n(()=>[l(me,{ref_key:"dictRef",ref:W,model:u(c),rules:u(X),layout:"inline"},{default:n(()=>[l(s,{label:"\u9500\u552E\u5408\u540C\u53F7",name:"xshth"},{default:n(()=>[l(x,{value:u(c).xshth,"onUpdate:value":e[21]||(e[21]=t=>u(c).xshth=t),disabled:"",placeholder:"\u9500\u552E\u5408\u540C\u53F7",style:{width:"240px","margin-right":"20px"}},null,8,["value"])]),_:1}),l(s,{label:"\u5408\u4F5C\u5BA2\u6237",name:"hzkh"},{default:n(()=>[l(x,{value:u(c).hzkh,"onUpdate:value":e[22]||(e[22]=t=>u(c).hzkh=t),disabled:"",placeholder:"\u8BF7\u8F93\u5165\u5408\u4F5C\u5BA2\u6237",style:{width:"240px","margin-right":"20px"}},null,8,["value"])]),_:1}),l(s,{label:"\u53D1\u8D27\u4ED3\u5E93",name:"shck"},{default:n(()=>[l(x,{value:u(c).shck,"onUpdate:value":e[23]||(e[23]=t=>u(c).shck=t),disabled:"",placeholder:"\u53D1\u8D27\u4ED3\u5E93",style:{width:"240px","margin-right":"20px"}},null,8,["value"])]),_:1}),l(s,{label:"\u53D1\u8D27\u5E93\u533A",name:"receiveArea"},{default:n(()=>[l(L,{value:u(c).receiveArea,"onUpdate:value":e[24]||(e[24]=t=>u(c).receiveArea=t),options:A.value,onChange:et,style:{width:"240px","margin-right":"20px"},placeholder:"\u8BF7\u9009\u62E9"},null,8,["value","options"])]),_:1}),l(s,{label:"\u53D1\u8D27\u5E93\u4F4D",name:"receivePosition"},{default:n(()=>[l(L,{value:u(c).receivePosition,"onUpdate:value":e[25]||(e[25]=t=>u(c).receivePosition=t),options:C.value,onChange:e[26]||(e[26]=t=>Se(u(c))),style:{width:"240px","margin-right":"20px"},placeholder:"\u8BF7\u9009\u62E9"},null,8,["value","options"])]),_:1}),l(s,{label:"\u603B\u5E93\u5B58\u6570\u91CF",name:"storageQuality"},{default:n(()=>[l(x,{value:ue.value,"onUpdate:value":e[27]||(e[27]=t=>ue.value=t),disabled:"",style:{width:"240px","margin-right":"20px"}},null,8,["value"])]),_:1}),l(s,{label:"\u91C7\u8D2D\u6536\u8D27\u5355",name:"receiveOrderCode"},{default:n(()=>[l(L,{value:u(c).receiveOrderCode,"onUpdate:value":e[28]||(e[28]=t=>u(c).receiveOrderCode=t),options:$.value,onChange:e[29]||(e[29]=t=>Se(u(c))),style:{width:"240px","margin-right":"20px"},placeholder:"\u8BF7\u9009\u62E9"},null,8,["value","options"])]),_:1}),l(s,{label:"\u6536\u8D27\u5355\u5F85\u552E\u6570",name:"unSoldQuality"},{default:n(()=>[l(x,{value:oe.value,"onUpdate:value":e[30]||(e[30]=t=>oe.value=t),disabled:"",style:{width:"240px","margin-right":"20px"}},null,8,["value"])]),_:1}),l(s,{label:"\u51FA\u5E93\u6570\u91CF",name:"deliveryQuality"},{default:n(()=>[l(x,{value:u(c).deliveryQuality,"onUpdate:value":e[31]||(e[31]=t=>u(c).deliveryQuality=t),placeholder:"\u8BF7\u8F93\u5165\u51FA\u5E93\u6570\u91CF",onChange:e[32]||(e[32]=t=>ka(u(c))),style:{width:"240px","margin-right":"20px"}},null,8,["value"])]),_:1}),l(s,{label:"\u91C7\u8D2D\u5355\u4EF7(\u5143)",name:"purchaseUnitPrice"},{default:n(()=>[l(x,{value:se.value,"onUpdate:value":e[33]||(e[33]=t=>se.value=t),disabled:"",style:{width:"240px","margin-right":"20px"}},null,8,["value"])]),_:1}),l(s,{label:"\u8BA1\u91CF\u5355\u4F4D",name:"jldw"},{default:n(()=>[l(x,{value:u(c).jldw,"onUpdate:value":e[34]||(e[34]=t=>u(c).jldw=t),disabled:"",placeholder:"\u8BA1\u91CF\u5355\u4F4D",style:{width:"240px","margin-right":"20px"}},null,8,["value"])]),_:1}),l(s,{label:"\u6536\u83B7\u5E74\u5EA6",name:"receiveYear"},{default:n(()=>[l(x,{value:H.value,"onUpdate:value":e[35]||(e[35]=t=>H.value=t),disabled:"",style:{width:"240px"}},null,8,["value"])]),_:1}),l(s,{label:"\u4EA7\u5730",name:"placeName"},{default:n(()=>[l(x,{value:re.value,"onUpdate:value":e[36]||(e[36]=t=>re.value=t),disabled:"",style:{width:"240px","margin-right":"20px"}},null,8,["value"])]),_:1}),l(s,{label:"\u751F\u4EA7\u65E5\u671F",name:"productDate"},{default:n(()=>[l(x,{value:G.value,"onUpdate:value":e[37]||(e[37]=t=>G.value=t),disabled:"",valueFormat:"YYYY-MM-DD",style:{width:"240px","margin-right":"20px"}},null,8,["value"])]),_:1}),l(s,{label:"\u8D28\u91CF\u7B49\u7EA7",name:"qualityLevel"},{default:n(()=>[l(L,{value:u(c).qualityLevel,"onUpdate:value":e[38]||(e[38]=t=>u(c).qualityLevel=t),options:ma.value,style:{width:"240px","margin-right":"20px"},placeholder:"\u8BF7\u9009\u62E9"},null,8,["value","options"])]),_:1}),l(s,{label:"\u7CAE\u98DF\u6027\u8D28",name:"nature"},{default:n(()=>[l(L,{value:u(c).nature,"onUpdate:value":e[39]||(e[39]=t=>u(c).nature=t),options:ya.value,style:{width:"240px","margin-right":"20px"},placeholder:"\u8BF7\u9009\u62E9"},null,8,["value","options"])]),_:1}),l(s,{label:"\u6279\u6B21",name:"batchNo"},{default:n(()=>[l(x,{value:u(c).batchNo,"onUpdate:value":e[40]||(e[40]=t=>u(c).batchNo=t),placeholder:"\u8BF7\u8F93\u5165",style:{width:"240px","margin-right":"20px"}},null,8,["value"])]),_:1}),l(s,{label:"\u51FA\u8D27\u65E5\u671F",name:"deliveryDate"},{default:n(()=>[l(ze,{placeholder:"\u8BF7\u9009\u62E9\u65F6\u95F4",valueFormat:"YYYY-MM-DD",style:{width:"240px","margin-right":"20px"},value:u(c).deliveryDate,"onUpdate:value":e[41]||(e[41]=t=>u(c).deliveryDate=t)},null,8,["value"])]),_:1}),l(s,{label:"\u4F9B\u5E94\u5546",name:"supplierId"},{default:n(()=>[l(L,{value:u(c).supplierId,"onUpdate:value":e[42]||(e[42]=t=>u(c).supplierId=t),options:xe.value,style:{width:"240px"},placeholder:"\u8BF7\u9009\u62E9"},null,8,["value","options"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","visible"]),l(Kt,{ref_key:"creatSaleModalRef",ref:qe,saleData:Fe.value,onReload:T},null,8,["saleData"])],64)}}},Bl=ea(Rl,[["__scopeId","data-v-97ff8b5b"]]);export{Bl as default};
