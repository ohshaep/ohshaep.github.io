import{z as Pe,a as Se,A as z,r as c,V as $e,b as Re,o as i,c as m,d as t,w as n,e as r,t as N,F as P,W as j,g as s,i as f,f as I,h as S,D as De,E as Ue,P as we,Q as $,G as Le,M as F,m as R,_ as Te,a$ as Me,b0 as ze,y as Fe,l as Ve,n as qe,a3 as Be,B as Oe,s as Ae,a4 as Qe,b1 as Ee,K as Ke,a5 as Ge,L as Je,x as We,a6 as je,a9 as He,aa as Xe,ab as Ye,N as Ze,O as ea}from"./index.192c8708.js";import{c as aa,a as ta,b as H,d as na,e as la,g as oa}from"./productCate.59f8b5e2.js";const X=k=>(Ze("data-v-10dae5e2"),k=k(),ea(),k),sa=X(()=>I("span",{class:"separate"},"/",-1)),ua=X(()=>I("span",null,"\u5546\u54C1\u5206\u7C7B",-1)),ca={class:"app-container"},ia={class:"container-wrapper"},da={key:0},ra={key:1},_a={key:2},pa={class:"dialog-footer"},ga={__name:"index",setup(k){const{proxy:x}=Le(),{sys_normal_disable:V}=x.useDict("sys_normal_disable"),Y=Se(),Z=z([{label:"\u5546\u54C1\u5206\u7C7B",value:"/basic/productCate"},{label:"\u4F9B\u5E94\u5546\u5206\u7C7B",value:"/basic/supplierCate"},{label:"\u5408\u4F5C\u5BA2\u6237\u5206\u7C7B",value:"/basic/cooperatorCate"},{label:"\u5546\u54C1\u7BA1\u7406",value:"/basic/productMg"},{label:"\u4F9B\u5E94\u5546\u7BA1\u7406",value:"/basic/supplierMg"},{label:"\u5408\u4F5C\u5BA2\u6237\u7BA1\u7406",value:"/basic/cooperatorMg"},{label:"\u4ED3\u5E93\u7BA1\u7406",value:"/basic/storehouseMg"},{label:"\u4EA7\u5730\u7BA1\u7406",value:"/basic/productPlaceMg"}]),q=c([]),g=c(!1),B=c(!0),ee=c(!0),D=c([]);c(!0),c(!0),c(0);const U=c(""),ae=c([]),w=c("/basic/productCate"),L=c([]),te=[{title:"\u5206\u7C7B\u540D\u79F0",dataIndex:"ctgName",ellipsis:!0},{title:"\u6240\u5C5E\u4E0A\u7EA7\u5206\u7C7B",dataIndex:"ctgParentName",ellipsis:!0},{title:"\u72B6\u6001",dataIndex:"status"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime"},{title:"\u64CD\u4F5C",dataIndex:"operation",fixed:"right",align:"center"}],ne=z({form:{},queryParams:{offset:0,limit:10,ctgType:1,ctgParentId:void 0,ctgName:void 0,status:void 0},rules:{ctgName:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],ctgParentId:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),{queryParams:d,form:o,rules:le,categoryId:ma}=$e(ne);function O(){aa({ctgLevel:1,ctgType:1}).then(e=>{(e==null?void 0:e.data).forEach((u,b)=>{L.value[b]={value:u.id,label:u.ctgName}})})}function oe(e){o.value.ctgParentId=e}function se(){Y.push(w.value)}function v(){B.value=!0,O(),ta(x.addDateRange(d.value)).then(e=>{const a=e==null?void 0:e.data;q.value=a.data,y.total=(a==null?void 0:a.row)||0,B.value=!1})}function ue(e){console.log(e,"x");const a=e.id||D.value,u=e!=null&&e.ctgName?e.ctgName+"\u7684":"",b=e.status==1?0:1;F.confirm({title:"\u64CD\u4F5C\u786E\u8BA4",content:"\u662F\u5426\u786E\u8BA4\u4FEE\u6539"+u+"\u72B6\u6001\uFF1F",onOk(){H({status:b,id:a,ctgName:e.ctgName,ctgParentId:e.ctgParentId}).then(()=>{v(),R.success("\u4FEE\u6539\u6210\u529F")}).catch(()=>{})}})}function ce(){g.value=!1,C()}function C(){o.value={id:void 0,ctgName:void 0,ctgType:1,ctgParentId:void 0,status:"0",remark:void 0},x.resetForm("dictRef")}function T(){y.current=1,d.value.offset=1,v()}function A(){ae.value=[],x.resetForm("queryRef"),T()}const Q=(e,a,u)=>{y.current=e,u&&(y.pageSize=a,d.value.limit=a),d.value.offset=(e-1)*a,v()},y=z({current:1,pageSize:10,total:0,showTotal:e=>`\u5171 ${e} \u6761`,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["2","20","50","100"],onChange:(e,a)=>Q(e,a),onShowSizeChange:(e,a)=>Q(e,a,"sizeChange")});function ie(){C(),g.value=!0,U.value="\u6DFB\u52A0"}function de(e){C();const a=e.id||D.value;o.value.id=e.id,na(a).then(u=>{U.value="\u4FEE\u6539\u5546\u54C1",console.log(u.data,"response.data"),o.value.ctgName=u.data.ctgName,o.value.status=u.data.status.toString(),u.data.ctgLevel==2&&(o.value.categoryId=u.data.ctgParentId),g.value=!0})}const E=c();async function re(){try{await E.value.validateFields(),o.value.id!=null?H(o.value).then(e=>{R.success("\u4FEE\u6539\u6210\u529F"),g.value=!1,v()}):(o.value.ctgParentId?o.value.ctgLevel=2:(o.value.ctgLevel=1,o.value.ctgParentId=0),la(o.value).then(e=>{R.success("\u65B0\u589E\u6210\u529F"),g.value=!1,C(),v()}))}catch{}}function _e(e){const a=e.id||D.value,u=e.ctgName;F.confirm({title:"\u64CD\u4F5C\u786E\u8BA4",content:'\u662F\u5426\u786E\u8BA4\u5220\u9664\u540D\u4E3A"'+u+'"\u7684\u6570\u636E\u9879\uFF1F\uFF1F',onOk(){oa(a).then(()=>{A(),R.success("\u5220\u9664\u6210\u529F")}).catch(()=>{})}})}return O(),v(),(e,a)=>{const u=Te,b=Me,pe=ze,ge=Fe,me=Ve,p=qe,K=Be,h=Oe,G=Ae,ve=Qe,fe=Ee,J=Ke,ye=Ge,be=Je,he=We,Ie=je,ke=He,xe=Xe,Ce=Ye,Ne=F,M=Re("hasPermi");return i(),m(P,null,[t(u,{title:"\u5546\u54C1\u5206\u7C7B",icon:"icon-xuniziyuan",back:"/overview"},{nav:n(()=>[r(N("\u5546\u54C1\u5206\u7C7B")+" "),sa,ua]),_:1}),t(ge,null,{default:n(()=>[t(pe,{defaultValue:"",onChange:se,value:w.value,"onUpdate:value":a[0]||(a[0]=l=>w.value=l)},{default:n(()=>[(i(!0),m(P,null,j(s(Z),(l,_)=>(i(),f(b,{key:_,value:l.value},{default:n(()=>[r(N(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),I("div",ca,[I("div",ia,[S(t(G,{model:s(d),ref:"queryRef",layout:"inline","label-width":"68px"},{default:n(()=>[t(p,{name:"ctgName"},{default:n(()=>[t(me,{label:"\u540D\u79F0",value:s(d).ctgName,"onUpdate:value":a[1]||(a[1]=l=>s(d).ctgName=l),placeholder:"\u8BF7\u8F93\u5165",clearable:"",style:{width:"240px"},onKeyup:Ue(T,["enter"])},null,8,["value"])]),_:1}),t(p,{name:"ctgParentId"},{default:n(()=>[t(K,{label:"\u5206\u7C7B",value:s(d).ctgParentId,"onUpdate:value":a[2]||(a[2]=l=>s(d).ctgParentId=l),placeholder:"\u8BF7\u9009\u62E9",clearable:"",style:{width:"240px"},options:L.value},null,8,["value","options"])]),_:1}),t(p,{name:"status"},{default:n(()=>[t(K,{label:"\u72B6\u6001",value:s(d).status,"onUpdate:value":a[3]||(a[3]=l=>s(d).status=l),placeholder:"\u8BF7\u9009\u62E9",clearable:"",style:{width:"240px"},options:s(V)},null,8,["value","options"])]),_:1}),t(p,null,{default:n(()=>[t(h,{type:"primary",onClick:T},{default:n(()=>[r("\u67E5\u8BE2")]),_:1}),t(h,{type:"primary",ghost:"",onClick:A,style:{"margin-left":"15px"}},{default:n(()=>[r("\u91CD\u7F6E")]),_:1})]),_:1}),t(p,null,{default:n(()=>[S((i(),f(h,{type:"primary",onClick:ie},{icon:n(()=>[t(s(we))]),default:n(()=>[r("\u65B0\u589E")]),_:1})),[[M,["system:dict:add"]]])]),_:1})]),_:1},8,["model"]),[[De,ee.value]])]),t(he,{dataSource:q.value,columns:te,pagination:s(y),expandIconColumnIndex:-1},{bodyCell:n(({column:l,record:_})=>[l.dataIndex==="ctgParentName"?(i(),m(P,{key:0},[_.ctgParentName==""?(i(),m("span",da,"-")):(i(),f(ve,{key:1},{default:n(()=>[r(N(_.ctgParentName),1)]),_:2},1024))],64)):$("",!0),l.dataIndex==="status"?(i(),m("span",ra,[t(fe,{checked:_.status!="1",onClick:W=>ue(_)},null,8,["checked","onClick"])])):$("",!0),l.dataIndex==="operation"?(i(),m("span",_a,[t(be,{size:"small"},{default:n(()=>[S((i(),f(J,{onClick:W=>de(_)},{default:n(()=>[r("\u7F16\u8F91")]),_:2},1032,["onClick"])),[[M,["system:dict:edit"]]]),t(ye,{type:"vertical",style:{"background-color":"#05C059"}}),_.roleId!==1?S((i(),f(J,{key:0,onClick:W=>_e(_)},{default:n(()=>[r("\u5220\u9664")]),_:2},1032,["onClick"])),[[M,["system:dict:remove"]]]):$("",!0)]),_:2},1024)])):$("",!0)]),_:1},8,["dataSource","pagination"]),t(Ne,{title:U.value,visible:g.value,"onUpdate:visible":a[7]||(a[7]=l=>g.value=l),width:"500px","append-to-body":""},{footer:n(()=>[I("div",pa,[t(h,{type:"primary",onClick:re},{default:n(()=>[r("\u786E \u5B9A")]),_:1}),t(h,{onClick:ce},{default:n(()=>[r("\u53D6 \u6D88")]),_:1})])]),default:n(()=>[t(G,{ref_key:"dictRef",ref:E,model:s(o),rules:s(le),labelAlign:"left","label-col":{span:5}},{default:n(()=>[t(p,{label:"\u5546\u54C1\u5206\u7C7B",name:"ctgName"},{default:n(()=>[t(Ie,{value:s(o).ctgName,"onUpdate:value":a[4]||(a[4]=l=>s(o).ctgName=l),placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u5206\u7C7B"},null,8,["value"])]),_:1}),t(p,{label:"\u6240\u5C5E\u4E0A\u7EA7\u5206\u7C7B",name:"categoryId"},{default:n(()=>[t(ke,{value:s(o).categoryId,"onUpdate:value":a[5]||(a[5]=l=>s(o).categoryId=l),options:L.value,onChange:oe,placeholder:"\u8BF7\u9009\u62E9\u6240\u5C5E\u4E0A\u7EA7\u5206\u7C7B"},null,8,["value","options"])]),_:1}),t(p,{label:"\u72B6\u6001",name:"status"},{default:n(()=>[t(Ce,{value:s(o).status,"onUpdate:value":a[6]||(a[6]=l=>s(o).status=l)},{default:n(()=>[(i(!0),m(P,null,j(s(V),l=>(i(),f(xe,{key:l.value,value:l.value},{default:n(()=>[r(N(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","visible"])])],64)}}},ya=Pe(ga,[["__scopeId","data-v-10dae5e2"]]);export{ya as default};
