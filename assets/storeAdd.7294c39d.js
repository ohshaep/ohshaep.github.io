import{d as l,aK as T,z as J,a as W,u as G,r as p,at as K,A as X,aj as Z,ce as M,C as ee,o as z,c as S,f as v,g as F,e as N,w as n,Q as ae,m as R,a6 as le,n as te,a9 as oe,s as de,bW as se,aJ as ne,M as re,B as ue,L as ie,N as ve,O as ce}from"./index.192c8708.js";import{h as pe,b as fe,f as me,g as _e}from"./saleOut.0d32fcde.js";import{d as ge,u as ye}from"./common.e897a13c.js";var be={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM544 472c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v108H372c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h108v108c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h108c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V472z"}}]},name:"file-add",theme:"outlined"};const he=be;function Y(u){for(var i=1;i<arguments.length;i++){var c=arguments[i]!=null?Object(arguments[i]):{},f=Object.keys(c);typeof Object.getOwnPropertySymbols=="function"&&(f=f.concat(Object.getOwnPropertySymbols(c).filter(function(_){return Object.getOwnPropertyDescriptor(c,_).enumerable}))),f.forEach(function(_){Ie(u,_,c[_])})}return u}function Ie(u,i,c){return i in u?Object.defineProperty(u,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):u[i]=c,u}var P=function(i,c){var f=Y({},i,c.attrs);return l(T,Y({},f,{icon:he}),null)};P.displayName="FileAddOutlined";P.inheritAttrs=!1;const we=P;const b=u=>(ve("data-v-12b8d9dc"),u=u(),ce(),u),xe={class:"content"},Ae={class:"head-title"},Oe={class:"body-content"},Ne={class:"body-layout"},Pe={class:"formstyle"},ke=b(()=>v("h1",null,"\u8BA2\u5355\u4FE1\u606F",-1)),De=b(()=>v("h3",null,"\u5E93\u5B58\u4FE1\u606F",-1)),Ue=b(()=>v("h1",{style:{"margin-left":"20px"}},"\u8D27\u54C1\u4FE1\u606F",-1)),Ce=b(()=>v("h1",{style:{"margin-left":"20px"}},"\u51FA\u5E93\u8BB0\u5F55\u4FE1\u606F",-1)),Me=b(()=>v("h2",{style:{"margin-left":"20px"}},"\u51ED\u8BC1",-1)),ze={class:"clearfix"},Se={key:0},Fe=b(()=>v("div",{style:{"margin-top":"8px"}},"Upload",-1)),Re=["src"],Ye={style:{"text-align":"right",padding:"10px 0px"}},He={__name:"storeAdd",setup(u){const i=W(),c=G(),f=p([]),_=p([]);K(()=>q.value.length+1),X({});const h=p(),g=p([]);function H(o){return new Promise((a,s)=>{const d=new FileReader;d.readAsDataURL(o),d.onload=()=>a(d.result),d.onerror=r=>s(r)})}const w=p(!1),k=p(""),x=p(""),L=()=>{w.value=!1,x.value=""},V=async o=>{!o.url&&!o.preview&&(o.preview=await H(o.originFileObj)),k.value=o.url||o.preview,w.value=!0,x.value=o.name||o.url.substring(o.url.lastIndexOf("/")+1)},A={span:10},e=p({}),q=p([{name:"Edward King ",age:32,address:"London, Park Lane no.",gddress:"xx",ages:"fbi",addrecss:"ggga",addrress:"pop",aggge:"sss",addnnress:"address",adsedress:"ppppp",agwqe:"ness"}]),D=(o,a)=>(console.log(o,"ddddd",a),!a.label||!a.value?!1:a.label.toLowerCase().indexOf(o.toLowerCase())>=0);p([{title:"\u5E8F\u53F7",dataIndex:"name",key:"name",width:80},{title:"\u5546\u54C1\u7F16\u7801",dataIndex:"age",key:"age",width:100},{title:"\u5546\u54C1\u540D\u79F0",dataIndex:"address",key:"address",width:100},{title:"\u89C4\u683C\u578B\u53F7",dataIndex:"gddress",key:"address",width:100},{title:"\u5546\u54C1\u7F16\u7801",dataIndex:"ages",key:"age",width:100},{title:"\u8BA2\u8D27\u6570\u91CF",dataIndex:"addrecss",key:"address",width:100},{title:"\u8BA1\u91CF\u5355\u4F4D",dataIndex:"addrress",key:"address",width:100},{title:"\u57FA\u672C\u8BA1\u91CF\u5355\u4F4D\u6570\u91CF",dataIndex:"aggge",key:"age",width:150},{title:"\u57FA\u672C\u8BA1\u91CF\u5355\u4F4D",dataIndex:"addnnress",key:"address",width:150},{title:"\u542B\u7A0E\u5355\u4EF7",dataIndex:"agwqe",key:"age",width:100},{title:"\u4EF7\u7A0E\u5408\u8BA1",dataIndex:"adsedress",key:"address",width:100}]);const O={deliveryDate:[{required:!0,message:"\u8BF7\u8F93\u5165\u65F6\u95F4",trigger:"change"}],deliveryQuality:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u91CF",trigger:"change"}]},Q=()=>{h.value.validate().then(()=>{var s,d,r,m,I;console.log(e.value,"tttt");const o=M(e.value.deliveryDate).format("YYYY-MM-DD HH:mm:ss");let a=g.value.map(y=>({path:y.response,fileName:y.name}));a.length==0&&(a=null),console.log(a,"files"),me({deliveryOrderCode:e.value.deliveryOrderCode,deliveryQuality:e.value.xcount,productDate:o,deliveryMode:((s=e.value)==null?void 0:s.deliveryMode)||"",licenseRegister:((d=e.value)==null?void 0:d.licenseRegister)||"",files:a,storeAreaId:((r=e.value)==null?void 0:r.storeAreaId)||"",storehouseId:((m=e.value)==null?void 0:m.storehouseId)||"",storePositionId:((I=e.value)==null?void 0:I.storePositionId)||""}).then(y=>{R.success(y.message),i.back()})}).catch(o=>{console.log("error",o)})};function U(o=!0){e.value.receiveArea!=""&&e.value.receiveArea!=null&&_e({areaId:e.value.receiveArea}).then(a=>{a.data.areaId,_.value=a.data.map(s=>(e.value.storePositionName==s.storePositionName&&(e.value.storePositionId=s.id),{value:s.id,label:s.storePositionName}))}),o&&(e.value.storePositionName="")}const j=o=>{console.log(o),ye({file:o.file}).then(a=>{R.success("\u4E0A\u4F20\u6210\u529F"),console.log("\u4E0A\u4F20\u6210\u529F",a.data),g.value[g.value.length-1].fileInfo=a.data,console.log(g.value,"test"),o.onSuccess(a.data,o)}).catch(a=>{o.onError(a)})};return Z(()=>{const o=c.query.id;pe(o).then(a=>{var s;e.value={...a.data,...(s=a.data)==null?void 0:s.saleOrderInfo,storeAreaId:"",storePositionId:"",xcount:a.data.deliveryQuality-a.data.deliveriedQuality},console.log(e.value,"formstate"),delete e.value.saleOrderInfo,e.value.deliveryDate.length<13&&(e.value.deliveryDate=e.value.deliveryDate+" 00:00:00"),e.value.deliveryDate=M(e.value.deliveryDate,"YYYY-MM-DD HH:mm:ss"),fe({houseId:e.value.storehouseId}).then(d=>{d.data.houseId,f.value=d.data.map(r=>(e.value.storeAreaName==r.storeAreaName&&(e.value.storeAreaId=r.id),{value:r.id,label:r.storeAreaName})),console.log(f.value,"Areadata"),U(!1),!(!e.value.files&&e.value.files==[])&&e.value.files.forEach(r=>{ge(r).then(m=>{console.log(m,"ires")})})})})}),(o,a)=>{const s=le,d=te,r=oe,m=de,I=se,y=ee("plus-outlined"),B=ne,E=re,C=ue,$=ie;return z(),S("div",xe,[v("div",Ae,[l(F(we),{style:{"font-size":"60px",color:"#05c059","padding-right":"10px"}}),N("\u65B0\u589E\u51FA\u5E93\u64CD\u4F5C\u4FE1\u606F")]),v("div",Oe,[v("div",Ne,[v("div",Pe,[l(m,{ref_key:"formRef",ref:h,model:e.value,rules:O,"label-col":A,layout:"horizontal",class:"ant-advanced-search-form"},{default:n(()=>[ke,l(d,{ref:"name",label:"\u8BB8\u53EF\u5355\u53F7"},{default:n(()=>[l(s,{value:e.value.deliveryOrderCode,"onUpdate:value":a[0]||(a[0]=t=>e.value.deliveryOrderCode=t),disabled:""},null,8,["value"])]),_:1},512),l(d,{label:"\u9500\u552E\u5408\u540C"},{default:n(()=>[l(s,{value:e.value.contractNo,"onUpdate:value":a[1]||(a[1]=t=>e.value.contractNo=t),disabled:""},null,8,["value"])]),_:1}),l(d,{ref:"name",label:"\u5BA2\u6237\u540D\u79F0"},{default:n(()=>[l(s,{value:e.value.cooperatorName,"onUpdate:value":a[2]||(a[2]=t=>e.value.cooperatorName=t),disabled:""},null,8,["value"])]),_:1},512),l(d,{ref:"name",label:"\u91C7\u8D2D\u5408\u540C\u53F7"},{default:n(()=>[l(s,{value:e.value.receiveOrderCode,"onUpdate:value":a[3]||(a[3]=t=>e.value.receiveOrderCode=t),disabled:""},null,8,["value"])]),_:1},512),l(d,{ref:"name",label:"\u4F9B\u5E94\u5546\u540D\u79F0"},{default:n(()=>[l(s,{value:e.value.supplierName,"onUpdate:value":a[4]||(a[4]=t=>e.value.supplierName=t),disabled:""},null,8,["value"])]),_:1},512),l(d,{ref:"name",label:"\u8BB8\u53EF\u51FA\u5E93\u6570\u91CF"},{default:n(()=>[l(s,{value:e.value.deliveryQuality,"onUpdate:value":a[5]||(a[5]=t=>e.value.deliveryQuality=t),disabled:""},null,8,["value"])]),_:1},512),De,l(d,{ref:"name",label:"\u6307\u5B9A\u4ED3\u5E93",name:"storehouseName"},{default:n(()=>[l(s,{value:e.value.storehouseName,"onUpdate:value":a[6]||(a[6]=t=>e.value.storehouseName=t),disabled:""},null,8,["value"])]),_:1},512),l(d,{ref:"name",label:"\u5E93\u533A",name:"storeAreaId"},{default:n(()=>[l(r,{value:e.value.storeAreaId,"onUpdate:value":a[7]||(a[7]=t=>e.value.storeAreaId=t),placeholder:"\u9009\u62E9\u5E93\u533A","show-search":"","filter-option":D,options:f.value,onChange:U},null,8,["value","options"])]),_:1},512),l(d,{ref:"name",label:"\u5E93\u4F4D",name:"storePositionId"},{default:n(()=>[l(r,{value:e.value.storePositionId,"onUpdate:value":a[8]||(a[8]=t=>e.value.storePositionId=t),placeholder:"\u9009\u62E9\u5E93\u4F4D","show-search":"","filter-option":D,options:_.value},null,8,["value","options"])]),_:1},512)]),_:1},8,["model"]),l(m,{ref_key:"formRef",ref:h,model:e.value,rules:O,"label-col":A,layout:"horizontal",class:"ant-advanced-search-form"},{default:n(()=>[Ue,l(d,{ref:"name",label:"\u5546\u54C1\u7F16\u7801"},{default:n(()=>[l(s,{value:e.value.productCode,"onUpdate:value":a[9]||(a[9]=t=>e.value.productCode=t),disabled:""},null,8,["value"])]),_:1},512),l(d,{ref:"name",label:"\u5546\u54C1\u540D\u79F0"},{default:n(()=>[l(s,{value:e.value.productName,"onUpdate:value":a[10]||(a[10]=t=>e.value.productName=t),disabled:""},null,8,["value"])]),_:1},512),l(d,{ref:"name",label:"\u89C4\u683C\u578B\u53F7"},{default:n(()=>[l(s,{value:e.value.productSpec,"onUpdate:value":a[11]||(a[11]=t=>e.value.productSpec=t),disabled:""},null,8,["value"])]),_:1},512),l(d,{ref:"name",label:"\u4EA7\u5730"},{default:n(()=>[l(s,{value:e.value.placeName,"onUpdate:value":a[12]||(a[12]=t=>e.value.placeName=t),disabled:""},null,8,["value"])]),_:1},512),l(d,{ref:"name",label:"\u751F\u4EA7\u65E5\u671F"},{default:n(()=>[l(s,{value:e.value.productDate,"onUpdate:value":a[13]||(a[13]=t=>e.value.productDate=t),disabled:""},null,8,["value"])]),_:1},512)]),_:1},8,["model"]),l(m,{ref_key:"formRef",ref:h,model:e.value,rules:O,"label-col":A,layout:"horizontal",class:"ant-advanced-search-form"},{default:n(()=>[Ce,l(d,{ref:"name",label:"\u51FA\u5E93\u6570\u91CF",name:"deliveryQuality"},{default:n(()=>[l(s,{value:e.value.xcount,"onUpdate:value":a[14]||(a[14]=t=>e.value.xcount=t)},null,8,["value"])]),_:1},512),l(d,{ref:"name",label:"\u5305\u6570"},{default:n(()=>[l(s,{value:e.value.xcount/parseInt(e.value.productSpec)*1e3,disabled:""},null,8,["value"])]),_:1},512),l(d,{label:"\u51FA\u5E93\u65B9\u5F0F"},{default:n(()=>[l(s,{value:e.value.deliveryMode,"onUpdate:value":a[15]||(a[15]=t=>e.value.deliveryMode=t)},null,8,["value"])]),_:1}),l(d,{label:"\u724C\u7167\u767B\u8BB0"},{default:n(()=>[l(s,{value:e.value.licenseRegister,"onUpdate:value":a[16]||(a[16]=t=>e.value.licenseRegister=t)},null,8,["value"])]),_:1}),l(d,{label:"\u51FA\u5E93\u65E5\u671F",name:"deliveryDate",require:""},{default:n(()=>[l(I,{value:e.value.deliveryDate,"onUpdate:value":a[17]||(a[17]=t=>e.value.deliveryDate=t),"show-time":"",format:"YYYY-MM-DD HH:mm:ss",type:"date",placeholder:"Pick a date",style:{width:"100%"}},null,8,["value"])]),_:1}),Me,l(d,null,{default:n(()=>[v("div",ze,[l(B,{"file-list":g.value,"onUpdate:fileList":a[18]||(a[18]=t=>g.value=t),customRequest:j,"list-type":"picture-card",onPreview:V},{default:n(()=>[g.value.length<5?(z(),S("div",Se,[l(y),Fe])):ae("",!0)]),_:1},8,["file-list"]),l(E,{open:w.value,title:x.value,footer:null,onCancel:L},{default:n(()=>[v("img",{alt:"example",style:{width:"100%"},src:k.value},null,8,Re)]),_:1},8,["open","title"])])]),_:1})]),_:1},8,["model"])]),v("div",Ye,[l($,null,{default:n(()=>[l(C,{type:"primary",size:o.size,onClick:a[19]||(a[19]=t=>F(i).back())},{default:n(()=>[N("\u8FD4\u56DE")]),_:1},8,["size"]),l(C,{type:"primary",size:o.size,onClick:Q},{default:n(()=>[N("\u4FDD\u5B58")]),_:1},8,["size"])]),_:1})])])])])}}},Qe=J(He,[["__scopeId","data-v-12b8d9dc"]]);export{Qe as default};
