import{r as _,o as r,i as u,w as a,d as o,e as i,a_ as S,m as B,aa as O,ab as R,n as T,B as U,s as V,M as j}from"./index.192c8708.js";import{N as I,h as q}from"./storageMg.e8e488da.js";import{d as z}from"./common.e897a13c.js";import{u as A}from"./common.0ebad352.js";const K={__name:"review-modal",props:{reviewData:{type:Object,default:()=>{}}},emits:["refresh"],setup(v,{expose:w,emit:y}){const D=y,d=v,b=A(),l=_(!1),F=async()=>{S(h),l.value=!0},m=()=>{l.value=!1,N()},N=()=>{e.value={id:null,approveStatus:2,fileDeteil:{path:null,fileName:null}}},e=_({id:null,approveStatus:2,fileDeteil:{path:null,fileName:null}}),h=async()=>{e.value.id=d.reviewData.id;const t=await I(d.reviewData.id);t.code===200&&(e.value.fileDeteil.path=t.data.fileInfo,e.value.fileDeteil.fileName=t.data.fileNames)},x=async()=>{const t=await z(e.value.fileDeteil);b(t,e.value.fileDeteil.fileName)},g=async()=>{(await q(e.value)).code===200&&(B.success("\u5BA1\u6838\u6210\u529F"),m(),D("refresh"))};return w({showModal:F}),(t,s)=>{const p=O,k=R,c=T,f=U,C=V,M=j;return r(),u(M,{visible:l.value,"onUpdate:visible":s[1]||(s[1]=n=>l.value=n),title:"\u64CD\u4F5C\u786E\u8BA4",onOk:g,onCancel:m,"append-to-body":"",destroyOnClose:""},{default:a(()=>[o(C,{ref:"reviewFormComp",model:e.value},{default:a(()=>[o(c,{style:{width:"308px"},name:"approveStatus",label:"\u5BA1\u6838\u72B6\u6001"},{default:a(()=>[o(k,{value:e.value.approveStatus,"onUpdate:value":s[0]||(s[0]=n=>e.value.approveStatus=n),style:{"margin-right":"8px"}},{default:a(()=>[o(p,{value:3},{default:a(()=>[i("\u5BA1\u6838\u901A\u8FC7")]),_:1}),o(p,{value:2},{default:a(()=>[i("\u5BA1\u6838\u4E0D\u901A\u8FC7")]),_:1})]),_:1},8,["value"])]),_:1}),o(c,{style:{"margin-right":"30px"},name:""},{default:a(()=>[e.value.fileDeteil.path?(r(),u(f,{key:0,onClick:x},{default:a(()=>[i("\u70B9\u51FB\u4E0B\u8F7D\u9644\u4EF6\u67E5\u770B")]),_:1})):(r(),u(f,{key:1},{default:a(()=>[i("\u65E0\u9644\u4EF6")]),_:1}))]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])}}};export{K as default};
