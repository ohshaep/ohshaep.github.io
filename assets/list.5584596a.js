import{aI as se,z as Qe,a as Pe,A as O,r as f,V as Be,o as i,c as p,d as u,w as t,e as r,t as n,F as Q,W as ee,i as c,f as N,g as x,R as te,Q as o,bU as $e,G as Fe,M as ae,m as $,_ as Me,a$ as Ve,b0 as De,y as qe,b3 as ze,n as Le,a8 as Ye,a9 as Ae,a6 as Ee,B as je,s as Ge,q as Je,a4 as We,aB as He,L as Ke,x as Xe,S as Ze,aa as et,ab as tt,ac as at,N as it,O as lt}from"./index.192c8708.js";const ie=[{title:"\u91C7\u8D2D\u6536\u8D27\u5355\u7F16\u53F7",dataIndex:"receiveOrderCode",ellipsis:!0,width:180},{title:"\u91C7\u8D2D\u8BA2\u5355\u7F16\u53F7",dataIndex:"purchaseOrderCode",ellipsis:!0,width:180},{title:"\u91C7\u8D2D\u6536\u8D27\u5408\u540C\u53F7",dataIndex:["purchaseInfo","contractNo"],ellipsis:!0,width:180},{title:"\u6536\u8D27\u65E5\u671F",dataIndex:"createTime",ellipsis:!0,width:160},{title:"\u5546\u54C1\u7F16\u7801",dataIndex:"productCode",ellipsis:!0,width:150},{title:"\u5546\u54C1\u540D\u79F0",dataIndex:"productName",ellipsis:!0,width:180},{title:"\u89C4\u683C\u578B\u53F7",dataIndex:"productSpec",width:120},{title:"\u8BA2\u8D27\u6570\u91CF",dataIndex:"orderQuality",ellipsis:!0,width:150},{title:"\u6536\u8D27\u6570\u91CF",dataIndex:"receiveQuality",ellipsis:!0,width:150},{title:"\u8BA1\u91CF\u5355\u4F4D",dataIndex:"measureUnit",ellipsis:!0,width:150},{title:"\u57FA\u672C\u8BA1\u91CF\u5355\u4F4D\u6570\u91CF",dataIndex:"baseQuality",ellipsis:!0,width:220},{title:"\u57FA\u672C\u8BA1\u91CF\u5355\u4F4D",dataIndex:"baseMeasureUnit",ellipsis:!0,width:200},{title:"\u542B\u7A0E\u5355\u4EF7(\u5143)",dataIndex:"unitPrice",ellipsis:!0,width:150},{title:"\u4EF7\u7A0E\u5408\u8BA1(\u5143)",dataIndex:"totalPrice",ellipsis:!0,width:150},{title:"\u5E01\u522B",dataIndex:"currency",ellipsis:!0,width:150},{title:"\u5408\u4F5C\u5BA2\u6237",dataIndex:"cooperatorName",ellipsis:!0,width:150},{title:"\u4EA4\u8D27\u65E5\u671F",dataIndex:"deliveryDate",ellipsis:!0,width:160},{title:"\u5907\u6CE8",dataIndex:"orderRemark",ellipsis:!0,width:150},{title:"\u5236\u5355\u65F6\u95F4",dataIndex:"orderTime",ellipsis:!0,width:160},{title:"\u5236\u5355\u4EBA",dataIndex:"orderUser",ellipsis:!0,width:150},{title:"\u6536\u8D27\u4ED3\u5E93",dataIndex:"receiveStorehouseName",ellipsis:!0,width:150},{title:"\u6536\u8D27\u5E93\u533A",dataIndex:"storeAreaName",ellipsis:!0,width:150},{title:"\u6536\u8D27\u5E93\u4F4D",dataIndex:"storePositionName",ellipsis:!0,width:150},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",ellipsis:!0,width:160},{title:"\u521B\u5EFA\u4EBA",dataIndex:"createBy",ellipsis:!0,width:150},{title:"\u5BA1\u6838\u65F6\u95F4",dataIndex:"approveTime",ellipsis:!0,width:160},{title:"\u5BA1\u6838\u4EBA",dataIndex:"approveUser",ellipsis:!0,width:150},{title:"\u64CD\u4F5C",dataIndex:"edit",fixed:"right",align:"center",width:150}],st=[{title:"\u91C7\u8D2D\u6536\u8D27\u5355\u7F16\u53F7",dataIndex:"receiveOrderCode",ellipsis:!0,width:180},{title:"\u91C7\u8D2D\u8BA2\u5355\u7F16\u53F7",dataIndex:"purchaseOrderCode",ellipsis:!0,width:180},{title:"\u6536\u8D27\u65E5\u671F",dataIndex:"createTime",ellipsis:!0,width:160},{title:"\u5546\u54C1\u7F16\u7801",dataIndex:"productCode",ellipsis:!0,width:150},{title:"\u5546\u54C1\u540D\u79F0",dataIndex:"productName",ellipsis:!0,width:180},{title:"\u89C4\u683C\u578B\u53F7",dataIndex:"productSpec",width:120},{title:"\u8BA2\u8D27\u6570\u91CF",dataIndex:"orderQuality",ellipsis:!0,width:150},{title:"\u8BA1\u91CF\u5355\u4F4D",dataIndex:"measureUnit",ellipsis:!0,width:150},{title:"\u57FA\u672C\u8BA1\u91CF\u5355\u4F4D\u6570\u91CF",dataIndex:"baseQuality",ellipsis:!0,width:220},{title:"\u57FA\u672C\u8BA1\u91CF\u5355\u4F4D",dataIndex:"baseMeasureUnit",ellipsis:!0,width:200},{title:"\u542B\u7A0E\u5355\u4EF7(\u5143)",dataIndex:"unitPrice",ellipsis:!0,width:150},{title:"\u4EF7\u7A0E\u5408\u8BA1(\u5143)",dataIndex:"totalPrice",ellipsis:!0,width:150},{title:"\u5E01\u522B",dataIndex:"currency",ellipsis:!0,width:150},{title:"\u5408\u4F5C\u5BA2\u6237",dataIndex:"cooperatorName",ellipsis:!0,width:150},{title:"\u4EA4\u8D27\u65E5\u671F",dataIndex:"deliveryDate",ellipsis:!0,width:160},{title:"\u5907\u6CE8",dataIndex:"orderRemark",ellipsis:!0,width:150},{title:"\u5236\u5355\u65F6\u95F4",dataIndex:"orderTime",ellipsis:!0,width:160},{title:"\u5236\u5355\u4EBA",dataIndex:"orderUser",ellipsis:!0,width:150},{title:"\u6536\u8D27\u6570\u91CF",dataIndex:"receiveQuality",ellipsis:!0,width:150},{title:"\u6536\u8D27\u4ED3\u5E93",dataIndex:"receiveStorehouseName",ellipsis:!0,width:150},{title:"\u6536\u8D27\u5E93\u533A",dataIndex:"storeAreaName",ellipsis:!0,width:150},{title:"\u6536\u8D27\u5E93\u4F4D",dataIndex:"storePositionName",ellipsis:!0,width:150},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",ellipsis:!0,width:160},{title:"\u521B\u5EFA\u4EBA",dataIndex:"createBy",ellipsis:!0,width:150},{title:"\u5BA1\u6838\u65F6\u95F4",dataIndex:"approveTime",ellipsis:!0,width:160},{title:"\u5BA1\u6838\u4EBA",dataIndex:"approveUser",ellipsis:!0,width:150},{title:"\u4E0D\u901A\u8FC7\u539F\u56E0",dataIndex:"approveReason",ellipsis:!0,width:150},{title:"\u64CD\u4F5C",dataIndex:"edit",fixed:"right",align:"center",width:150}];function nt(I){return se({url:"/purchaseReceive/list",method:"post",params:I})}function le(I){return se({url:"/purchaseReceive/approve",method:"post",data:I})}const ne=I=>(it("data-v-3189d055"),I=I(),lt(),I),dt=ne(()=>N("span",{class:"separate"},"/",-1)),ut=ne(()=>N("span",null,"\u5BA1\u6279\u5217\u8868",-1)),ot={class:"app-container"},rt={class:"container-wrapper"},pt={key:8},ct={key:9},_t={key:10},vt={key:11},ht={key:12},ft={key:13},It={key:14},mt={key:15},xt={key:16},yt={key:17},wt={key:22},gt=["onClick"],kt=["onClick"],bt={__name:"list",setup(I){Pe();const{proxy:de}=Fe();de.useDict("sys_point_type");const ue=O([{label:"\u5F85\u5BA1\u6279",value:"1"},{label:"\u5BA1\u6279\u901A\u8FC7",value:"3"},{label:"\u5BA1\u6279\u4E0D\u901A\u8FC7",value:"2"}]),F=f([{value:"receiveOrderCode",label:"\u91C7\u8D2D\u6536\u8D27\u5355\u7F16\u53F7"},{value:"purchaseOrderCode",label:"\u91C7\u8D2D\u8BA2\u5355\u7F16\u53F7"},{value:"supplierName",label:"\u4F9B\u5E94\u5546\u540D\u79F0"},{value:"productCode",label:"\u5546\u54C1\u7F16\u53F7"},{value:"productName",label:"\u5546\u54C1\u540D\u79F0"},{value:"contractNo",label:"\u91C7\u8D2D\u5408\u540C\u53F7"},{value:"orderUser",label:"\u5236\u5355\u4EBA"}]),P=f(!0),m=f([]),M=f([]),oe=f(""),B=f(""),re=async()=>{m.value=[],_.value={offset:0,limit:10,orderStatus:"",beginTime:"",endTime:""},g.value="receiveOrderCode",k.value="",R()},R=()=>{y.current=1,_.value.offset=0,_.value.timeType=1,w.value===2&&(ie[27].width=120),b()};function pe(l){F.value.forEach((s,U)=>{s.value!=l&&(_.value[s.value]="")})}const V=(l,s,U)=>{y.current=l,U&&(y.pageSize=s,_.value.limit=s),_.value.offset=(l-1)*s,b()},y=O({current:1,pageSize:10,total:0,showTotal:l=>`\u5171 ${l} \u6761`,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["2","20","50","100"],onChange:(l,s)=>V(l,s),onShowSizeChange:(l,s)=>V(l,s,"sizeChange")}),w=f("1"),ce=O({queryParams:{offset:0,limit:10,orderStatus:"",beginTime:"",endTime:""},searchType:"receiveOrderCode",searchValue:""}),{queryParams:_,searchType:g,searchValue:k}=Be(ce),b=async()=>{P.value=!0,m.value&&m.value.length>0?(_.value.beginTime=m.value[0],_.value.endTime=m.value[1]):(_.value.beginTime="",_.value.endTime=""),_.value[g.value]=k.value,nt({..._.value,orderStatus:w.value}).then(l=>{const s=(l==null?void 0:l.data.data)||[];M.value=s,y.total=(l==null?void 0:l.data.row)||0,P.value=!1})},_e=l=>{B.value=l.id,v.verifyStatus="3",oe.value="\u5BA1\u6838",T.value=!0};function ve(l){const s=l.id;ae.confirm({title:"\u64CD\u4F5C\u786E\u8BA4",content:"\u662F\u5426\u786E\u5B9A\u64A4\u9500\uFF1F",onOk(){le({id:s,orderStatus:4}).then(()=>{b(),$.success("\u64A4\u9500\u6210\u529F")}).catch(()=>{})}})}const T=f(!1),v=O({verifyStatus:3,failureReson:""}),D=f();function q(){Object.assign(v,{verifyStatus:null,failureReson:""})}const he=async()=>{try{if(await D.value.validateFields(),v.verifyStatus=="2"&&v.failureReson==""){$.error("\u8BF7\u586B\u5199\u4E0D\u901A\u8FC7\u539F\u56E0");return}B.value&&le({approveReason:v.failureReson,orderStatus:v.verifyStatus,id:B.value}).then(l=>{console.log(l),(l==null?void 0:l.code)===200&&($.success("\u64CD\u4F5C\u6210\u529F"),q(),b())}),T.value=!1}catch(l){console.log(l)}},fe={verifyStatus:[{required:!0,message:"\u5FC5\u9009",trigger:["change"]}]};return b(),(l,s)=>{const U=Me,Ie=Ve,me=De,xe=qe,ye=ze,S=Le,we=Ye,ge=Ae,ke=Ee,z=je,L=Ge,be=Je,h=We,Se=He,Ce=Ke,Ne=Xe,Re=Ze,Y=et,Te=tt,Ue=at,Oe=ae;return i(),p(Q,null,[u(U,{title:"\u5BA1\u6279\u91C7\u8D2D\u6536\u8D27\u5355",icon:"icon-rongqi"},{nav:t(()=>[r(n("\u91C7\u96C6\u7BA1\u7406")+" "),dt,ut]),_:1}),u(xe,null,{default:t(()=>[u(me,{defaultValue:"",value:w.value,"onUpdate:value":s[0]||(s[0]=e=>w.value=e),onChange:R},{default:t(()=>[(i(!0),p(Q,null,ee(ue,(e,a)=>(i(),c(Ie,{key:a,value:e.value},{default:t(()=>[r(n(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),N("div",ot,[u(be,{justify:"space-between",style:{flex:"1"}},{default:t(()=>[N("div",rt,[u(L,{layout:"inline",ref:"queryRef",model:x(_)},{default:t(()=>[u(S,{style:{width:"308px"},name:"dateRange",label:"\u63D0\u4EA4\u65F6\u95F4"},{default:t(()=>[u(ye,{value:m.value,"onUpdate:value":s[1]||(s[1]=e=>m.value=e),"value-format":"YYYY-MM-DD",onChange:R},null,8,["value"])]),_:1}),u(S,{label:""},{default:t(()=>[u(ke,{placeholder:"\u8BF7\u8F93\u5165",value:x(k),"onUpdate:value":s[3]||(s[3]=e=>te(k)?k.value=e:null)},{addonBefore:t(()=>[u(ge,{style:{width:"120px"},value:x(g),"onUpdate:value":s[2]||(s[2]=e=>te(g)?g.value=e:null),onChange:pe},{default:t(()=>[(i(!0),p(Q,null,ee(F.value,(e,a)=>(i(),c(we,{key:a,value:e.value},{default:t(()=>[r(n(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},8,["value"])]),_:1}),u(S,null,{default:t(()=>[u(z,{type:"primary",onClick:R},{default:t(()=>[r("\u67E5\u8BE2")]),_:1}),u(z,{type:"primary",ghost:"",onClick:re,style:{"margin-left":"15px"}},{default:t(()=>[r("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1}),u(Re,{spinning:P.value},{default:t(()=>[u(Ne,{dataSource:M.value,columns:w.value=="2"?x(st):x(ie),pagination:y,scroll:{x:0,y:500}},{bodyCell:t(({column:e,record:a})=>{var A,E,j,G,J,W,H,K,X,Z;return[e.dataIndex==="orderType"?(i(),c(h,{key:0},{default:t(()=>[r(n(a.orderType=="1"?"\u5B9A\u5411\u8D2D\u9500":"\u81EA\u4E3B\u7ECF\u8425"),1)]),_:2},1024)):o("",!0),e.dataIndex==="natureConvert"?(i(),c(h,{key:1},{default:t(()=>[r(n(a.natureConvert=="1"?"\u5408\u4F5C\u8F6C\u6362":"\u81EA\u4E3B\u8F6C\u6362"),1)]),_:2},1024)):o("",!0),e.dataIndex==="currency"?(i(),c(h,{key:2},{default:t(()=>{var d;return[r(n(((d=a.purchaseInfo)==null?void 0:d.currency)=="1"?"\u4EBA\u6C11\u5E01":"\u7F8E\u5143"),1)]}),_:2},1024)):o("",!0),e.dataIndex==="supplierName"?(i(),c(h,{key:3},{default:t(()=>{var d;return[r(n((d=a.purchaseInfo)==null?void 0:d.supplierName),1)]}),_:2},1024)):o("",!0),e.dataIndex==="contractNo"?(i(),c(h,{key:4},{default:t(()=>{var d;return[r(n((d=a.purchaseInfo)==null?void 0:d.contractNo),1)]}),_:2},1024)):o("",!0),e.dataIndex==="productCode"?(i(),c(h,{key:5},{default:t(()=>{var d;return[r(n((d=a.purchaseInfo)==null?void 0:d.productCode),1)]}),_:2},1024)):o("",!0),e.dataIndex==="productName"?(i(),c(h,{key:6},{default:t(()=>{var d;return[r(n((d=a.purchaseInfo)==null?void 0:d.productName),1)]}),_:2},1024)):o("",!0),e.dataIndex==="productSpec"?(i(),c(h,{key:7},{default:t(()=>{var d;return[r(n((d=a.purchaseInfo)==null?void 0:d.productSpec),1)]}),_:2},1024)):o("",!0),e.dataIndex==="baseQuality"?(i(),p("span",pt,n((A=a.purchaseInfo)==null?void 0:A.baseQuality),1)):o("",!0),e.dataIndex==="orderQuality"?(i(),p("span",ct,n((E=a.purchaseInfo)==null?void 0:E.orderQuality),1)):o("",!0),e.dataIndex==="unitPrice"?(i(),p("span",_t,n((j=a.purchaseInfo)==null?void 0:j.unitPrice),1)):o("",!0),e.dataIndex==="cooperatorName"?(i(),p("span",vt,n((G=a.purchaseInfo)==null?void 0:G.cooperatorName),1)):o("",!0),e.dataIndex==="totalPrice"?(i(),p("span",ht,n((J=a.purchaseInfo)==null?void 0:J.totalPrice),1)):o("",!0),e.dataIndex==="receiveStorehouseName"?(i(),p("span",ft,n((W=a.purchaseInfo)==null?void 0:W.receiveStorehouseName),1)):o("",!0),e.dataIndex==="deliveryDate"?(i(),p("span",It,n((H=a.purchaseInfo)==null?void 0:H.deliveryDate),1)):o("",!0),e.dataIndex==="orderUser"?(i(),p("span",mt,n((K=a.purchaseInfo)==null?void 0:K.createBy),1)):o("",!0),e.dataIndex==="orderTime"?(i(),p("span",xt,n((X=a.purchaseInfo)==null?void 0:X.createTime),1)):o("",!0),e.dataIndex==="orderRemark"?(i(),p("span",yt,n((Z=a.purchaseInfo)==null?void 0:Z.remark),1)):o("",!0),e.dataIndex==="measureUnit"?(i(),c(h,{key:18},{default:t(()=>{var d,C;return[r(n(((d=a.purchaseInfo)==null?void 0:d.measureUnit)=="1"?"\u65A4":((C=a.purchaseInfo)==null?void 0:C.measureUnit)=="2"?"\u516C\u65A4":"\u5428"),1)]}),_:2},1024)):o("",!0),e.dataIndex==="baseMeasureUnit"?(i(),c(h,{key:19},{default:t(()=>{var d,C;return[r(n(((d=a.purchaseInfo)==null?void 0:d.baseMeasureUnit)=="1"?"\u65A4":((C=a.purchaseInfo)==null?void 0:C.baseMeasureUnit)=="2"?"\u516C\u65A4":"\u5428"),1)]}),_:2},1024)):o("",!0),e.dataIndex==="nature"?(i(),c(h,{key:20},{default:t(()=>[r(n(a.nature=="1"?"\u50A8\u5907\u7CAE":a.nature=="2"?"\u5546\u54C1\u7CAE":"\u8F6E\u6362\u7CAE\u6CB9"),1)]),_:2},1024)):o("",!0),e.dataIndex==="orderStatus"?(i(),p(Q,{key:21},[u(h,null,{default:t(()=>[r(n(a.orderStatus==1?"\u5F85\u5BA1\u6838":a.orderStatus==2?"\u5BA1\u6838\u4E0D\u901A\u8FC7":a.orderStatus==3?"\u5BA1\u6838\u901A\u8FC7":"\u5DF2\u53D6\u6D88"),1)]),_:2},1024),a.orderStatus=="2"?(i(),c(Se,{key:0,placement:"top"},{title:t(()=>[N("span",null,n(a.approveReason),1)]),default:t(()=>[u(x($e))]),_:2},1024)):o("",!0)],64)):o("",!0),e.dataIndex==="edit"?(i(),p("span",wt,[u(Ce,{size:"middle",style:{color:"#05C059",cursor:"pointer"}},{default:t(()=>[a.orderStatus==1?(i(),p("span",{key:0,onClick:d=>_e(a)},"\u5BA1\u6838",8,gt)):(i(),p("span",{key:1,onClick:d=>ve(a)},"\u64A4\u9500\u5BA1\u6838",8,kt))]),_:2},1024)])):o("",!0)]}),_:1},8,["dataSource","columns","pagination"])]),_:1},8,["spinning"])]),u(Oe,{visible:T.value,"onUpdate:visible":s[6]||(s[6]=e=>T.value=e),title:"\u5BA1\u6279\u72B6\u6001",width:"480px",onOk:he,onCancel:q},{default:t(()=>[u(L,{class:"set-form",ref_key:"verifyFormRef",ref:D,model:v,name:"basic",autocomplete:"off",colon:!1,rules:fe},{default:t(()=>[u(S,{label:" ",name:"verifyStatus"},{default:t(()=>[u(Te,{value:v.verifyStatus,"onUpdate:value":s[4]||(s[4]=e=>v.verifyStatus=e)},{default:t(()=>[u(Y,{value:"3"},{default:t(()=>[r("\u5BA1\u6838\u901A\u8FC7")]),_:1}),u(Y,{value:"2"},{default:t(()=>[r("\u5BA1\u6838\u4E0D\u901A\u8FC7")]),_:1})]),_:1},8,["value"])]),_:1}),v.verifyStatus==="2"?(i(),c(S,{key:0,label:""},{default:t(()=>[u(Ue,{value:v.failureReson,"onUpdate:value":s[5]||(s[5]=e=>v.failureReson=e),"show-count":"",rows:4,maxlength:200,placeholder:"\u8F93\u5165\u4E0D\u901A\u8FC7\u7684\u539F\u56E0"},null,8,["value"])]),_:1})):o("",!0)]),_:1},8,["model"])]),_:1},8,["visible"])],64)}}},Ct=Qe(bt,[["__scopeId","data-v-3189d055"]]);export{Ct as default};
