import{z as Z,r as c,aj as ee,o as _,c as v,d as a,w as o,e as y,t as M,f as i,F as N,W as E,Q as g,m as L,_ as te,a6 as ae,n as ne,a3 as oe,B as le,s as se,L as ce,x as ie,S as ue,N as de,O as re}from"./index.192c8708.js";import{_ as pe}from"./index.fab15c34.js";import{g as _e,h as ve,a as me}from"./htMag.881530e9.js";import fe from"./HtAddModal.b944141d.js";import ge from"./HtEditModal.1d0c433f.js";import he from"./HtDetailModal.1881876c.js";import"./qualityReport.6dc17b5d.js";import"./UploadOutlined.4d52294f.js";import"./index.ad48934c.js";import"./common.e897a13c.js";import"./common.0ebad352.js";const I=h=>(de("data-v-f0c8226c"),h=h(),re(),h),ye=I(()=>i("span",{class:"separate"},"/",-1)),Se=I(()=>i("span",null,"\u5408\u540C\u5F52\u6863",-1)),xe={class:"app-container"},Ce={class:"container-wrapper"},ke={class:"table-operator"},we={key:2},be=["onClick"],Me=["onClick"],Ne=["onClick"],Ie=I(()=>i("span",null,"\u5220\u9664",-1)),Te={__name:"index",setup(h){const T=c(null),z=c(null),$=c(null),V=[{title:"\u5E8F\u53F7",width:60,align:"center",customRender:({text:e,record:t,index:f})=>parseInt(f)+1},{title:"\u5408\u540C\u540D\u79F0",align:"center",dataIndex:"contractName"},{title:"\u5408\u540C\u7F16\u53F7",align:"center",dataIndex:"contractCode"},{title:"\u5408\u540C\u7C7B\u578B",align:"center",dataIndex:"contractType"},{title:"\u5408\u540C\u72B6\u6001",align:"center",dataIndex:"contractStatus"},{title:"\u5408\u540C\u5BA2\u6237",align:"center",dataIndex:"opponentSignedMan"},{title:"\u521B\u5EFA\u65F6\u95F4",align:"center",dataIndex:"createTime",defaultSortOrder:"descend",sortDirections:["descend"],sorter:(e,t)=>e.createTime>t.createTime},{title:"\u64CD\u4F5C",dataIndex:"action",align:"center",fixed:"right",width:200,scopedSlots:{customRender:"action"}}],F=[{value:"1",label:"\u91C7\u8D2D\u5408\u540C"},{value:"2",label:"\u9500\u552E\u5408\u540C"}],D=[{value:"1",label:"\u5F85\u5F52\u6863"},{value:"2",label:"\u5DF2\u5F52\u6863"}],n=c({contractName:"",contractCode:"",contractStatus:void 0,opponentSignedMan:"",contractType:void 0}),s=c({}),S=c(1),x=c(10),m=c({current:1,pageSize:10,pageSizeOptions:["10","20","30","40","100"],total:0,showTotal:e=>`\u5171 ${e} \u6761`,hideOnSinglePage:!1,onChange:(e,t)=>O(e,t),onShowSizeChange:(e,t)=>{O(e,t,"sizeChange")},showSizeChanger:!0,showQuickJumper:!0}),O=(e,t,f)=>{m.value.current=e,f==="sizeChange"&&(m.value.pageSize=t),S.value=e,x.value=t,r()},r=e=>{console.log(s.value,"searchForm"),console.log(S.value,"pageNum"),console.log(x.value,"pageSize"),s.value.pageNum=S.value,s.value.pageSize=x.value,s.value.contractName=n.value.contractName||void 0,s.value.contractCode=n.value.contractCode||void 0,s.value.contractStatus=n.value.contractStatus||void 0,s.value.opponentSignedMan=n.value.opponentSignedMan||void 0,s.value.contractType=n.value.contractType||void 0,B()},C=c(!1),R=c([]),B=async()=>{C.value=!0,console.log(s.value,"aaa");const e=await _e(s.value);e.code===200&&(R.value=e.data.records,m.value.total=e.data.total,C.value=!1)};ee(()=>{r()});const A=c(null),J=()=>{s.value={pageNum:1,pageSize:10},m.value.current=1,n.value={},B()},Q=e=>{T.value.showModal(e)},H=e=>{z.value.showModal(JSON.parse(JSON.stringify(e)))},j=async e=>{e.contractStatus=="1"&&(await ve(e.id),L.success("\u5F52\u6863\u6210\u529F"),r())},q=e=>{me(e.id).then(t=>{t.code===200&&(L.success("\u5220\u9664\u6210\u529F"),r())})},P=e=>{$.value.showModal(e)};return(e,t)=>{const f=te,k=ae,p=ne,U=oe,w=le,W=se,G=pe,K=ce,X=ie,Y=ue;return _(),v(N,null,[a(f,{title:"\u5408\u540C\u5F52\u6863",icon:"icon-rongqi"},{nav:o(()=>[y(M("\u5408\u540C\u5F52\u6863")+" "),ye,Se]),_:1}),i("div",xe,[i("div",Ce,[a(W,{layout:"inline",ref_key:"searchFormRef",ref:A,model:n.value},{default:o(()=>[a(p,{label:"\u5408\u540C\u540D\u79F0"},{default:o(()=>[a(k,{style:{width:"320px"},placeholder:"\u8BF7\u8F93\u5165\u5408\u540C\u540D\u79F0",value:n.value.contractName,"onUpdate:value":t[0]||(t[0]=l=>n.value.contractName=l)},null,8,["value"])]),_:1}),a(p,{label:"\u5408\u540C\u7F16\u53F7"},{default:o(()=>[a(k,{style:{width:"320px"},placeholder:"\u8BF7\u8F93\u5165\u5408\u540C\u7F16\u53F7",value:n.value.contractCode,"onUpdate:value":t[1]||(t[1]=l=>n.value.contractCode=l)},null,8,["value"])]),_:1}),a(p,{label:"\u5408\u540C\u72B6\u6001"},{default:o(()=>[a(U,{style:{width:"320px"},placeholder:"\u8BF7\u9009\u62E9\u5408\u540C\u72B6\u6001",value:n.value.contractStatus,"onUpdate:value":t[2]||(t[2]=l=>n.value.contractStatus=l),options:D},null,8,["value"])]),_:1}),a(p,{label:"\u5408\u540C\u5BA2\u6237"},{default:o(()=>[a(k,{style:{width:"320px"},placeholder:"\u8BF7\u8F93\u5165\u5408\u540C\u5BA2\u6237",value:n.value.opponentSignedMan,"onUpdate:value":t[3]||(t[3]=l=>n.value.opponentSignedMan=l)},null,8,["value"])]),_:1}),a(p,{label:"\u5408\u540C\u7C7B\u578B"},{default:o(()=>[a(U,{style:{width:"320px"},placeholder:"\u8BF7\u9009\u62E9\u5408\u540C\u7C7B\u578B",value:n.value.contractType,"onUpdate:value":t[4]||(t[4]=l=>n.value.contractType=l),options:F},null,8,["value"])]),_:1}),a(p,null,{default:o(()=>[i("span",null,[a(w,{type:"primary",onClick:r},{default:o(()=>[y("\u67E5\u8BE2")]),_:1}),a(w,{type:"primary",ghost:"",onClick:J,style:{"margin-left":"15px"}},{default:o(()=>[y("\u91CD\u7F6E")]),_:1})])]),_:1})]),_:1},8,["model"]),i("div",ke,[a(w,{type:"primary",style:{width:"80px"},onClick:t[5]||(t[5]=l=>Q(e.record))},{default:o(()=>[y("\u65B0\u589E")]),_:1})])]),i("div",null,[a(Y,{spinning:C.value},{default:o(()=>[a(X,{dataSource:R.value,columns:V,pagination:m.value,scroll:{x:0,y:380}},{bodyCell:o(({column:l,record:d})=>[l.dataIndex==="contractType"?(_(),v(N,{key:0},E(F,(u,b)=>i("div",{key:b},M(d.contractType==u.value?u.label:""),1)),64)):g("",!0),l.dataIndex==="contractStatus"?(_(),v(N,{key:1},E(D,(u,b)=>i("div",{key:b},M(d.contractStatus==u.value?u.label:""),1)),64)):g("",!0),l.dataIndex==="action"?(_(),v("span",we,[a(K,{size:"middle",style:{color:"#05c059",cursor:"pointer"}},{default:o(()=>[i("span",{onClick:u=>P(d)},"\u8BE6\u60C5",8,be),d.contractStatus=="1"?(_(),v("span",{key:0,onClick:u=>H(d)},"\u7F16\u8F91",8,Me)):g("",!0),d.contractStatus=="1"?(_(),v("span",{key:1,onClick:u=>j(d)},"\u5F52\u6863",8,Ne)):g("",!0),a(G,{title:"\u786E\u5B9A\u5220\u9664\u5417\uFF1F",onConfirm:u=>q(d)},{default:o(()=>[Ie]),_:2},1032,["onConfirm"])]),_:2},1024)])):g("",!0)]),_:1},8,["dataSource","pagination"])]),_:1},8,["spinning"])])]),a(fe,{ref_key:"htAddModal",ref:T,onRefresh:r},null,512),a(ge,{ref_key:"htEditModal",ref:z,onRefresh:r},null,512),a(he,{ref_key:"htDetailModal",ref:$},null,512)],64)}}},Ae=Z(Te,[["__scopeId","data-v-f0c8226c"]]);export{Ae as default};
