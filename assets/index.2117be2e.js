import{aI as C,z as $e,a as Re,A as O,r as c,V as Ue,C as Me,b as Pe,o as r,c as y,d as a,w as l,e as p,t as T,F as A,W as ee,g as s,i as I,f as k,h as D,D as qe,E as ze,P as Fe,Q as $,G as Ve,M as E,m as R,_ as Be,a$ as Oe,b0 as Ae,y as Ee,l as Qe,n as we,a3 as Ke,B as Ge,s as Je,K as je,b1 as We,a5 as Ze,L as He,x as Xe,a6 as Ye,a9 as et,aa as tt,ab as at,N as lt,O as nt}from"./index.192c8708.js";function st(u){return C({url:"/supplierInfo/list",method:"post",params:u})}function te(u){return C({url:"categoryManage/queryList",method:"post",params:u})}function ot(u){return C({url:"/supplierInfo/add",method:"post",params:u})}function ae(u){return C({url:"/supplierInfo/edit",method:"post",params:u})}function ut(u){return C({url:"/supplierInfo/delete/"+u,method:"post"})}const le=u=>(lt("data-v-8c072960"),u=u(),nt(),u),it=le(()=>k("span",{class:"separate"},"/",-1)),ct=le(()=>k("span",null,"\u4F9B\u5E94\u5546\u7BA1\u7406",-1)),dt={class:"app-container"},rt={class:"container-wrapper"},pt={key:0},_t={key:1},vt={key:2},mt={class:"dialog-footer"},ft={__name:"index",setup(u){const ne=Re(),se=O([{label:"\u5546\u54C1\u5206\u7C7B",value:"/basic/productCate"},{label:"\u4F9B\u5E94\u5546\u5206\u7C7B",value:"/basic/supplierCate"},{label:"\u5408\u4F5C\u5BA2\u6237\u5206\u7C7B",value:"/basic/cooperatorCate"},{label:"\u5546\u54C1\u7BA1\u7406",value:"/basic/productMg"},{label:"\u4F9B\u5E94\u5546\u7BA1\u7406",value:"/basic/supplierMg"},{label:"\u5408\u4F5C\u5BA2\u6237\u7BA1\u7406",value:"/basic/cooperatorMg"},{label:"\u4ED3\u5E93\u7BA1\u7406",value:"/basic/storehouseMg"},{label:"\u4EA7\u5730\u7BA1\u7406",value:"/basic/productPlaceMg"}]),{proxy:L}=Ve(),{sys_normal_disable:Q}=L.useDict("sys_normal_disable"),w=c([]),m=c(!1),K=c(!0),oe=c(!0),U=c([]);c(!0),c(!0),c(0);const M=c(""),ue=c([]),P=c("/basic/supplierMg"),q=c([]),x=c([]),ie=[{title:"\u4F9B\u5E94\u5546\u540D\u79F0",dataIndex:"supplierName",ellipsis:!0},{title:"\u4E00\u7EA7\u5206\u7C7B",dataIndex:"ctgLevel1Name",ellipsis:!0},{title:"\u4E8C\u7EA7\u5206\u7C7B",dataIndex:"ctgLevel2Name",ellipsis:!0},{title:"\u72B6\u6001",dataIndex:"status"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime"},{title:"\u64CD\u4F5C",dataIndex:"operation",fixed:"right",align:"center"}],ce=O({categoryName:"",categoryData:["Zhejiang","Jiangsu"],form:{},queryParams:{offset:0,limit:10,dictName:void 0,dictType:void 0,status:void 0},rules:{dictName:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],dictType:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),{queryParams:d,form:o,rules:de,categoryName:gt,categoryData:yt}=Ue(ce);function re(e){G(o.value.ctgLevel1Id)}function pe(){te({ctgType:2,ctgLevel:1}).then(e=>{(e==null?void 0:e.data).forEach((i,g)=>{q.value[g]={value:i.id,label:i.ctgName}})})}function G(e,t){te({ctgType:2,ctgLevel:2,ctgParentId:e}).then(i=>{(i==null?void 0:i.data).forEach((S,F)=>{x.value[F]={value:S.id,label:S.ctgName}}),t&&(o.value.ctgLevel2Id=t)})}function _e(){ne.push(P.value)}function f(){K.value=!0,pe(),st(L.addDateRange(d.value)).then(e=>{const t=e==null?void 0:e.data;w.value=t.data,h.total=(t==null?void 0:t.row)||0,K.value=!1})}function ve(e){console.log(e,"row");const t=e.id||U.value,i=e!=null&&e.ctgName?e.ctgName+"\u7684":"",g=e.status==1?0:1;E.confirm({title:"\u64CD\u4F5C\u786E\u8BA4",content:"\u662F\u5426\u786E\u8BA4\u4FEE\u6539"+i+"\u72B6\u6001\uFF1F",onOk(){ae({status:g,id:t}).then(()=>{f(),R.success("\u4FEE\u6539\u6210\u529F")}).catch(()=>{})}})}function me(){m.value=!1,N()}function N(){o.value={dictId:void 0,dictName:void 0,dictType:void 0,status:"0",remark:void 0,ctgLevel1Id:void 0,ctgLevel2Id:void 0},x.value=[],L.resetForm("dictRef")}function z(){h.current=1,d.value.offset=0,f()}function J(){ue.value=[],L.resetForm("queryRef"),z()}const j=(e,t,i)=>{h.current=e,i&&(h.pageSize=t,d.value.limit=t),d.value.offset=(e-1)*t,f()},h=O({current:1,pageSize:10,total:0,showTotal:e=>`\u5171 ${e} \u6761`,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["2","20","50","100"],onChange:(e,t)=>j(e,t),onShowSizeChange:(e,t)=>j(e,t,"sizeChange")});function fe(){N(),m.value=!0,M.value="\u6DFB\u52A0"}function ge(e){N(),e.id||U.value,o.value.id=e.id,M.value="\u4FEE\u6539",x.value=[],o.value.supplierName=e.supplierName,o.value.ctgLevel1Id=e.ctgLevel1Id,o.value.ctgLevel2Id=e.ctgLevel2Id,o.value.status=e.status.toString(),e.ctgLevel==2&&(o.value.categoryId=e.ctgParentId),G(e.ctgLevel1Id,e.ctgLevel2Id),m.value=!0}const W=c();async function ye(){try{await W.value.validateFields(),o.value.id!=null?ae(o.value).then(e=>{R.success("\u4FEE\u6539\u6210\u529F"),m.value=!1,f()}):ot(o.value).then(e=>{R.success("\u65B0\u589E\u6210\u529F"),m.value=!1,f()}),N()}catch{}}function he(e){const t=e.id||U.value,i=e.supplierName;E.confirm({title:"\u64CD\u4F5C\u786E\u8BA4",content:'\u662F\u5426\u786E\u8BA4\u5220\u9664"'+i+'"\u6570\u636E\u9879\uFF1F',onOk(){ut(t).then(()=>{J(),R.success("\u5220\u9664\u6210\u529F")}).catch(()=>{})}})}return f(),(e,t)=>{const i=Be,g=Oe,S=Ae,F=Ee,be=Qe,_=we,Z=Ke,b=Ge,H=Je,V=je,Ie=Me("router-link"),ke=We,Ce=Ze,Le=He,xe=Xe,Ne=Ye,X=et,Se=tt,Te=at,De=E,B=Pe("hasPermi");return r(),y(A,null,[a(i,{title:"\u4F9B\u5E94\u5546\u7BA1\u7406",icon:"icon-xuniziyuan",back:"/overview"},{nav:l(()=>[p(T("\u4F9B\u5E94\u5546\u7BA1\u7406")+" "),it,ct]),_:1}),a(F,null,{default:l(()=>[a(S,{defaultValue:"",onChange:_e,value:P.value,"onUpdate:value":t[0]||(t[0]=n=>P.value=n)},{default:l(()=>[(r(!0),y(A,null,ee(s(se),(n,v)=>(r(),I(g,{key:v,value:n.value},{default:l(()=>[p(T(n.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),k("div",dt,[k("div",rt,[D(a(H,{model:s(d),ref:"queryRef",layout:"inline","label-width":"68px"},{default:l(()=>[a(_,{name:"supplierName"},{default:l(()=>[a(be,{label:"\u4F9B\u5E94\u5546\u540D\u79F0",value:s(d).supplierName,"onUpdate:value":t[1]||(t[1]=n=>s(d).supplierName=n),placeholder:"\u8BF7\u8F93\u5165",clearable:"",style:{width:"240px"},onKeyup:ze(z,["enter"])},null,8,["value"])]),_:1}),a(_,{name:"ctgLevel1Id"},{default:l(()=>[a(Z,{label:"\u5206\u7C7B",value:s(d).ctgLevel1Id,"onUpdate:value":t[2]||(t[2]=n=>s(d).ctgLevel1Id=n),placeholder:"\u8BF7\u9009\u62E9",clearable:"",style:{width:"240px"},options:q.value},null,8,["value","options"])]),_:1}),a(_,{name:"status"},{default:l(()=>[a(Z,{label:"\u72B6\u6001",value:s(d).status,"onUpdate:value":t[3]||(t[3]=n=>s(d).status=n),placeholder:"\u8BF7\u9009\u62E9",clearable:"",style:{width:"240px"},options:s(Q)},null,8,["value","options"])]),_:1}),a(_,null,{default:l(()=>[a(b,{type:"primary",onClick:z},{default:l(()=>[p("\u67E5\u8BE2")]),_:1}),a(b,{type:"primary",ghost:"",onClick:J,style:{"margin-left":"15px"}},{default:l(()=>[p("\u91CD\u7F6E")]),_:1})]),_:1}),a(_,{style:{"margin-left":"165px"}},{default:l(()=>[D((r(),I(b,{type:"primary",onClick:fe},{icon:l(()=>[a(s(Fe))]),default:l(()=>[p(" \u65B0\u589E ")]),_:1})),[[B,["system:dict:add"]]])]),_:1})]),_:1},8,["model"]),[[qe,oe.value]])]),a(xe,{dataSource:w.value,columns:ie,pagination:s(h)},{bodyCell:l(({column:n,record:v})=>[n.dataIndex==="dictType"?(r(),y("span",pt,[a(Ie,{to:"/system/dict-data/index/"+v.dictId,class:"link-type"},{default:l(()=>[a(V,null,{default:l(()=>[p(T(v.dictType),1)]),_:2},1024)]),_:2},1032,["to"])])):$("",!0),n.dataIndex==="status"?(r(),y("span",_t,[a(ke,{checked:v.status!="1",onClick:Y=>ve(v)},null,8,["checked","onClick"])])):$("",!0),n.dataIndex==="operation"?(r(),y("span",vt,[a(Le,{size:"small"},{default:l(()=>[D((r(),I(V,{onClick:Y=>ge(v)},{default:l(()=>[p("\u7F16\u8F91")]),_:2},1032,["onClick"])),[[B,["system:dict:edit"]]]),a(Ce,{type:"vertical",style:{"background-color":"#05C059"}}),v.roleId!==1?D((r(),I(V,{key:0,onClick:Y=>he(v)},{default:l(()=>[p("\u5220\u9664")]),_:2},1032,["onClick"])),[[B,["system:dict:remove"]]]):$("",!0)]),_:2},1024)])):$("",!0)]),_:1},8,["dataSource","pagination"]),a(De,{title:M.value,visible:m.value,"onUpdate:visible":t[8]||(t[8]=n=>m.value=n),width:"500px","append-to-body":""},{footer:l(()=>[k("div",mt,[a(b,{type:"primary",onClick:ye},{default:l(()=>[p("\u786E \u5B9A")]),_:1}),a(b,{onClick:me},{default:l(()=>[p("\u53D6 \u6D88")]),_:1})])]),default:l(()=>[a(H,{ref_key:"dictRef",ref:W,model:s(o),rules:s(de),labelAlign:"left","label-col":{span:5}},{default:l(()=>[a(_,{label:"\u4F9B\u5E94\u5546\u7BA1\u7406",name:"supplierName"},{default:l(()=>[a(Ne,{value:s(o).supplierName,"onUpdate:value":t[4]||(t[4]=n=>s(o).supplierName=n),placeholder:"\u8BF7\u8F93\u5165\u4F9B\u5E94\u5546\u540D"},null,8,["value"])]),_:1}),a(_,{label:"\u4E00\u7EA7\u5206\u7C7B",name:"ctgLevel1Id"},{default:l(()=>[a(X,{value:s(o).ctgLevel1Id,"onUpdate:value":t[5]||(t[5]=n=>s(o).ctgLevel1Id=n),options:q.value,onChange:re,placeholder:"\u8BF7\u9009\u62E9"},null,8,["value","options"])]),_:1}),a(_,{label:"\u4E8C\u7EA7\u5206\u7C7B",name:"ctgLevel2Id"},{default:l(()=>[a(X,{value:s(o).ctgLevel2Id,"onUpdate:value":t[6]||(t[6]=n=>s(o).ctgLevel2Id=n),options:x.value,placeholder:"\u8BF7\u9009\u62E9"},null,8,["value","options"])]),_:1}),a(_,{label:"\u72B6\u6001",name:"status"},{default:l(()=>[a(Te,{value:s(o).status,"onUpdate:value":t[7]||(t[7]=n=>s(o).status=n)},{default:l(()=>[(r(!0),y(A,null,ee(s(Q),n=>(r(),I(Se,{key:n.value,value:n.value},{default:l(()=>[p(T(n.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","visible"])])],64)}}},bt=$e(ft,[["__scopeId","data-v-8c072960"]]);export{bt as default};
