import{r as v,o as G,i as K,w as a,d as e,e as b,f as y,g as n,R as P,t as k,m as D,a6 as Q,n as W,p as Z,q as ee,a5 as le,a3 as ae,ac as te,b3 as ne,B as oe,aJ as re,s as ue,M as ie}from"./index.192c8708.js";import{u as se}from"./qualityReport.6dc17b5d.js";import{b as ce}from"./htMag.881530e9.js";import{U as S}from"./UploadOutlined.4d52294f.js";const de={style:{margin:"0 auto",position:"relative"}},_e={__name:"HtAddModal",emits:["refresh"],setup(pe,{expose:N,emit:T}){const R=T,A=v("\u65B0\u589E"),U=v(!1),V=v("\u652F\u6301\u4E0A\u4F20.DOC.DOCX\u683C\u5F0F,\u5355\u4E2A\u6587\u4EF6<=50.0MB"),B=v("\u5355\u4E2A\u6587\u4EF6<=5.0MB"),c={xs:{span:24},sm:{span:4}},d={xs:{span:24},sm:{span:16}},x=v(),t=v({opponentUnit:"",opponentSignedMan:"",contractName:"",contractType:void 0,contractCode:"",contractAmount:"",dateString:[],contractFileInfo:"",annexFileInfo:"",legalFileInfo:"",contractDesc:"",firstUnit:"",secondUnit:"",thirdUnit:"",fourthUnit:"",annexContractName:"",annexContractCode:""}),L=(r,l,s)=>l===null?Promise.reject("\u8BF7\u9009\u62E9\u5408\u540C\u8D77\u6B62\u65F6\u95F4"):Promise.resolve(),p=v([]),m=v([]),f=v([]),w=(r,l,s)=>r.field==="contractFileInfo"?p.value.length===0?Promise.reject("\u8BF7\u9009\u62E9\u9700\u8981\u4E0A\u4F20\u7684\u6587\u4EF6"):Promise.resolve():r.field==="annexFileInfo"?m.value.length===0?Promise.reject("\u8BF7\u9009\u62E9\u9700\u8981\u4E0A\u4F20\u7684\u6587\u4EF6"):Promise.resolve():r.field==="legalFileInfo"?f.value.length===0?Promise.reject("\u8BF7\u9009\u62E9\u9700\u8981\u4E0A\u4F20\u7684\u6587\u4EF6"):Promise.resolve():Promise.reject("\u5F02\u5E38\u6570\u636E"),j=[{value:"1",label:"\u91C7\u8D2D\u5408\u540C"},{value:"2",label:"\u9500\u552E\u5408\u540C"}],E={opponentUnit:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BA2\u6237\u5355\u4F4D",trigger:"change"}],opponentSignedMan:[{required:!0,message:"\u8BF7\u8F93\u5165\u5408\u540C\u5BA2\u6237",trigger:"change"}],contractType:[{required:!0,message:"\u8BF7\u8F93\u5165\u5408\u540C\u7C7B\u578B",trigger:"change"}],contractName:[{required:!0,message:"\u8BF7\u8F93\u5165\u5408\u540C\u540D\u79F0",trigger:"change"}],contractCode:[{required:!0,message:"\u8BF7\u8F93\u5165\u5408\u540C\u7F16\u53F7",trigger:"change"}],contractAmount:[{required:!0,message:"\u8BF7\u8F93\u5165\u5408\u540C\u91D1\u989D",trigger:"change"}],firstUnit:[{required:!0,message:"\u8BF7\u8F93\u5165\u7532\u65B9",trigger:"change"}],secondUnit:[{required:!0,message:"\u8BF7\u8F93\u5165\u4E59\u65B9",trigger:"change"}],contractDesc:[{required:!0,message:"\u8BF7\u8F93\u5165\u7B80\u8981\u63CF\u8FF0",trigger:"change"}],dateString:[{required:!0,validator:L,trigger:"change"}],contractFileInfo:[{required:!0,validator:w,trigger:"change"}],annexFileInfo:[{required:!0,validator:w,trigger:"change"}],legalFileInfo:[{required:!0,validator:w,trigger:"change"}]},h=r=>{console.log(r,"e"),se({file:r.file}).then(l=>{D.success("\u4E0A\u4F20\u6210\u529F"),console.log("\u4E0A\u4F20\u6210\u529F",l.data),r.filename=="contractFileInfo"?(p.value[p.value.length-1].contractFileInfo=l.data,console.log(p.value[p.value.length-1].contractFileInfo,"file1")):r.filename=="annexFileInfo"?(m.value[m.value.length-1].annexFileInfo=l.data,console.log(m.value[m.value.length-1],"file2")):r.filename=="legalFileInfo"&&(f.value[f.value.length-1].legalFileInfo=l.data,console.log(f.value[f.value.length-1],"file3")),console.log(p.value,"test"),r.onSuccess(l.data,r)}).catch(l=>{r.onError(l)})},q=v(),Y=r=>{U.value=!0,q.value=r,console.log(q.value,"md")},O=(r,l)=>{console.log(l[0],l[1],"dateString"),t.value.contractSignedDate=l[0],t.value.contractExpirationDate=l[1]},$=()=>{console.log(f,"filexxxx"),x.value.validate().then(r=>{var l,s,u,i,g,_;if(r)try{ce({opponentUnit:t.value.opponentUnit,opponentSignedMan:t.value.opponentSignedMan,contractName:t.value.contractName,contractType:t.value.contractType,contractCode:t.value.contractCode,contractDesc:t.value.contractDesc,contractAmount:t.value.contractAmount,contractSignedDate:t.value.contractSignedDate||"",contractExpirationDate:t.value.contractExpirationDate||"",firstUnit:t.value.firstUnit,secondUnit:t.value.secondUnit,thirdUnit:t.value.thirdUnit,fourthUnit:t.value.fourthUnit,contractFilename:((l=p.value[0])==null?void 0:l.name)||"",contractFileInfo:((s=p.value[0])==null?void 0:s.contractFileInfo)||"",annexFilename:((u=m.value[0])==null?void 0:u.name)||"",annexFileInfo:((i=m.value[0])==null?void 0:i.annexFileInfo)||"",legalFilename:((g=f.value[0])==null?void 0:g.name)||"",legalFileInfo:((_=f.value[0])==null?void 0:_.legalFileInfo)||""}).then(F=>{F.code===200&&(x.value.resetFields(),t.value={},p.value=[],m.value=[],f.value=[],D.success("\u63D0\u4EA4\u6210\u529F"),U.value=!1,R("refresh"))})}catch{}else return D.error("\u63D0\u4EA4\u5931\u8D25\uFF0C\u8BF7\u586B\u5199\u5FC5\u586B\u9879"),!1})},M=()=>{x.value.resetFields(),t.value={},p.value=[],m.value=[],f.value=[],U.value=!1};return N({showModal:Y}),(r,l)=>{const s=Q,u=W,i=Z,g=ee,_=le,F=ae,H=te,J=ne,C=oe,I=re,X=ue,z=ie;return G(),K(z,{width:"1200px",title:n(A),onCancel:M,visible:n(U),keyboard:!0,maskClosable:!1,cancelText:"\u5173\u95ED"},{footer:a(()=>[e(C,{key:"back",onClick:M},{default:a(()=>[b("\u5173\u95ED")]),_:1}),e(C,{type:"primary",onClick:l[17]||(l[17]=o=>$())},{default:a(()=>[b("\u63D0\u4EA4")]),_:1})]),default:a(()=>[y("div",de,[e(X,{ref_key:"formRef",ref:x,model:n(t),rules:E},{default:a(()=>[e(g,{gutter:24},{default:a(()=>[e(i,{span:12},{default:a(()=>[e(u,{name:"opponentUnit",label:"\u5BA2\u6237\u5355\u4F4D",labelCol:c,wrapperCol:d},{default:a(()=>[e(s,{value:n(t).opponentUnit,"onUpdate:value":l[0]||(l[0]=o=>n(t).opponentUnit=o),placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u5355\u4F4D"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:12},{default:a(()=>[e(u,{name:"opponentSignedMan",label:"\u5408\u540C\u5BA2\u6237",labelCol:c,wrapperCol:d},{default:a(()=>[e(s,{value:n(t).opponentSignedMan,"onUpdate:value":l[1]||(l[1]=o=>n(t).opponentSignedMan=o),placeholder:"\u8BF7\u8F93\u5165\u5408\u540C\u5BA2\u6237"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(_,{style:{margin:"0 0 24px 0"}}),e(g,{gutter:24},{default:a(()=>[e(i,{span:12},{default:a(()=>[e(u,{name:"contractType",label:"\u5408\u540C\u7C7B\u578B",labelCol:c,wrapperCol:d},{default:a(()=>[e(F,{value:n(t).contractType,"onUpdate:value":l[2]||(l[2]=o=>n(t).contractType=o),placeholder:"\u8BF7\u9009\u62E9\u5408\u540C\u7C7B\u578B",clearable:"",options:j},null,8,["value"])]),_:1})]),_:1}),e(i,{span:12},{default:a(()=>[e(u,{name:"contractName",label:"\u5408\u540C\u540D\u79F0",labelCol:c,wrapperCol:d},{default:a(()=>[e(s,{value:n(t).contractName,"onUpdate:value":l[3]||(l[3]=o=>n(t).contractName=o),placeholder:"\u8BF7\u8F93\u5165\u5408\u540C\u540D\u79F0"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:12},{default:a(()=>[e(u,{name:"contractCode",label:"\u5408\u540C\u7F16\u53F7",labelCol:c,wrapperCol:d},{default:a(()=>[e(s,{value:n(t).contractCode,"onUpdate:value":l[4]||(l[4]=o=>n(t).contractCode=o),placeholder:"\u8BF7\u8F93\u5165\u5408\u540C\u7F16\u53F7"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:12},{default:a(()=>[e(u,{name:"contractAmount",label:"\u5408\u540C\u91D1\u989D",labelCol:c,wrapperCol:d},{default:a(()=>[e(s,{type:"number",min:"0",value:n(t).contractAmount,"onUpdate:value":l[5]||(l[5]=o=>n(t).contractAmount=o),style:{"margin-bottom":"10px"},placeholder:"\u8BF7\u8F93\u5165\u5408\u540C\u91D1\u989D"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(_,{style:{margin:"0 0 24px 0"}}),e(g,{gutter:24},{default:a(()=>[e(i,{span:12},{default:a(()=>[e(u,{name:"firstUnit",label:"\u7532\u65B9",labelCol:c,wrapperCol:d},{default:a(()=>[e(s,{value:n(t).firstUnit,"onUpdate:value":l[6]||(l[6]=o=>n(t).firstUnit=o),placeholder:"\u8BF7\u8F93\u5165\u4E59\u65B9"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:12},{default:a(()=>[e(u,{name:"secondUnit",label:"\u4E59\u65B9",labelCol:c,wrapperCol:d},{default:a(()=>[e(s,{value:n(t).secondUnit,"onUpdate:value":l[7]||(l[7]=o=>n(t).secondUnit=o),placeholder:"\u8BF7\u8F93\u5165\u4E59\u65B9"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(g,{gutter:24},{default:a(()=>[e(i,{span:12},{default:a(()=>[e(u,{label:"\u4E19\u65B9",labelCol:c,wrapperCol:d},{default:a(()=>[e(s,{value:n(t).thirdUnit,"onUpdate:value":l[8]||(l[8]=o=>n(t).thirdUnit=o),placeholder:"\u8BF7\u8F93\u5165\u4E19\u65B9"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:12},{default:a(()=>[e(u,{label:"\u4E01\u65B9",labelCol:c,wrapperCol:d},{default:a(()=>[e(s,{value:n(t).fourthUnit,"onUpdate:value":l[9]||(l[9]=o=>n(t).fourthUnit=o),placeholder:"\u8BF7\u8F93\u5165\u4E01\u65B9"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(g,{gutter:24},{default:a(()=>[e(i,{span:22},{default:a(()=>[e(u,{name:"contractDesc",label:"\u7B80\u8981\u63CF\u8FF0",style:{"margin-left":"25px"}},{default:a(()=>[e(H,{value:n(t).contractDesc,"onUpdate:value":l[10]||(l[10]=o=>n(t).contractDesc=o),placeholder:"\u8BF7\u8F93\u5165\u7B80\u8981\u63CF\u8FF0",rows:4},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(g,{gutter:24},{default:a(()=>[e(i,{span:12},{default:a(()=>[e(u,{name:"dateString",prop:"dateString",label:"\u5408\u540C\u8D77\u6B62\u65F6\u95F4",labelCol:c,wrapperCol:d},{default:a(()=>[e(J,{value:n(t).dateString,"onUpdate:value":l[11]||(l[11]=o=>n(t).dateString=o),onChange:O,format:"YYYY-MM-DD"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:12},{default:a(()=>[e(u,{label:"\u5173\u8054\u5408\u540C",labelCol:c,wrapperCol:d},{default:a(()=>[e(s,{style:{"margin-bottom":"10px"},modelValue:n(t).annexContractName,"onUpdate:modelValue":l[12]||(l[12]=o=>n(t).annexContractName=o),placeholder:"\u8BF7\u8F93\u5165\u5173\u8054\u5408\u540C\u540D\u79F0"},null,8,["modelValue"]),e(s,{modelValue:n(t).annexContractCode,"onUpdate:modelValue":l[13]||(l[13]=o=>n(t).annexContractCode=o),placeholder:"\u8BF7\u8F93\u5165\u5173\u8054\u5408\u540C\u7F16\u53F7"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,{style:{margin:"0 0 24px 0"}}),e(g,{gutter:24},{default:a(()=>[e(i,{span:12},{default:a(()=>[e(u,{label:"\u5408\u540C\u6587\u4EF6",prop:"contractFileInfo",labelCol:c,wrapperCol:d},{default:a(()=>[e(I,{name:"contractFileInfo","file-list":n(p),"onUpdate:fileList":l[14]||(l[14]=o=>P(p)?p.value=o:null),maxCount:1,customRequest:h,onPreview:r.handlePreview},{default:a(()=>[e(C,{class:"upload-button"},{default:a(()=>[e(n(S)),b("\u70B9\u51FB\u4E0A\u4F20")]),_:1})]),_:1},8,["file-list","onPreview"]),y("span",null,k(n(V)),1)]),_:1})]),_:1}),e(i,{span:12},{default:a(()=>[e(u,{label:"\u5173\u8054\u9644\u4EF6",prop:"annexFileInfo",labelCol:c,wrapperCol:d},{default:a(()=>[e(I,{name:"annexFileInfo","file-list":n(m),"onUpdate:fileList":l[15]||(l[15]=o=>P(m)?m.value=o:null),maxCount:1,customRequest:h,onPreview:r.handlePreview},{default:a(()=>[e(C,{class:"upload-button"},{default:a(()=>[e(n(S)),b("\u70B9\u51FB\u4E0A\u4F20")]),_:1})]),_:1},8,["file-list","onPreview"]),y("span",null,k(n(B)),1)]),_:1})]),_:1})]),_:1}),e(_,{style:{margin:"0 0 24px 0"}}),e(g,{gutter:24},{default:a(()=>[e(i,{span:12},{default:a(()=>[e(u,{label:"\u6CD5\u52A1\u51ED\u8BC1",prop:"legalFileInfo",labelCol:c,wrapperCol:d},{default:a(()=>[e(I,{name:"legalFileInfo","file-list":n(f),"onUpdate:fileList":l[16]||(l[16]=o=>P(f)?f.value=o:null),maxCount:1,customRequest:h,onPreview:r.handlePreview},{default:a(()=>[e(C,{class:"upload-button"},{default:a(()=>[e(n(S)),b("\u70B9\u51FB\u4E0A\u4F20")]),_:1})]),_:1},8,["file-list","onPreview"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1},8,["title","visible"])}}};export{_e as default};
