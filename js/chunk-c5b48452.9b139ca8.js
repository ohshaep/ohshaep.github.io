(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-c5b48452"],{"946a":function(e,t,o){},a80f:function(e,t,o){"use strict";o("946a")},dd7b:function(e,t,o){"use strict";o.r(t);var r=o("c7eb"),s=o("1da1"),n=(o("14d9"),o("1948")),a=o("9816"),i={name:"Login",data:function(){return{title:"资源管理系统",formType:"login",loginForm:{code:"",username:"",password:"",verifyCode:""},loginRules:{username:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:1,max:18,trigger:"blur",message:"密码长度为1到18位"}],verifyCode:[{required:!0,trigger:"blur",message:"请输入验证码"}]},loading:!1,redirect:void 0,passwordType:"password",codeUrl:null}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},created:function(){this.getCode()},methods:{showPassword:function(){var e=this;this.passwordType="password"===this.passwordType?"":"password",this.$nextTick((function(){e.$refs.password.focus()}))},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){if(t){e.loading=!0;var o=new a.a;o.setPublicKey("-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCemvWhZ5ARmO5C3Z3Q9ZjwGZuX\nN3j6VHVU2WSnlYhJugA73PGEGB9PJql4LUeX/LVcyF8TvmCXb1Jahw3ivR3JwLn1\nPU7teVzbWEmRm1vTKRAoW/p/CMweNZbV6mkG7O3m1SwnnRCbyLBeuRjXEkazQ58s\nHRgT53kvwimEH9nBhQIDAQAB\n-----END PUBLIC KEY-----");var r={};r.password=o.encrypt(e.loginForm.password),r.username=o.encrypt(e.loginForm.username),r.code=e.loginForm.code,r.verifyCode=e.loginForm.verifyCode,e.$store.dispatch("user/login",r).then((function(){e.loading=!1,e.$router.push({path:"/"})})).catch((function(){e.loading=!1,e.getCode()}))}}))},getCode:function(){var e=this;return Object(s.a)(Object(r.a)().mark((function t(){var o,s,a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(n.a)();case 3:o=t.sent,e.loginForm.code=o.data.Vcode,s=o.data.image,(a=new Image).src="data:image/png;base64,"+s,e.codeUrl=a.src,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),e.$message.error("获取验证码失败");case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}}},l=(o("a80f"),o("2877")),c=Object(l.a)(i,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"bg-banner"}),t("div",{attrs:{id:"login-box"}},[t("div",{staticClass:"login-banner"}),t("el-form",{directives:[{name:"show",rawName:"v-show",value:"login"==e.formType,expression:"formType == 'login'"}],ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,size:"default",autocomplete:"on","label-position":"left"}},[t("div",{staticClass:"title-container"},[t("h3",{staticClass:"title"},[e._v(e._s(e.title)+"管理后台")])]),t("div",[t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{ref:"name",attrs:{placeholder:e.$t("app.account"),type:"text",tabindex:"1",autocomplete:"on"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}},[t("svg-icon",{attrs:{slot:"prefix",name:"user"},slot:"prefix"})],1)],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{ref:"password",attrs:{type:e.passwordType,placeholder:e.$t("app.password"),tabindex:"2",autocomplete:"on"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[t("svg-icon",{attrs:{slot:"prefix",name:"password"},slot:"prefix"}),t("svg-icon",{attrs:{slot:"suffix",name:"password"===e.passwordType?"eye":"eye-open"},on:{click:e.showPassword},slot:"suffix"})],1)],1),t("el-form-item",{attrs:{prop:"verifyCode"}},[t("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[t("el-input",{ref:"name",staticStyle:{width:"60%"},attrs:{placeholder:"请输入验证码",type:"text",tabindex:"3",autocomplete:"on"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.verifyCode,callback:function(t){e.$set(e.loginForm,"verifyCode",t)},expression:"loginForm.verifyCode"}},[t("svg-icon",{attrs:{slot:"prefix",name:"YY_key"},slot:"prefix"})],1),t("div",{staticStyle:{width:"35%",height:"48px"},on:{click:e.getCode}},[t("img",{staticClass:"code-img",attrs:{src:e.codeUrl,alt:""}})])],1)])],1),t("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.loading,type:"primary",size:"default"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin.apply(null,arguments)}}},[e._v(e._s(e.$t("app.login")))])],1)],1),e.$store.state.settings.showCopyright?t("Copyright"):e._e()],1)}),[],!1,null,"700a6475",null);t.default=c.exports}}]);