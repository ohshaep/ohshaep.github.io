(window.webpackJsonp=window.webpackJsonp||[]).push([["workReport"],{"0289":function(e,t,a){},"0381":function(e,t,a){},"0524":function(e,t,a){},"0d29":function(e,t,a){"use strict";a("2cd0")},"0eb2":function(e,t,a){"use strict";a("b299")},1059:function(e,t,a){},"111c":function(e,t,a){"use strict";a("907a5")},"120a":function(e,t,a){"use strict";a("a65a")},1397:function(e,t,a){"use strict";a("2227")},"163a":function(e,t,a){},"167d":function(e,t,a){"use strict";a.r(t);var r=a("c7eb"),i=a("1da1"),l=(a("c740"),a("14d9"),a("365c")),n={data:function(){return{dialogFormVisible:!1,computedTotalStatus:!1,historyTotalForm:{pipeKilometreSum:null,pipeHoleKilometreSum:null,personWellSum:null,handWellSum:null},newForm:{pipeKilometreAdd:null,pipeHoleKilometreAdd:null,personWellAdd:null,handWellAdd:null},rules:{pipeKilometreAdd:[{required:!0,message:"请输入新增管程公里数",trigger:"blur"},{type:"number",message:"请输入数字(限数字),",trigger:"blur"}],pipeHoleKilometreAdd:[{required:!0,message:"请输入新增管孔公里数",trigger:"blur"},{type:"number",message:"请输入数字(限数字),",trigger:"blur"}],personWellAdd:[{required:!0,message:"请输入新增人井数",trigger:"blur"},{type:"number",message:"请输入数字(限数字),",trigger:"blur"}],handWellAdd:[{required:!0,message:"请输入新增手井数",trigger:"blur"},{type:"number",message:"请输入数字(限数字),",trigger:"blur"}]}}},computed:{computedPipeKilometreSum:function(){return this.historyTotalForm.pipeKilometreSum+this.newForm.pipeKilometreAdd},computedPipeHoleKilometreSum:function(){return this.historyTotalForm.pipeHoleKilometreSum+this.newForm.pipeHoleKilometreAdd},computedPersonWellSum:function(){return this.historyTotalForm.personWellSum+this.newForm.personWellAdd},computedHandWellSum:function(){return this.historyTotalForm.handWellSum+this.newForm.handWellAdd}},methods:{openDialog:function(e){var t=this;return Object(i.a)(Object(r.a)().mark((function a(){var i,n,o,s,c,u,m,d,p,f;return Object(r.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.resourceId=e.id,a.prev=1,a.next=4,Object(l.ld)({date:e.reportDateBegin});case 4:i=a.sent,n=i.data,o=n.pipeKilometreSum,s=n.pipeHoleKilometreSum,c=n.personWellSum,u=n.handWellSum,m=e.pipeKilometreAdd,d=e.pipeHoleKilometreAdd,p=e.personWellAdd,f=e.handWellAdd,t.newForm={pipeKilometreAdd:m,pipeHoleKilometreAdd:d,personWellAdd:p,handWellAdd:f},t.historyTotalForm={pipeKilometreSum:o,pipeHoleKilometreSum:s,personWellSum:c,handWellSum:u},a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),t.$message.error("获取历史数据失败");case 14:t.dialogFormVisible=!0;case 15:case"end":return a.stop()}}),a,null,[[1,11]])})))()},computedTotal:function(){this.computedTotalStatus=!0},closeDialog:function(){this.resetForm(),this.resourceId=null,this.dialogFormVisible=!1,this.computedTotalStatus=!1},resetForm:function(){this.newForm={pipeKilometreAdd:null,pipeHoleKilometreAdd:null,personWellAdd:null,handWellAdd:null},this.historyTotalForm={pipeKilometreSum:null,pipeHoleKilometreSum:null,personWellSum:null,handWellSum:null},this.$refs.newFormRef.resetFields()},submitForm:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.computedTotalStatus){t.next=2;break}return t.abrupt("return",e.$message.error("提交前请先点击 计算历史总数"));case 2:return t.next=4,e.$refs.newFormRef.validate();case 4:return a=Object.assign({id:e.resourceId,pipeKilometreSum:e.computedPipeKilometreSum,pipeHoleKilometreSum:e.computedPipeHoleKilometreSum,personWellSum:e.computedPersonWellSum,handWellSum:e.computedHandWellSum,status:1},e.newForm),t.prev=5,t.next=8,Object(l.Oc)(a);case 8:e.$message.success("编辑成功"),e.closeDialog(),e.$emit("reload"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(5),e.$message.error("编辑失败"),e.computedTotalStatus=!1;case 17:case"end":return t.stop()}}),t,null,[[5,13]])})))()}}},o=(a("d8bb"),a("2877")),s=Object(o.a)(n,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"编辑",visible:e.dialogFormVisible,"destroy-on-close":""},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.closeDialog}},[t("h3",{staticClass:"h3-title"},[e._v("历史总数")]),t("el-form",{ref:"historyTotalFormRef",attrs:{model:e.historyTotalForm,inline:""}},[t("div",{staticStyle:{"padding-left":"50px"}},[t("el-form-item",{staticStyle:{"margin-right":"40px"},attrs:{prop:"pipeKilometreSum"}},[t("g-input-prepend",{attrs:{"prepend-title":"总管程公里数：",disabled:""},model:{value:e.historyTotalForm.pipeKilometreSum,callback:function(t){e.$set(e.historyTotalForm,"pipeKilometreSum",e._n(t))},expression:"historyTotalForm.pipeKilometreSum"}})],1),t("el-form-item",{staticStyle:{"margin-right":"40px"},attrs:{prop:"pipeHoleKilometreSum"}},[t("g-input-prepend",{attrs:{"prepend-title":"总管孔公里数：",disabled:""},model:{value:e.historyTotalForm.pipeHoleKilometreSum,callback:function(t){e.$set(e.historyTotalForm,"pipeHoleKilometreSum",e._n(t))},expression:"historyTotalForm.pipeHoleKilometreSum"}})],1),t("el-form-item",{staticStyle:{"margin-right":"40px"},attrs:{prop:"personWellSum"}},[t("g-input-prepend",{attrs:{"prepend-title":"总人井数：",disabled:""},model:{value:e.historyTotalForm.personWellSum,callback:function(t){e.$set(e.historyTotalForm,"personWellSum",e._n(t))},expression:"historyTotalForm.personWellSum"}})],1),t("el-form-item",{staticStyle:{"margin-right":"40px"},attrs:{prop:"handWellSum"}},[t("g-input-prepend",{attrs:{"prepend-title":"总手井数：",disabled:""},model:{value:e.historyTotalForm.handWellSum,callback:function(t){e.$set(e.historyTotalForm,"handWellSum",e._n(t))},expression:"historyTotalForm.handWellSum"}})],1)],1)]),t("h3",{staticClass:"h3-title"},[e._v("本周新增")]),t("el-form",{ref:"newFormRef",attrs:{model:e.newForm,inline:"",rules:e.rules}},[t("div",{staticStyle:{"padding-left":"50px"}},[t("el-form-item",{staticStyle:{"margin-right":"40px"},attrs:{prop:"pipeKilometreAdd"}},[t("g-input-prepend",{attrs:{"prepend-title":"管程公里数："},model:{value:e.newForm.pipeKilometreAdd,callback:function(t){e.$set(e.newForm,"pipeKilometreAdd",e._n(t))},expression:"newForm.pipeKilometreAdd"}})],1),t("el-form-item",{staticStyle:{"margin-right":"40px"},attrs:{prop:"pipeHoleKilometreAdd"}},[t("g-input-prepend",{attrs:{"prepend-title":"管孔公里数："},model:{value:e.newForm.pipeHoleKilometreAdd,callback:function(t){e.$set(e.newForm,"pipeHoleKilometreAdd",e._n(t))},expression:"newForm.pipeHoleKilometreAdd"}})],1),t("el-form-item",{staticStyle:{"margin-right":"40px"},attrs:{prop:"personWellAdd"}},[t("g-input-prepend",{attrs:{"prepend-title":"人井数"},model:{value:e.newForm.personWellAdd,callback:function(t){e.$set(e.newForm,"personWellAdd",e._n(t))},expression:"newForm.personWellAdd"}})],1),t("el-form-item",{staticStyle:{"margin-right":"40px"},attrs:{prop:"handWellAdd"}},[t("g-input-prepend",{attrs:{"prepend-title":"手井数"},model:{value:e.newForm.handWellAdd,callback:function(t){e.$set(e.newForm,"handWellAdd",e._n(t))},expression:"newForm.handWellAdd"}})],1)],1)]),t("div",{staticStyle:{"text-align":"right"}},[t("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-thumb"},on:{click:e.computedTotal}},[e._v("计算历史总数")])],1),t("h3",{staticClass:"h3-title"},[e._v("计算后的历史总数")]),t("el-collapse-transition",[e.computedTotalStatus?t("el-form",{ref:"historyTotalFormRef",attrs:{model:e.historyTotalForm,inline:""}},[t("div",{staticStyle:{"padding-left":"50px"}},[t("el-form-item",{staticStyle:{"margin-right":"40px"},attrs:{prop:"pipeKilometreSum"}},[t("g-input-prepend",{attrs:{"prepend-title":"总管程公里数：",disabled:""},model:{value:e.computedPipeKilometreSum,callback:function(t){e.computedPipeKilometreSum=e._n(t)},expression:"computedPipeKilometreSum"}})],1),t("el-form-item",{staticStyle:{"margin-right":"40px"},attrs:{prop:"pipeHoleKilometreSum"}},[t("g-input-prepend",{attrs:{"prepend-title":"总管孔公里数：",disabled:""},model:{value:e.computedPipeHoleKilometreSum,callback:function(t){e.computedPipeHoleKilometreSum=e._n(t)},expression:"computedPipeHoleKilometreSum"}})],1),t("el-form-item",{staticStyle:{"margin-right":"40px"},attrs:{prop:"personWellSum"}},[t("g-input-prepend",{attrs:{"prepend-title":"总人井数：",disabled:""},model:{value:e.computedPersonWellSum,callback:function(t){e.computedPersonWellSum=e._n(t)},expression:"computedPersonWellSum"}})],1),t("el-form-item",{staticStyle:{"margin-right":"40px"},attrs:{prop:"handWellSum"}},[t("g-input-prepend",{attrs:{"prepend-title":"总手井数：",disabled:""},model:{value:e.computedHandWellSum,callback:function(t){e.computedHandWellSum=e._n(t)},expression:"computedHandWellSum"}})],1)],1)]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)}),[],!1,null,"2b30f68a",null).exports,c=a("21f4"),u=a("5a0c"),m=a.n(u),d={components:{"resource-dialog":s},data:function(){return{tableColumn:[{id:1,props:"reportDateBegin",label:"周报起始时间",width:"50"},{id:2,props:"reportDateEnd",label:"周报结束时间",width:"50"},{id:3,props:"pipeKilometreSum",label:"总管程公里数",width:"50"},{id:4,props:"pipeHoleKilometreSum",label:"总管孔公里数",width:"50"},{id:5,props:"personWellSum",label:"总人井数",width:"50"},{id:6,props:"handWellSum",label:"总手井数",width:"50"},{id:7,props:"status",label:"状态",width:"50"},{id:8,props:"reporter",label:"汇报人",width:"50"},{id:9,props:"commitTime",label:"提交时间",width:"50"}],itemKey:Math.random(),resourceTableData:[],currentPage:1,pageSize:10,pageCount:0,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},searchTime:null,searchForm:{reportDateBegin:null,reportDateEnd:null},histroyData:[],expands:[],getRowKeys:function(e){return e.id}}},watch:{searchTime:{deep:!0,handler:function(e){null===e?(this.searchForm.reportDateBegin=null,this.searchForm.reportDateEnd=null):(this.searchForm.reportDateBegin=e[0],this.searchForm.reportDateEnd=e[1])}}},created:function(){this.getList()},mounted:function(){},methods:{getList:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a,i,n;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$loading({lock:!0,text:"正在加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),e.histroyData=[],i=Object.assign({pageIndex:e.currentPage,pageSize:e.pageSize},e.searchForm),t.next=5,Object(l.jd)(i);case 5:n=t.sent,a.close(),"加载成功"===n.resultMsg?(e.resourceTableData=n.data,e.pageCount=n.totalPages):e.$message.error("加载数据失败");case 8:case"end":return t.stop()}}),t)})))()},handleCurrentChange:function(e){this.currentPage=e,this.getList()},editResource:function(e){this.$refs.resourceDialogRef.openDialog(e)},deletResourceReport:function(e){var t=this;return Object(i.a)(Object(r.a)().mark((function a(){return Object(r.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(l.cb)(e);case 2:t.getList();case 3:case"end":return a.stop()}}),a)})))()},addResource:function(){this.$refs.resourceDialogRef.openDialog()},sumitSearchForm:function(){this.getList()},resetSearch:function(){this.searchTime=null,this.currentPage=1,this.getList()},exportResourceList:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.id)(e.searchForm);case 2:a=t.sent,Object(c.b)(a.data,"资源汇报列表.xls");case 4:case"end":return t.stop()}}),t)})))()},expandChange:function(e,t){var a=this;return Object(i.a)(Object(r.a)().mark((function i(){var n,o;return Object(r.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t.length<=0)){r.next=3;break}return a.expands=[],r.abrupt("return");case 3:return n=a.resourceTableData.findIndex((function(t){return t.id===e.id})),r.next=6,Object(l.kd)({id:e.id});case 6:"处理成功"===(o=r.sent).resultMsg?(a.histroyData[n]=o.data,a.itemKey=Math.random(),a.expands=[],a.expands.push(e.id)):a.$message.error("加载历史数据失败");case 8:case"end":return r.stop()}}),i)})))()},dateFormat:function(e,t){return"reportDateBegin"===t.property||"reportDateEnd"===t.property||"commitTime"===t.property?m()(e[t.property]).format("YYYY-MM-DD"):"status"===t.property?1===e[t.property]?"审核中":2===e[t.property]?"审核通过":"审核不通过":e[t.property]}}},p=(a("8fb2"),Object(o.a)(d,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"content"},[t("page-main",[t("g-page-lable",{scopedSlots:e._u([{key:"left",fn:function(){return[t("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.searchTime,callback:function(t){e.searchTime=t},expression:"searchTime"}}),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.sumitSearchForm}},[e._v("查询")]),t("el-button",{attrs:{plain:""},on:{click:e.resetSearch}},[e._v("重置")])]},proxy:!0},{key:"right",fn:function(){return[t("el-button",{attrs:{type:"primary"},on:{click:e.exportResourceList}},[e._v(" 导出 ")])]},proxy:!0}])})],1),t("page-main",[t("el-table",{ref:"tableRef",staticStyle:{width:"100%"},attrs:{data:e.resourceTableData,border:"",fit:"","row-key":e.getRowKeys,"expand-row-keys":e.expands,"highlight-current-row":""},on:{"expand-change":e.expandChange}},[t("el-table-column",{attrs:{type:"expand",label:"展开系统数据",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){var r,i,l,n;return[e.histroyData[a.$index]?t("el-form",{key:e.itemKey,staticStyle:{"padding-left":"100px"},attrs:{"label-position":"right","label-width":"120px"}},[t("el-form-item",{attrs:{label:"总管程公里数："}},[t("span",[e._v(e._s(null===(r=e.histroyData[a.$index])||void 0===r?void 0:r.pipeKilometreTotal))])]),t("el-form-item",{attrs:{label:"总管孔公里数："}},[t("span",[e._v(e._s(null===(i=e.histroyData[a.$index])||void 0===i?void 0:i.pipeHoleKilometreTotal))])]),t("el-form-item",{attrs:{label:"总人井数："}},[t("span",[e._v(e._s(null===(l=e.histroyData[a.$index])||void 0===l?void 0:l.personWellTotal))])]),t("el-form-item",{attrs:{label:"总手井数："}},[t("span",[e._v(e._s(null===(n=e.histroyData[a.$index])||void 0===n?void 0:n.handWellTotal))])])],1):e._e()]}}])}),e._l(e.tableColumn,(function(a){return t("el-table-column",{key:a.id,attrs:{prop:a.props,label:a.label,"min-width":a.width,formatter:e.dateFormat}})})),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[1===a.row.status?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.editResource(a.row)}}},[e._v(" 编辑 ")]):e._e(),t("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{confirm:function(t){return e.deletResourceReport(a.row.id)}}},[t("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[e._v(" 删除 ")])],1)]}}])})],2),t("div",{staticClass:"pagenation"},[t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total,prev, pager, next, jumper","page-count":e.pageCount},on:{"current-change":e.handleCurrentChange}})],1)],1),t("resource-dialog",{ref:"resourceDialogRef",on:{reload:e.getList}})],1)}),[],!1,null,"6a2d6322",null));t.default=p.exports},"18c3":function(e,t,a){"use strict";a.r(t);var r=a("5530"),i=a("c7eb"),l=a("1da1"),n=(a("14d9"),a("365c")),o={filters:{statusReview:function(e){return{2:"复核通过",1:"复核不通过",3:"待复核"}[e]||"正常"},statustype:function(e){return{1:"一次性连接费用",2:"租金"}[e]||""}},data:function(){return{deletAudit:{id:null,contractNo:null,remarkReview:"",statusReview:2},isAudited:!1,status:1,value1:"",dialogdelet:!1,dialogFormVisible:!1,fileList:[],form1:{money:"",week:"",way:""},value:"",value3:"",options1:[{id:0,name:"已签订"},{id:1,name:"待签定"},{id:3,name:"未签订"}],payList:[],tableData:[{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}],url:"",options2:[{id:1,label:"待发起"},{id:2,label:"OA走流程"},{id:3,label:"等待对方盖章"},{id:4,label:"已签订"},{id:5,label:"已终止"}],tableColumn:[],gridData:[],rules:{signatureTime:[{required:!0,message:"请输入签订时间",trigger:"blur"}],contractNo:[{required:!0,message:"请输入合同编号",trigger:"blur"}],contractName:[{required:!0,message:"请输入合同名称",trigger:"blur"}],signatureUnit:[{required:!0,message:"请输入签署单位",trigger:"blur"}],signatureTimeBegin:[{required:!0,message:"请输入生效日期",trigger:"blur"}],signatureTimeEnd:[{required:!0,message:"请输入到期日期",trigger:"blur"}],extensionContractNo:[{required:!0,message:"请输入续签合同号",trigger:"blur"}]},rulesdelet:{remarkReview:[{required:!0,message:"请输入删除理由",trigger:"blur"}]},resourceTableData:[],currentPage:1,pageSize:10,total:100,disabled:!1,value2:null,size:"",editMode:!1,addMode:!1,signatureTime:[],paremts:{},contractNo:null,statusExpire:1,statusContract:5,type:null}},computed:{},watch:{"$route.query.contractNo":{handler:function(){var e=this;return Object(l.a)(Object(i.a)().mark((function t(){var a;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$route.query.id){t.next=8;break}return t.next=3,Object(n.O)({id:e.$route.query.id});case 3:a=t.sent,e.paremts=a.data,e.contractNo=e.$route.query.contractNo,e.contractInfofindApi();case 8:case"end":return t.stop()}}),t)})))()},immediate:!0}},created:function(){},methods:{handleAudit:function(){this.isAudited||(this.isAudited=!0)},handlefilePaymentClick:function(e){if(e.filePayment){var t=e.filePayment;window.open(t,"_blank")}},handleButtonClick:function(e){if(e.fileCollection){var t=e.fileCollection;window.open(t,"_blank")}},dialogCancel:function(e){this.$refs[e].clearValidate(),this.dialogdelet=!1},collectionPlaneditApi:function(){var e=this;return Object(l.a)(Object(i.a)().mark((function t(){return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(n.C)(Object(r.a)({},e.deletAudit));case 3:e.contractInfofindApi(),e.dialogdelet=!1,e.deletAudit={},e.$message({message:"提交成功",type:"success"}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},handleCellClick:function(e,t){if("fileCollection"===t.property){var a=e.fileCollection;window.open(a,"_blank")}},dialogconfire:function(e){var t=this;"1"==this.deletAudit.statusReview?this.$refs[e].validate((function(e){e&&t.collectionPlaneditApi()})):this.collectionPlaneditApi()},contractInfoApi:function(){return Object(l.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.N)();case 2:case"end":return e.stop()}}),e)})))()},contractInfofindApi:function(){var e=this;return Object(l.a)(Object(i.a)().mark((function t(){var a,r,l,o;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$loading({lock:!0,text:"正在加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),r={pageIndex:e.currentPage,pageSize:e.pageSize,contractNo:e.contractNo},l="1"==e.$route.query.type?n.K:n.Mc,t.next=5,l(r);case 5:o=t.sent,a.close(),"加载成功"===o.resultMsg?("1"==e.$route.query.type?e.tableColumn=o.data:e.gridData=o.data,e.total=o.count,e.pageCount=o.totalPages):e.$message.error("加载数据失败");case 9:case"end":return t.stop()}}),t)})))()},detail:function(e){this.$router.push({path:"collectionsReport/detail",query:{id:e.id}})},goBack:function(){this.$router.back()},handleClick:function(e){this.deletAudit.id=e.id,this.deletAudit.contractNo=e.contractNo,this.dialogdelet=!0},handleRemove:function(e){},handleDownload:function(e){},delet:function(e){this.deletAudit.id=e.id,this.dialogdelet=!0},handleCurrentChange:function(e){this.currentPage=e},changePage:function(){var e=this;return Object(l.a)(Object(i.a)().mark((function t(){var a;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.$loading({lock:!0,text:"正在加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),setTimeout((function(){a.close()}),1e3);case 2:case"end":return t.stop()}}),t)})))()}}},s=(a("ab3a"),a("2877")),c=Object(s.a)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"content"},[t("el-page-header",{on:{back:e.goBack}}),t("g-page-lable",{scopedSlots:e._u([{key:"left",fn:function(){return[t("div",{staticClass:"payoutitle"},[e._v("合同基础信息")]),t("el-form",{attrs:{inline:!0}},[t("el-form-item",{attrs:{label:"合同名称:"}},[t("el-input",{attrs:{disabled:!0,clearable:""},model:{value:e.paremts.contractName,callback:function(t){e.$set(e.paremts,"contractName",t)},expression:"paremts.contractName"}})],1),t("el-form-item",{staticStyle:{"margin-left":"8px"},attrs:{label:"签署单位:"}},[t("el-input",{attrs:{disabled:!0,clearable:""},model:{value:e.paremts.signatureUnit,callback:function(t){e.$set(e.paremts,"signatureUnit",t)},expression:"paremts.signatureUnit"}})],1),t("el-form-item",{staticStyle:{"margin-left":"8px"},attrs:{label:"签订时间:"}},[t("el-date-picker",{attrs:{disabled:!0,type:"date"},model:{value:e.paremts.signatureTime,callback:function(t){e.$set(e.paremts,"signatureTime",t)},expression:"paremts.signatureTime"}})],1),t("el-form-item",{staticStyle:{"margin-left":"8px"},attrs:{label:"合同状态:"}},[t("el-select",{attrs:{disabled:!0},model:{value:e.paremts.statusContract,callback:function(t){e.$set(e.paremts,"statusContract",t)},expression:"paremts.statusContract"}},e._l(e.options2,(function(e){return t("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),t("el-form-item",{staticStyle:{"margin-left":"8px"},attrs:{label:"合同编号:"}},[t("el-input",{attrs:{disabled:!0,clearable:""},model:{value:e.paremts.contractNo,callback:function(t){e.$set(e.paremts,"contractNo",t)},expression:"paremts.contractNo"}})],1),t("el-form-item",{attrs:{label:"管控公里数:"}},[t("el-input",{attrs:{disabled:!0,clearable:""},model:{value:e.paremts.pipeHoleKilometre,callback:function(t){e.$set(e.paremts,"pipeHoleKilometre",t)},expression:"paremts.pipeHoleKilometre"}})],1),t("el-form-item",{staticStyle:{"margin-left":"8px"},attrs:{label:"租用管控公里数:"}},[t("el-input",{attrs:{disabled:!0,clearable:""},model:{value:e.paremts.pipeHoleSubKilometre,callback:function(t){e.$set(e.paremts,"pipeHoleSubKilometre",t)},expression:"paremts.pipeHoleSubKilometre"}})],1),t("el-form-item",{staticStyle:{"margin-left":"8px"},attrs:{label:"租期:"}},[t("el-input",{staticStyle:{width:"180px"},attrs:{disabled:!0,clearable:""},model:{value:e.paremts.tenancyTerm,callback:function(t){e.$set(e.paremts,"tenancyTerm",t)},expression:"paremts.tenancyTerm"}})],1),t("el-form-item",{staticStyle:{"margin-left":"8px"},attrs:{label:"合同金额:"}},[t("el-input",{staticStyle:{width:"180px"},attrs:{disabled:!0,clearable:""},model:{value:e.paremts.moneyTotal,callback:function(t){e.$set(e.paremts,"moneyTotal",t)},expression:"paremts.moneyTotal"}})],1),t("el-form-item",{staticStyle:{"margin-left":"8px"},attrs:{label:"一次性接入费用:"}},[t("el-input",{staticStyle:{width:"180px"},attrs:{disabled:!0,clearable:""},model:{value:e.paremts.onceConnectionFee,callback:function(t){e.$set(e.paremts,"onceConnectionFee",t)},expression:"paremts.onceConnectionFee"}})],1),t("el-form-item",{attrs:{label:"结算周期:"}},[t("el-input",{staticStyle:{width:"180px"},attrs:{disabled:!0,clearable:""},model:{value:e.paremts.settlementInterval,callback:function(t){e.$set(e.paremts,"settlementInterval",t)},expression:"paremts.settlementInterval"}})],1),t("el-form-item",{staticStyle:{"margin-left":"8px"},attrs:{label:"合同有效时间:"}},[t("el-date-picker",{attrs:{disabled:!0,"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":e.paremts.signatureTimeBegin,"end-placeholder":e.paremts.signatureTimeEnd},model:{value:e.signatureTime,callback:function(t){e.signatureTime=t},expression:"signatureTime"}})],1)],1)]},proxy:!0}])}),"1"==e.$route.query.type?t("div",[t("div",{staticClass:"payoutitle"},[e._v("收款信息")]),t("div",{staticStyle:{"overflow-x":"auto"}},[t("el-table",{ref:"tableRef",staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.tableColumn,border:"","row-key":"id"},on:{"cell-click":e.handleCellClick}},[t("el-table-column",{attrs:{label:"序号",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.id)+" ")]}}],null,!1,3280815794)}),t("el-table-column",{attrs:{prop:"monthBegin",label:"收款开始日期",width:"120"}}),t("el-table-column",{attrs:{prop:"monthEnd",label:"收款截止日期",width:"120"}}),t("el-table-column",{attrs:{prop:"collectionDatePlan",label:"计划收款日期",width:"120"}}),t("el-table-column",{attrs:{prop:"moneyReceivable",label:"应收款金额(元)",width:"200"}}),t("el-table-column",{attrs:{prop:"moneyInvoice",label:"开票金额(元)",width:"120"}}),t("el-table-column",{attrs:{prop:"signatureTimeBegin",label:"发票",width:"200"}}),t("el-table-column",{attrs:{prop:"moneyActual",label:"实收金额",width:"200"}}),t("el-table-column",{attrs:{label:"收款凭证",width:"200","row-click":""},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.fileCollection?t("el-button",{staticClass:"see",attrs:{type:"primary"},on:{click:function(t){return e.handleButtonClick(a.row)}}},[e._v(" 点击查看凭证 ")]):t("div",[e._v("暂无凭证")])]}}],null,!1,243883711)}),t("el-table-column",{attrs:{prop:"statusReview",label:"复核状态",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("statusReview")(a.statusReview))+" ")]}}],null,!1,3592140358)}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleClick(r)}}},[e._v("复核")])]}}],null,!1,3372856014)})],1)],1)]):t("div",[t("div",{staticClass:"payoutitle"},[e._v("付款信息")]),t("div",{staticStyle:{"overflow-x":"auto"}},[t("el-table",{ref:"tableRef",staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.gridData,border:"","row-key":"id"},on:{"cell-click":e.handleCellClick}},[t("el-table-column",{attrs:{label:"序号",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.id)+" ")]}}])}),t("el-table-column",{attrs:{prop:"paymentDatePlan",label:"计划付款日期",width:"120"}}),t("el-table-column",{attrs:{prop:"moneyPayable",label:"应付款金额(元)",width:"200"}}),t("el-table-column",{attrs:{prop:"moneyInvoice",label:"开票金额(元)",width:"120"}}),t("el-table-column",{attrs:{prop:"signatureTimeBegin",label:"发票",width:"200"}}),t("el-table-column",{attrs:{prop:"moneyActual",label:"实收金额",width:"200"}}),t("el-table-column",{attrs:{label:"付款凭证",width:"200","row-click":""},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.filePayment?t("el-button",{staticClass:"see",attrs:{type:"primary"},on:{click:function(t){return e.handlefilePaymentClick(a.row)}}},[e._v(" 点击查看凭证 ")]):t("div",[e._v("暂无凭证")])]}}])}),t("el-table-column",{attrs:{prop:"statusReview",label:"复核状态",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("statusReview")(a.statusReview))+" ")]}}])}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleClick(r)}}},[e._v("复核")])]}}])})],1)],1)]),t("div",{staticClass:"pagenation"},[t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total,prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:"1"==e.$route.query.type?"收款审核":"付款审核",visible:e.dialogdelet,width:"35%"},on:{"update:visible":function(t){e.dialogdelet=t}}},[t("div",{staticClass:"dialogradio"},[t("el-radio-group",{model:{value:e.deletAudit.statusReview,callback:function(t){e.$set(e.deletAudit,"statusReview",t)},expression:"deletAudit.statusReview"}},[t("el-radio",{attrs:{label:2}},[e._v("审核通过")]),t("el-radio",{attrs:{label:1}},[e._v("审核不通过")])],1)],1),t("el-form",{directives:[{name:"show",rawName:"v-show",value:"1"==e.deletAudit.statusReview,expression:"deletAudit.statusReview == '1'"}],ref:"deletAudit",attrs:{inline:!0,rules:e.rulesdelet,model:e.deletAudit,"label-width":"auto"}},[t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{prop:"remarkReview",label:""}},[t("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",rows:4,placeholder:"不通过理由",clearable:""},model:{value:e.deletAudit.remarkReview,callback:function(t){e.$set(e.deletAudit,"remarkReview",t)},expression:"deletAudit.remarkReview"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dialogconfire("deletAudit")}}},[e._v("提交")]),t("el-button",{on:{click:function(t){return e.dialogCancel("deletAudit")}}},[e._v("取 消")])],1)],1)],1)}),[],!1,null,"51feb58d",null);t.default=c.exports},"1ce4":function(e,t,a){"use strict";a.r(t);a("a9e3");var r=a("c7eb"),i=a("1da1"),l=(a("d81d"),a("b680"),a("b64b"),a("d3b7"),a("25f0"),a("365c")),n={name:"SmallTitle",props:{title:{type:String,default:""}},data:function(){return{}}},o=(a("9972"),a("2877")),s=Object(o.a)(n,(function(){var e=this._self._c;return e("div",{staticStyle:{"margin-bottom":"10px"}},[e("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:a("d5c4"),alt:""}}),e("span",{staticClass:"title"},[this._v(this._s(this.title))])])}),[],!1,null,"3f8b07ff",null).exports,c=(a("159b"),{props:{selectTabsValue:{type:String,default:"item1"}},data:function(){return{}},watch:{"$store.state.settings.sidebarCollapse":{handler:function(){this.$store.state.settings.sidebarCollapse?this.$refs.tabsRef.$el.style.left="60px":this.$refs.tabsRef.$el.style.left="220px"}}},mounted:function(){this.reloadIsSideBarCollapse(),this.startlistenScroll()},methods:{reloadIsSideBarCollapse:function(){this.$store.state.settings.sidebarCollapse?this.$refs.tabsRef.$el.style.left="60px":this.$refs.tabsRef.$el.style.left="220px"},clickTab:function(e){var t=this,a=e.index;this.selectTabsValueStatus=!0,document.querySelectorAll(".tabRef")[a].scrollIntoView({behavior:"smooth",block:"start",alignToTop:!0}),setTimeout((function(){t.selectTabsValueStatus=!1}),500)},listenWindowScroll:function(){if(!this.selectTabsValueStatus){var e=this,t=document.querySelectorAll(".tabRef"),a=document.documentElement.scrollTop||document.body.scrollTop;t.forEach((function(t,r){var i=t.offsetTop,l=t.offsetHeight;if(a>=i&&a<=i+l){var n="item"+(r+1);e.$emit("change",n)}}))}},startlistenScroll:function(){window.addEventListener("scroll",this.listenWindowScroll)}}}),u=(a("c93b"),Object(o.a)(c,(function(){var e=this._self._c;return e("el-tabs",{ref:"tabsRef",staticClass:"tabs-fix",attrs:{value:this.selectTabsValue,"tab-position":"left"},on:{"tab-click":this.clickTab}},[e("el-tab-pane",{attrs:{label:"合同情况",name:"item1"}}),e("el-tab-pane",{attrs:{label:"年度指标",name:"item2"}}),e("el-tab-pane",{attrs:{label:"收款情况",name:"item3"}}),e("el-tab-pane",{attrs:{label:"资源情况",name:"item4"}}),e("el-tab-pane",{attrs:{label:"维修情况",name:"item5"}}),e("el-tab-pane",{attrs:{label:"备件情况",name:"item6"}}),e("el-tab-pane",{attrs:{label:"事项跟进情况",name:"item7"}})],1)}),[],!1,null,"06f28c2a",null).exports),m=a("ec1b"),d=a.n(m),p=a("f7fe"),f=a.n(p),b=a("c0e9"),h=a.n(b),g=a("8baf"),v={getPdf:function(e){h()(document.querySelector("#pdfDom"),{allowTaint:!1,taintTest:!1,logging:!1,useCORS:!0,dpi:4*window.devicePixelRatio,scale:4}).then((function(t){for(var a=new g.a("p","mm","a4"),r=t.getContext("2d"),i=Math.floor(277*t.width/190),l=0;l<t.height;){var n=document.createElement("canvas");n.width=t.width,n.height=Math.min(i,t.height-l),n.getContext("2d").putImageData(r.getImageData(0,l,t.width,Math.min(i,t.height-l)),0,0),a.addImage(n.toDataURL("image/jpeg",1),"JPEG",10,10,190,Math.min(277,190*n.height/n.width)),(l+=i)<t.height&&a.addPage()}a.save(e+".pdf")}))}},y=a("313e"),x={data:function(){return{}},computed:{},created:function(){},mounted:function(){},methods:{contractDateFormat:function(e,t){if("statusContract"!==t.property)return e[t.property];switch(e[t.property]){case 1:return"待发起";case 2:return"OA走流程";case 3:return"等待对方盖章";case 4:return"已签订";case 5:return"已终止"}},collectionDateFormat:function(e,t){if("dimensionality"!==t.property)return e[t.property];switch(Number(e[t.property])){case 1:return"即将到期";case 2:return"到期未开票";case 3:return"未开票待收款";case 4:return"未开票未收款";case 5:return"已开票待收款";case 6:return"已开票未收款";case 7:return"已完成"}},itemDateFormat:function(e,t){return"updateTime"===t.property?this.$dayjs(e[t.property]).format("YYYY-MM-DD"):e[t.property]}}},k={name:"Index",components:{countTo:d.a,smallTitle:s,elevatorTabs:u},mixins:[x,{data:function(){return{contractTableDataList:[],contractTableHead:[{prop:"signatureUnit",label:"使用方",width:"180"},{prop:"contractNo",label:"合同编号",width:"180"},{prop:"contractName",label:"合同名称",width:"180"},{prop:"statustype",label:"类型",width:"180"},{prop:"statusContract",label:"当前进度",width:"180"},{prop:"typeProgress",label:"进度类型",width:"180"}],collectionTableDataList:[],collectionTableHead:[{prop:"dimensionality",label:"维度",width:"180"},{prop:"contractNum",label:"合同数量",width:"180"},{prop:"money",label:"金额(¥):万元",width:"180"},{prop:"moneyAffiliation2024",label:"归属今年年应收",width:"180"},{prop:"moneyAffiliation2025",label:"归属明年年应收",width:"180"}],previousWeekProgressDataList:[],previousWeekProgressTableHead:[{prop:"signatureUnit",label:"使用方",width:"180"},{prop:"contractNum",label:"合同数量",width:"180"},{prop:"result",label:"上周进度说明",width:"180"}],sparePartsTableDataList:[{name:"123456789",storeNumber:"123456789",operationTypeOutput:"123456789",numberOutput:"1234",operationTypeInput:"123456789",numberInput:"1234"},{name:"123456789",storeNumber:"123456789",operationTypeOutput:"123456789",numberOutput:"1234",operationTypeInput:"123456789",numberInput:"1234"},{name:"123456789",storeNumber:"123456789",operationTypeOutput:"123456789",numberOutput:"1234",operationTypeInput:"123456789",numberInput:"1234"},{name:"123456789",storeNumber:"123456789",operationTypeOutput:"123456789",numberOutput:"1234",operationTypeInput:"123456789",numberInput:"1234"},{name:"123456789",storeNumber:"123456789",operationTypeOutput:"123456789",numberOutput:"1234",operationTypeInput:"123456789",numberInput:"1234"}],sparePartsReportTableHead:[{prop:"name",label:"备件名称",width:"180"},{prop:"storeNumber",label:"库存",width:"180"},{prop:"operationTypeOutput",label:"操作类型",width:"180"},{prop:"numberOutput",label:"数量",width:"180"},{prop:"operationTypeInput",label:"操作类型",width:"180"},{prop:"numberInput",label:"数量",width:"180"}],itemTableDataList:[],itemTableHead:[{prop:"matterDescribe",label:"事项内容",width:"180"},{prop:"followCase",label:"进度描述",width:"180"},{prop:"followPerson",label:"跟进人",width:"180"},{prop:"updateTime",label:"更新时间",width:"180"}]}},computed:{},created:function(){},mounted:function(){},methods:{}}],data:function(){return{yearchart1:null,yearchart2:null,yearchart3:null,yearchart4:null,yearchart5:null,yearchart6:null,yearKpiEchart:null,observer:null,selectTabsValue:"item1",selectTabsValueStatus:!1,weeklyReportTimeBegin:null,weeklyReportTimeEnd:null,contractCase:null,collectionProgress:null,resourceCaseData:null,spareartData:null,itemTableData:null}},created:function(){this.getdateWeekRangTime()},mounted:function(){this.initrepairEchart(),this.getWeeklyReport(),this.startlisten(),this.getdateWeekRangTime(),window.scrollTo(0,0)},beforeDestroy:function(){this.observer.disconnect()},methods:{echartResizeALL:function(){var e,t,a,r,i,l,n;null===(e=this.yearchart1)||void 0===e||e.resize(),null===(t=this.yearchart2)||void 0===t||t.resize(),null===(a=this.yearchart3)||void 0===a||a.resize(),null===(r=this.yearchart4)||void 0===r||r.resize(),null===(i=this.yearchart5)||void 0===i||i.resize(),null===(l=this.yearchart6)||void 0===l||l.resize(),null===(n=this.yearKpiEchart)||void 0===n||n.resize()},exportWeekReport:function(){v.getPdf("周报汇总")},initYearTargetChart1:function(){this.yearchart1=y.init(document.getElementById("yearchart1"));var e={title:{text:"完成度 \n\n ".concat((this.addContractData[0]/this.addContractData[1]*100).toFixed(2),"%"),x:"center",y:"center",textStyle:{fontWeight:"normal",color:"#0580f2",fontSize:"25"}},color:["rgba(176, 212, 251, 1)"],legend:{show:!1,itemGap:12,data:["01","02"]},series:[{name:"Line 1",type:"pie",clockWise:!0,radius:["50%","66%"],itemStyle:{normal:{label:{show:!1},labelLine:{show:!1}}},hoverAnimation:!1,data:[{value:this.addContractData[0],name:"01",itemStyle:{normal:{color:{colorStops:[{offset:0,color:"#00cefc"},{offset:1,color:"#367bec"}]},label:{show:!1},labelLine:{show:!1}}}},{name:"02",value:this.addContractData[1]-this.addContractData[0]}]}]};this.yearchart1.setOption(e)},initYearTargetChart2:function(){this.yearchart2=y.init(document.getElementById("yearchart2"));var e={title:{text:"完成度 \n\n ".concat((this.countRenewalRateData[0]/this.countRenewalRateData[1]*100).toFixed(2),"%"),x:"center",y:"center",textStyle:{fontWeight:"normal",color:"#0580f2",fontSize:"25"}},color:["rgba(176, 212, 251, 1)"],legend:{show:!1,itemGap:12,data:["01","02"]},series:[{name:"Line 1",type:"pie",clockWise:!0,radius:["50%","66%"],itemStyle:{normal:{label:{show:!1},labelLine:{show:!1}}},hoverAnimation:!1,data:[{value:this.countRenewalRateData[0],name:"01",itemStyle:{normal:{color:{colorStops:[{offset:0,color:"#00cefc"},{offset:1,color:"#367bec"}]},label:{show:!1},labelLine:{show:!1}}}},{name:"02",value:this.countRenewalRateData[1]-this.countRenewalRateData[0]}]}]};this.yearchart2.setOption(e)},initYearTargetChart3:function(){this.yearchart3=y.init(document.getElementById("yearchart3"));var e={title:{text:"完成度 \n\n ".concat((this.addPipeHoleKilometreData[0]/this.addPipeHoleKilometreData[1]*100).toFixed(2),"%"),x:"center",y:"center",textStyle:{fontWeight:"normal",color:"#0580f2",fontSize:"25"}},color:["rgba(176, 212, 251, 1)"],legend:{show:!1,itemGap:12,data:["01","02"]},series:[{name:"Line 1",type:"pie",clockWise:!0,radius:["50%","66%"],itemStyle:{normal:{label:{show:!1},labelLine:{show:!1}}},hoverAnimation:!1,data:[{value:this.addPipeHoleKilometreData[0],name:"01",itemStyle:{normal:{color:{colorStops:[{offset:0,color:"#00cefc"},{offset:1,color:"#367bec"}]},label:{show:!1},labelLine:{show:!1}}}},{name:"02",value:this.addPipeHoleKilometreData[1]-this.addPipeHoleKilometreData[0]}]}]};this.yearchart3.setOption(e)},initYearTargetChart4:function(){this.yearchart4=y.init(document.getElementById("yearchart4"));var e={title:{text:"完成度 \n\n ".concat((this.addMoneyData[0]/this.addMoneyData[1]*100).toFixed(2),"%"),x:"center",y:"center",textStyle:{fontWeight:"normal",color:"#0580f2",fontSize:"25"}},color:["rgba(176, 212, 251, 1)"],legend:{show:!1,itemGap:12,data:["01","02"]},series:[{name:"Line 1",type:"pie",clockWise:!0,radius:["50%","66%"],itemStyle:{normal:{label:{show:!1},labelLine:{show:!1}}},hoverAnimation:!1,data:[{value:this.addMoneyData[0],name:"01",itemStyle:{normal:{color:{colorStops:[{offset:0,color:"#00cefc"},{offset:1,color:"#367bec"}]},label:{show:!1},labelLine:{show:!1}}}},{name:"02",value:this.addMoneyData[1]-this.addMoneyData[0]}]}]};this.yearchart4.setOption(e)},initResourceEchart:function(){this.yearchart5=y.init(document.getElementById("resourceEchartId"));var e={backgroundColor:"#fff",title:{text:"km",left:"18px",top:"15px",textStyle:{color:"#999",fontSize:12,fontWeight:"400"}},color:["#73A0FA","#73DEB3","#FFB761","#0fcaff"],tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"},lineStyle:{type:"dashed"}}},grid:{left:"25",right:"25",bottom:"24",top:"75",containLabel:!0},legend:{data:["总管程公里","总管孔公里","总人井数","总手井数"],orient:"horizontal",icon:"rect",show:!0,left:"30%",top:25},xAxis:{type:"category",data:this.ResourceCaseEchartData.map((function(e,t){return"第".concat(t+1,"周")})),splitLine:{show:!1},axisTick:{show:!1},axisLine:{show:!1}},yAxis:{type:"value",axisLabel:{color:"#999",textStyle:{fontSize:12}},splitLine:{show:!0,lineStyle:{color:"#F3F4F4"}},axisTick:{show:!1},axisLine:{show:!1}},series:[{name:"总管程公里",type:"line",smooth:!0,data:this.ResourceCaseEchartData.map((function(e){return e.pipeKilometreAdd}))},{name:"总管孔公里",type:"line",smooth:!0,data:this.ResourceCaseEchartData.map((function(e){return e.pipeHoleKilometreAdd}))},{name:"总人井数",type:"line",smooth:!0,data:this.ResourceCaseEchartData.map((function(e){return e.personWellAdd}))},{name:"总手井数",type:"line",smooth:!0,data:this.ResourceCaseEchartData.map((function(e){return e.handWellAdd}))}]};this.yearchart5.setOption(e)},initrepairEchart:function(){this.yearchart6=y.init(document.getElementById("repairEchartId"));var e={backgroundColor:"#fff",tooltip:{trigger:"axis",formatter:"{b0}<br />{a0}: {c0}<br />{a1}: {c1}",axisPointer:{type:"shadow",label:{backgroundColor:"#6a7985"}},textStyle:{color:"#fff",fontStyle:"normal",fontFamily:"微软雅黑",fontSize:12}},grid:{left:"1%",right:"4%",bottom:"6%",top:30,padding:"0 0 10 0",containLabel:!0},legend:{right:10,top:0,itemGap:16,itemWidth:18,itemHeight:10,data:[{name:"上周"},{name:"这周"}],textStyle:{color:"#a8aab0",fontStyle:"normal",fontFamily:"微软雅黑",fontSize:12}},xAxis:[{type:"category",boundaryGap:!0,data:["巡检通讯井","处理城管案件及巡查发现","更换全套井盖","补井盖","查处违规偷放","重点工地勘察","抽缆入库","断点维修","开关锁","光缆验收","强电入井","勘探路面坍塌隐患","发现密码锁异常","资源试通"],axisLabel:{interval:0,margin:15,textStyle:{color:"#078ceb",fontStyle:"normal",fontFamily:"微软雅黑",fontSize:12},rotate:"45"},axisTick:{show:!1},axisLine:{lineStyle:{color:"#fff",opacity:.2}},splitLine:{show:!1}}],yAxis:[{type:"value",splitNumber:5,axisLabel:{textStyle:{color:"#a8aab0",fontStyle:"normal",fontFamily:"微软雅黑",fontSize:12}},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{color:["#fff"],opacity:.06}}}],series:[{name:"上周",type:"bar",data:[4.9,7.3,9.2,5.6,7.7,5.6,4.2,3.6,6,6.4,5,6,13,34],barWidth:10,barGap:0,label:{normal:{show:!0,position:"top",textStyle:{color:"#a8aab0",fontStyle:"normal",fontFamily:"微软雅黑",fontSize:12}}},itemStyle:{normal:{barBorderRadius:[5,5,0,0],color:new y.graphic.LinearGradient(0,0,0,1,[{offset:1,color:"rgba(127, 128, 225, 0.7)"},{offset:.9,color:"rgba(72, 73, 181, 0.7)"},{offset:.31,color:"rgba(0, 208, 208, 0.7)"},{offset:.15,color:"rgba(0, 208, 208, 0.7)"},{offset:0,color:"rgba(104, 253, 255, 0.7)"}],!1)}}},{name:"这周",type:"bar",data:[2.9,5,4.4,2.7,5.7,4.6,1.2,2.7,4.8,6,34,2,34,34],barWidth:10,barGap:.2,label:{normal:{show:!0,position:"top",textStyle:{color:"#a8aab0",fontStyle:"normal",fontFamily:"微软雅黑",fontSize:12}}},itemStyle:{normal:{barBorderRadius:[5,5,0,0],color:new y.graphic.LinearGradient(0,0,0,1,[{offset:1,color:"rgba(127, 128, 225, 0.7)"},{offset:.9,color:"rgba(72, 73, 181, 0.7)"},{offset:.25,color:"rgba(226, 99, 74, 0.7)"},{offset:0,color:"rgba(253, 200, 106, 0.7)"}],!1)}}}]};this.yearchart6.setOption(e)},inityearKpiEchart:function(){this.yearKpiEchart=y.init(document.getElementById("yearKpiEchartId"));var e={backgroundColor:"#fff",title:{text:"",subtext:"",textStyle:{color:"#fff",fontSize:20},subtextStyle:{color:"#999",fontSize:16},x:"center",top:"0%"},grid:{top:200,bottom:150},tooltip:{},xAxis:{data:["去年预收","今年实收","明年预收"],axisTick:{show:!1},axisLine:{show:!1},axisLabel:{interval:0,textStyle:{color:"#beceff",fontSize:50},margin:80}},yAxis:{splitLine:{show:!1},axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1}},series:[{name:"",type:"pictorialBar",symbolSize:[100,45],symbolOffset:[0,-20],z:12,data:[{name:"去年预收",value:this.moneyYearCollectionData.moneyLastYearCollection.toString(),trueVal:(this.moneyYearCollectionData.moneyLastYearCollection/10).toString(),symbolPosition:"end",itemStyle:{normal:{color:"#00fff5"}}},{name:"今年实收",value:this.moneyYearCollectionData.moneyNextYearCollection.toString(),trueVal:(this.moneyYearCollectionData.moneyNextYearCollection/10).toString(),symbolPosition:"end",itemStyle:{normal:{color:"#ffcc00"}}},{name:"明年预收",value:this.moneyYearCollectionData.moneyThisYearCollection.toString(),trueVal:(this.moneyYearCollectionData.moneyThisYearCollection/10).toString(),symbolPosition:"end",itemStyle:{normal:{color:"#b9b7ff"}}}]},{name:"",type:"pictorialBar",symbolSize:[100,45],symbolOffset:[0,24],z:12,data:[{name:"去年预收",value:this.moneyYearCollectionData.moneyLastYearCollection.toString(),trueVal:(this.moneyYearCollectionData.moneyLastYearCollection/10).toString(),itemStyle:{normal:{color:"#43bafe"}}},{name:"今年实收",value:this.moneyYearCollectionData.moneyNextYearCollection.toString(),trueVal:(this.moneyYearCollectionData.moneyNextYearCollection/10).toString(),itemStyle:{normal:{color:"#ff7800"}}},{name:"明年预收",value:this.moneyYearCollectionData.moneyThisYearCollection.toString(),trueVal:(this.moneyYearCollectionData.moneyThisYearCollection/10).toString(),itemStyle:{normal:{color:"#e9a5ff"}}}]},{name:"",type:"pictorialBar",symbolSize:[150,75],symbolOffset:[0,44],z:11,data:[{name:"去年预收",value:this.moneyYearCollectionData.moneyLastYearCollection.toString(),trueVal:(this.moneyYearCollectionData.moneyLastYearCollection/10).toString(),itemStyle:{normal:{color:"transparent",borderColor:"#43bafe",borderWidth:5}}},{name:"今年实收",value:this.moneyYearCollectionData.moneyNextYearCollection.toString(),trueVal:(this.moneyYearCollectionData.moneyNextYearCollection/10).toString(),itemStyle:{normal:{color:"transparent",borderColor:"#ff7800",borderWidth:5}}},{name:"明年预收",value:this.moneyYearCollectionData.moneyThisYearCollection.toString(),trueVal:(this.moneyYearCollectionData.moneyThisYearCollection/10).toString(),itemStyle:{normal:{color:"transparent",borderColor:"#e9a5ff",borderWidth:5}}}]},{name:"",type:"pictorialBar",symbolSize:[200,100],symbolOffset:[0,62],z:10,data:[{name:"去年预收",value:this.moneyYearCollectionData.moneyLastYearCollection.toString(),trueVal:(this.moneyYearCollectionData.moneyLastYearCollection/10).toString(),itemStyle:{normal:{color:"transparent",borderColor:"#43bafe",borderType:"dashed",borderWidth:5}}},{name:"今年实收",value:this.moneyYearCollectionData.moneyNextYearCollection.toString(),trueVal:(this.moneyYearCollectionData.moneyNextYearCollection/10).toString(),itemStyle:{normal:{color:"transparent",borderColor:"#ff7800",borderType:"dashed",borderWidth:5}}},{name:"明年预收",value:this.moneyYearCollectionData.moneyThisYearCollection.toString(),trueVal:(this.moneyYearCollectionData.moneyThisYearCollection/10).toString(),itemStyle:{normal:{color:"transparent",borderColor:"#e9a5ff",borderType:"dashed",borderWidth:5,fontSize:90}}}]},{type:"bar",silent:!0,barWidth:100,barGap:"-100%",data:[{name:"去年预收",value:this.moneyYearCollectionData.moneyLastYearCollection.toString(),trueVal:(this.moneyYearCollectionData.moneyLastYearCollection/10).toString(),label:{normal:{show:!0,position:"top",distance:40,textStyle:{color:"#00fff5",fontSize:90}}},itemStyle:{normal:{color:{x:0,y:0,x2:0,y2:1,type:"linear",global:!1,colorStops:[{offset:0,color:"rgba(0,255,245,0.5)"},{offset:1,color:"#43bafe"}]}}}},{name:"今年实收",value:this.moneyYearCollectionData.moneyNextYearCollection.toString(),trueVal:(this.moneyYearCollectionData.moneyNextYearCollection/10).toString(),label:{normal:{show:!0,position:"top",distance:40,textStyle:{color:"#ffcc00",fontSize:90}}},itemStyle:{normal:{color:{x:0,y:0,x2:0,y2:1,type:"linear",global:!1,colorStops:[{offset:0,color:"rgba(255,204,0,0.5)"},{offset:1,color:"#ff7800"}]}}}},{name:"明年预收",value:this.moneyYearCollectionData.moneyThisYearCollection.toString(),trueVal:(this.moneyYearCollectionData.moneyThisYearCollection/10).toString(),label:{normal:{show:!0,position:"top",distance:40,textStyle:{color:"#b9b7ff",fontSize:90}}},itemStyle:{normal:{color:{x:0,y:0,x2:0,y2:1,type:"linear",global:!1,colorStops:[{offset:0,color:"rgba(185,183,255,0.5)"},{offset:1,color:"#e9a5ff"}]}}}}]}]};this.yearKpiEchart.setOption(e)},startlisten:function(){var e=this.$refs.eChartPage;this.observer=new ResizeObserver(f()(this.echartResizeALL,10)),this.observer.observe(e,{width:!0,height:!0})},getdateWeekRangTime:function(){var e=new Date,t=new Date(e),a=new Date(e),r=e.getDay();t.setDate(e.getDate()-r-6),a.setDate(e.getDate()-r),this.weeklyReportTimeBegin=this.$dayjs(t).format("YYYY-MM-DD"),this.weeklyReportTimeEnd=this.$dayjs(a).format("YYYY-MM-DD")},getWeeklyReport:function(){this.getContractCase(),this.getCollectionCase(),this.getResourceCase(),this.getSparePartCase(),this.getMatterFollowUpCase()},getContractCase:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l.fc)({weeklyReportTimeBegin:e.weeklyReportTimeBegin,weeklyReportTimeEnd:e.weeklyReportTimeEnd});case 3:a=t.sent,e.contractCase=a.data,e.contractTableDataList=JSON.parse(a.data.listContract),e.addContractData=JSON.parse(a.data.addContract),e.addMoneyData=JSON.parse(a.data.addMoney),e.addPipeHoleKilometreData=JSON.parse(a.data.addPipeHoleKilometre),e.countRenewalRateData=JSON.parse(a.data.countRenewalRate),e.initYearTargetChart1(),e.initYearTargetChart2(),e.initYearTargetChart3(),e.initYearTargetChart4(),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})))()},getCollectionCase:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a,i,n,o,s;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l.ec)({weeklyReportTimeBegin:e.weeklyReportTimeBegin,weeklyReportTimeEnd:e.weeklyReportTimeEnd});case 3:a=t.sent,e.collectionTableDataList=JSON.parse(a.data.indexAchievingStatusVos),e.previousWeekProgressDataList=JSON.parse(a.data.collectionFollowRecordList),e.collectionProgress=a.data.indexUncollectible,i=a.data,n=i.moneyLastYearCollection,o=i.moneyNextYearCollection,s=i.moneyThisYearCollection,e.moneyYearCollectionData={moneyLastYearCollection:n,moneyNextYearCollection:o,moneyThisYearCollection:s},e.inityearKpiEchart(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},getResourceCase:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l.qc)({weeklyReportTimeBegin:e.weeklyReportTimeBegin,weeklyReportTimeEnd:e.weeklyReportTimeEnd});case 3:a=t.sent,e.resourceCaseData=JSON.parse(a.data.resourceReport),e.ResourceCaseEchartData=JSON.parse(a.data.resourceReports),e.initResourceEchart(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},getSparePartCase:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l.rc)({weeklyReportTimeBegin:e.weeklyReportTimeBegin,weeklyReportTimeEnd:e.weeklyReportTimeEnd});case 3:a=t.sent,e.spareartData=a.data,e.sparePartsTableDataList=JSON.parse(a.data.sparePartReportInputOutputVos),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getMatterFollowUpCase:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l.pc)({weeklyReportTimeBegin:e.weeklyReportTimeBegin,weeklyReportTimeEnd:e.weeklyReportTimeEnd});case 3:a=t.sent,e.itemTableData=a.data,e.itemTableDataList=JSON.parse(a.data.otherMatterList),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},w=(a("bf93"),Object(o.a)(k,(function(){var e,t,a,r,i,l,n,o,s,c,u,m,d,p,f,b,h,g,v,y,x,k=this,w=k._self._c;return w("page-main",{staticStyle:{padding:"0",margin:"0",position:"relative"},attrs:{id:"pageMainRef"}},[w("elevatorTabs",{attrs:{"select-tabs-value":k.selectTabsValue},on:{change:function(e){k.selectTabsValue=e}}}),w("div",{ref:"eChartPage",staticStyle:{width:"calc(100% - 266px)",margin:"0 133px","padding-bottom":"300px"},attrs:{id:"pdfDom"}},[w("div",{staticClass:"week-report-head"},[w("div",{staticClass:"week-report-head-left"},[w("div",{staticClass:"left"},[w("div",{staticClass:"container"},[w("div",[w("img",{staticStyle:{height:"53px","vertical-align":"middle"},attrs:{src:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png",alt:""}})]),w("div",{staticStyle:{"margin-left":"12px"}},[w("p",{staticStyle:{color:"rgba(51, 51, 51, 1)","font-size":"18px","font-weight":"600","margin-top":"-1px"}},[k._v(" 周报汇总 ")]),w("p",{staticStyle:{"line-height":"0px",color:"rgba(85, 85, 85, 1)","font-size":"14px"}},[k._v(" 管理员通过这个模块对各个周报数据进行审核 ")])])])]),w("div",{staticClass:"right"},[w("el-button",{attrs:{type:"primary"},on:{click:k.exportWeekReport}},[k._v(" 导出周报 ")])],1)]),w("div",{staticClass:"week-report-head-right"},[w("div",{staticClass:"left flex-container"},[w("div",[w("div",{staticStyle:{color:"rgba(22, 26, 35, 0.6)","font-size":"14px","margin-bottom":"5px"}},[k._v(" 周报部门 ")]),w("div",{staticStyle:{color:"rgba(22, 26, 35, 1)","font-size":"18px"}},[k._v(" 基础资源部 ")])])]),w("div",{staticClass:"right flex-container"},[w("div",{staticStyle:{color:"rgba(22, 26, 35, 0.6)","font-size":"14px","margin-bottom":"5px"}},[w("div",{staticStyle:{color:"rgba(22, 26, 35, 0.6)","font-size":"14px","margin-bottom":"5px"}},[k._v(" 周报周期 ")]),w("div",{staticStyle:{color:"rgba(22, 26, 35, 1)","font-size":"18px"}},[k._v(" "+k._s(k.weeklyReportTimeBegin)+" ~ "+k._s(k.weeklyReportTimeEnd)+" ")])])])])]),w("el-tabs",{staticClass:"tabs-head-text tabRef",attrs:{value:"first"}},[w("el-tab-pane",{attrs:{label:"合同情况",name:"first"}})],1),w("div",{staticClass:"week-report-content"},[w("div",{staticClass:"week-report-content-left"},[w("smallTitle",{attrs:{title:"合同数量统计情况"}}),w("div",{staticClass:"flex-container"},[w("div",{staticClass:"container-item"},[w("div",{staticClass:"item-text"},[k._v("生效中")]),w("div",{staticClass:"con-item-number"},[w("countTo",{attrs:{"star-val":0,"end-val":Number(null===(e=k.contractCase)||void 0===e?void 0:e.countStatusContract4),duration:2e3}}),w("span",{staticClass:"unit"},[k._v("份")])],1)]),w("div",{staticClass:"container-item"},[w("div",{staticClass:"item-text"},[k._v("即将到期")]),w("div",{staticClass:"con-item-number"},[w("countTo",{attrs:{"star-val":0,"end-val":Number(null===(t=k.contractCase)||void 0===t?void 0:t.countDueSoon),duration:2e3}}),w("span",{staticClass:"unit"},[k._v("份")])],1)]),w("div",{staticClass:"container-item"},[w("div",{staticClass:"item-text"},[k._v("即将到期未续约")]),w("div",{staticClass:"con-item-number"},[w("countTo",{attrs:{"star-val":0,"end-val":Number(null===(a=k.contractCase)||void 0===a?void 0:a.countDueSoonUnsign),duration:2e3}}),w("span",{staticClass:"unit"},[k._v("份")])],1)]),w("div",{staticClass:"container-item",staticStyle:{width:"20%"}},[w("div",{staticClass:"item-text"},[k._v("合同金额")]),w("div",{staticClass:"con-item-number"},[k._v(" ￥ "),w("countTo",{attrs:{"star-val":0,"end-val":Number(null===(r=k.contractCase)||void 0===r?void 0:r.moneySum)/1e4,decimals:3,duration:2e3}}),w("span",{staticClass:"unit"},[k._v("万")])],1)]),w("div",{staticClass:"container-item"},[w("div",{staticClass:"item-text"},[k._v("新增管孔公里数")]),w("div",{staticClass:"con-item-number"},[w("countTo",{attrs:{"star-val":0,"end-val":Number(null===(i=k.contractCase)||void 0===i?void 0:i.countPipeHoleKilometre),duration:2e3}}),w("span",{staticClass:"unit"},[k._v("km")])],1)]),w("div",{staticClass:"container-item"},[w("div",{staticClass:"item-text"},[k._v("新增子孔公里数")]),w("div",{staticClass:"con-item-number"},[w("countTo",{attrs:{"star-val":0,"end-val":Number(null===(l=k.contractCase)||void 0===l?void 0:l.countPipeHoleSubKilometre),duration:2e3}}),w("span",{staticClass:"unit"},[k._v("km")])],1)])])],1),w("div",{staticClass:"week-report-content-right"},[w("smallTitle",{attrs:{title:"上周合同进度统计情况"}}),w("div",{staticClass:"flex-container"},[w("div",{staticClass:"container-item",staticStyle:{width:"50%"}},[w("div",{staticClass:"item-text"},[k._v("新增合同")]),w("div",{staticClass:"con-item-number"},[k._v(" + "),w("countTo",{attrs:{"star-val":0,"end-val":Number(null===(n=k.contractCase)||void 0===n?void 0:n.countContractAdd),duration:2e3}}),w("span",{staticClass:"unit"},[k._v("份")])],1)]),w("div",{staticClass:"container-item",staticStyle:{width:"50%"}},[w("div",{staticClass:"item-text"},[k._v("推进合同数")]),w("div",{staticClass:"con-item-number"},[k._v(" + "),w("countTo",{attrs:{"star-val":0,"end-val":Number(null===(o=k.contractCase)||void 0===o?void 0:o.countPigeonhole),duration:2e3}}),w("span",{staticClass:"unit"},[k._v("份")])],1)])])],1)]),w("el-table",{ref:"table",staticStyle:{"margin-bottom":"20px"},attrs:{data:k.contractTableDataList,border:"",stripe:"","highlight-current-row":"",fit:""}},k._l(k.contractTableHead,(function(e){return w("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,"min-width":e.width},scopedSlots:k._u([{key:"default",fn:function(e){return["statustype"===e.column.property?w("div",{staticStyle:{width:"100%",height:"100%","text-align":"center"}},[k._v(" "+k._s("管道租赁")+" ")]):w("div",[k._v(" "+k._s(k.contractDateFormat(e.row,e.column))+" ")])]}}],null,!0)})})),1),w("el-tabs",{staticClass:"tabs-head-text tabRef",attrs:{value:"first"}},[w("el-tab-pane",{attrs:{label:"年度指标完成情况",name:"first"}})],1),w("div",{staticStyle:{height:"300px"}},[w("div",{staticStyle:{display:"flex","justify-content":"space-evenly"}},[w("div",{staticStyle:{width:"22%"}},[w("el-divider",{attrs:{"content-position":"center"}},[k._v(" 新签合同数量 ")])],1),w("div",{staticStyle:{width:"22%"}},[w("el-divider",{attrs:{"content-position":"center"}},[k._v(" 合同续签率 ")])],1),w("div",{staticStyle:{width:"22%"}},[w("el-divider",{attrs:{"content-position":"center"}},[k._v(" 新签管程公里数 ")])],1),w("div",{staticStyle:{width:"22%"}},[w("el-divider",{attrs:{"content-position":"center"}},[k._v(" 新签合同金额 ")])],1)]),w("div",{staticClass:"year-echart-containe"},[w("div",{staticClass:"year-chart-item",attrs:{id:"yearchart1"}}),w("div",{staticClass:"year-chart-item",attrs:{id:"yearchart2"}}),w("div",{staticClass:"year-chart-item",attrs:{id:"yearchart3"}}),w("div",{staticClass:"year-chart-item",attrs:{id:"yearchart4"}})])]),w("el-tabs",{staticClass:"tabs-head-text tabRef",attrs:{value:"first"}},[w("el-tab-pane",{attrs:{label:"收款情况",name:"first"}})],1),w("el-row",[w("el-col",{staticStyle:{height:"450px"},attrs:{md:18}},[w("smallTitle",{attrs:{title:"指标完成情况"}}),w("el-table",{staticStyle:{"margin-top":"20px"},attrs:{data:k.collectionTableDataList,border:"",stripe:"","highlight-current-row":"",fit:""}},k._l(k.collectionTableHead,(function(e){return w("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,"min-width":e.width,formatter:k.collectionDateFormat}})})),1)],1),w("el-col",{staticStyle:{height:"450px","padding-left":"20px"},attrs:{md:6}},[w("smallTitle",{attrs:{title:"指标完成度"}}),w("div",{staticStyle:{"margin-top":"20px"}},[w("div",{staticClass:"item-text",staticStyle:{"margin-bottom":"15px"}},[k._v(" 无法收款指标 ")]),w("div",{staticStyle:{color:"rgba(22, 26, 35, 1)","font-size":"24px"}},[k._v(" "+k._s(100*k.collectionProgress)),w("span",{staticClass:"item-text",staticStyle:{"margin-left":"15px"}},[k._v("%")])])]),w("el-divider"),w("div",{staticStyle:{height:"260px",width:"100%"}},[w("div",{staticStyle:{height:"780px",width:"300%",transform:"scale(0.33)","transform-origin":"0 0"},attrs:{id:"yearKpiEchartId"}})])],1)],1),w("smallTitle",{attrs:{title:"上周进度汇报"}}),w("el-table",{staticStyle:{"margin-bottom":"15px"},attrs:{data:k.previousWeekProgressDataList,border:"",stripe:"","highlight-current-row":"",fit:""}},[w("el-table-column",{attrs:{type:"index",index:1,lable:"序号",prop:"index"}}),k._l(k.previousWeekProgressTableHead,(function(e){return w("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,"min-width":e.width}})}))],2),w("el-tabs",{staticClass:"tabs-head-text tabRef",attrs:{value:"first"}},[w("el-tab-pane",{attrs:{label:"资源情况",name:"first"}})],1),w("div",{staticClass:"week-report-content"},[w("div",{staticClass:"week-report-content-left",staticStyle:{width:"50%"}},[w("smallTitle",{attrs:{title:"资源总量"}}),w("div",{staticClass:"flex-container"},[w("div",{staticClass:"container-item",staticStyle:{width:"25%"}},[w("div",{staticClass:"item-text"},[k._v("总管程公里数")]),w("div",{staticClass:"con-item-number"},[w("countTo",{attrs:{"star-val":0,"end-val":null===(s=k.resourceCaseData)||void 0===s?void 0:s.pipeKilometreSum,duration:2e3}}),w("span",{staticClass:"unit"},[k._v("km")])],1)]),w("div",{staticClass:"container-item",staticStyle:{width:"25%"}},[w("div",{staticClass:"item-text"},[k._v("总管孔公里")]),w("div",{staticClass:"con-item-number"},[w("countTo",{attrs:{"star-val":0,"end-val":null===(c=k.resourceCaseData)||void 0===c?void 0:c.pipeHoleKilometreSum,duration:2e3}}),w("span",{staticClass:"unit"},[k._v("km")])],1)]),w("div",{staticClass:"container-item",staticStyle:{width:"25%"}},[w("div",{staticClass:"item-text"},[k._v("总人井数")]),w("div",{staticClass:"con-item-number"},[w("countTo",{attrs:{"star-val":0,"end-val":null===(u=k.resourceCaseData)||void 0===u?void 0:u.personWellSum,duration:2e3}}),w("span",{staticClass:"unit"},[k._v("个")])],1)]),w("div",{staticClass:"container-item",staticStyle:{width:"25%"}},[w("div",{staticClass:"item-text"},[k._v("总手井数")]),w("div",{staticClass:"con-item-number"},[w("countTo",{attrs:{"star-val":0,"end-val":null===(m=k.resourceCaseData)||void 0===m?void 0:m.handWellSum,duration:2e3}}),w("span",{staticClass:"unit"},[k._v("个")])],1)])])],1),w("div",{staticClass:"week-report-content-right",staticStyle:{width:"50%"}},[w("smallTitle",{attrs:{title:"上周增量"}}),w("div",{staticClass:"flex-container"},[w("div",{staticClass:"container-item",staticStyle:{width:"25%"}},[w("div",{staticClass:"item-text"},[k._v("总管程公里")]),w("div",{staticClass:"con-item-number"},[w("countTo",{attrs:{"star-val":0,"end-val":null===(d=k.resourceCaseData)||void 0===d?void 0:d.pipeKilometreAdd,duration:2e3}}),w("span",{staticClass:"unit"},[k._v("km")])],1)]),w("div",{staticClass:"container-item",staticStyle:{width:"25%"}},[w("div",{staticClass:"item-text"},[k._v("总管孔公里")]),w("div",{staticClass:"con-item-number"},[w("countTo",{attrs:{"star-val":0,"end-val":null===(p=k.resourceCaseData)||void 0===p?void 0:p.pipeHoleKilometreAdd,duration:2e3}}),w("span",{staticClass:"unit"},[k._v("km")])],1)]),w("div",{staticClass:"container-item",staticStyle:{width:"25%"}},[w("div",{staticClass:"item-text"},[k._v("总人井数")]),w("div",{staticClass:"con-item-number"},[w("countTo",{attrs:{"star-val":0,"end-val":null===(f=k.resourceCaseData)||void 0===f?void 0:f.personWellAdd,duration:2e3}}),w("span",{staticClass:"unit"},[k._v("个")])],1)]),w("div",{staticClass:"container-item",staticStyle:{width:"25%"}},[w("div",{staticClass:"item-text"},[k._v("总手井数")]),w("div",{staticClass:"con-item-number"},[w("countTo",{attrs:{"star-val":0,"end-val":null===(b=k.resourceCaseData)||void 0===b?void 0:b.handWellAdd,duration:2e3}}),w("span",{staticClass:"unit"},[k._v("个")])],1)])])],1)]),w("div",{staticStyle:{height:"400px",width:"100%"},attrs:{id:"resourceEchartId"}}),w("el-tabs",{staticClass:"tabs-head-text tabRef",attrs:{value:"first"}},[w("el-tab-pane",{attrs:{label:"维修情况",name:"first"}})],1),w("el-row",[w("el-col",{staticStyle:{height:"500px"},attrs:{md:17}},[w("smallTitle",{attrs:{title:"维修情况柱状图"}}),w("div",{staticStyle:{width:"100%",height:"450px"},attrs:{id:"repairEchartId"}})],1),w("el-col",{staticStyle:{height:"500px",padding:"0 30px"},attrs:{md:7}},[w("smallTitle",{attrs:{title:"维修简报"}}),w("h3",{staticStyle:{color:"rgba(51, 51, 51, 1)","font-size":"24px"}},[k._v(" 上周维修工作共15项 ")]),w("div",{staticClass:"repair-item"},[k._v(" 巡检通讯井 "),w("span",[k._v(" 209 ")]),k._v(" 个 ")]),w("div",{staticClass:"repair-item"},[k._v(" 处理城管案件及巡查发现 "),w("span",[k._v(" 209 ")]),k._v(" 宗 ")]),w("div",{staticClass:"repair-item"},[k._v(" 更换全套井盖 "),w("span",[k._v(" 209 ")]),k._v(" 个 ")]),w("div",{staticClass:"repair-item"},[k._v("补井盖 "),w("span",[k._v(" 209 ")]),k._v(" 个")]),w("div",{staticClass:"repair-item"},[k._v(" 查处违规偷放 "),w("span",[k._v(" 209 ")]),k._v(" 宗 ")]),w("div",{staticClass:"repair-item"},[k._v(" 重点工地勘察 "),w("span",[k._v(" 209 ")]),k._v(" 处 ")]),w("div",{staticClass:"repair-item"},[k._v(" 抽缆入库 "),w("span",[k._v(" 209 ")]),k._v(" 米 ")]),w("div",{staticClass:"repair-item"},[k._v(" 断点维修 "),w("span",[k._v(" 209 ")]),k._v(" 项 ")]),w("div",{staticClass:"repair-item"},[k._v("开关锁 "),w("span",[k._v(" 209 ")]),k._v(" 次")]),w("div",{staticClass:"repair-item"},[k._v(" 光缆验收 "),w("span",[k._v(" 209 ")]),k._v(" 单 ")]),w("div",{staticClass:"repair-item"},[k._v(" 强电入井 "),w("span",[k._v(" 209 ")]),k._v(" 处 ")]),w("div",{staticClass:"repair-item"},[k._v(" 勘察路面坍塌隐患 "),w("span",[k._v(" 209 ")]),k._v(" 处 ")]),w("div",{staticClass:"repair-item"},[k._v(" 发现密码锁异常 "),w("span",[k._v(" 209 ")]),k._v(" 个 ")]),w("div",{staticClass:"repair-item"},[k._v(" 资源试通 "),w("span",[k._v(" 209 ")]),k._v(" 米 ")])],1)],1),w("el-tabs",{staticClass:"tabs-head-text tabRef",attrs:{value:"first"}},[w("el-tab-pane",{attrs:{label:"备件情况",name:"first"}})],1),w("div",{staticClass:"week-report-content"},[w("div",{staticClass:"week-report-content-left",staticStyle:{width:"60%"}},[w("smallTitle",{attrs:{title:"资源总量"}}),w("div",{staticClass:"flex-container"},[w("div",{staticClass:"container-item",staticStyle:{width:"20%"}},[w("div",{staticClass:"item-text"},[k._v("备件种类")]),w("div",{staticClass:"con-item-number"},[w("countTo",{attrs:{"star-val":0,"end-val":Number(null===(h=k.spareartData)||void 0===h?void 0:h.countType),duration:2e3}}),w("span",{staticClass:"unit"},[k._v("种")])],1)]),w("div",{staticClass:"container-item",staticStyle:{width:"20%"}},[w("div",{staticClass:"item-text"},[k._v("采购入库")]),w("div",{staticClass:"con-item-number"},[w("countTo",{attrs:{"star-val":0,"end-val":Number(null===(g=k.spareartData)||void 0===g?void 0:g.countInput),duration:2e3}}),w("span",{staticClass:"unit"},[k._v("个")])],1)]),w("div",{staticClass:"container-item",staticStyle:{width:"20%"}},[w("div",{staticClass:"item-text"},[k._v("申领出库")]),w("div",{staticClass:"con-item-number"},[w("countTo",{attrs:{"star-val":0,"end-val":Number(null===(v=k.spareartData)||void 0===v?void 0:v.countOutput),duration:2e3}}),w("span",{staticClass:"unit"},[k._v("个")])],1)]),w("div",{staticClass:"container-item",staticStyle:{width:"20%"}},[w("div",{staticClass:"item-text"},[k._v("申领数量")]),w("div",{staticClass:"con-item-number"},[w("countTo",{attrs:{"star-val":0,"end-val":Number(null===(y=k.spareartData)||void 0===y?void 0:y.outputNum),duration:2e3}}),w("span",{staticClass:"unit"},[k._v("个")])],1)]),w("div",{staticClass:"container-item",staticStyle:{width:"20%"}},[w("div",{staticClass:"item-text"},[k._v("入库数量")]),w("div",{staticClass:"con-item-number"},[w("countTo",{attrs:{"star-val":0,"end-val":Number(null===(x=k.spareartData)||void 0===x?void 0:x.inputNum),duration:2e3}}),w("span",{staticClass:"unit"},[k._v("个")])],1)])])],1)]),w("smallTitle",{attrs:{title:"上周进度汇报"}}),w("el-table",{staticStyle:{"margin-bottom":"15px"},attrs:{data:k.sparePartsTableDataList,border:"",stripe:"","highlight-current-row":"",fit:""}},[w("el-table-column",{attrs:{type:"index",index:1,lable:"序号",prop:"index"}}),k._l(k.sparePartsReportTableHead,(function(e){return w("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,"min-width":e.width}})}))],2),w("el-tabs",{staticClass:"tabs-head-text tabRef",attrs:{value:"first"}},[w("el-tab-pane",{attrs:{label:"事项跟进情况",name:"first"}})],1),w("div",{staticClass:"week-report-content"},[w("div",{staticClass:"week-report-content-left",staticStyle:{width:"40%"}},[w("smallTitle",{attrs:{title:"统计情况"}}),w("div",{staticClass:"flex-container"},[w("div",{staticClass:"container-item",staticStyle:{width:"33%"}},[w("div",{staticClass:"item-text"},[k._v("累计事项")]),w("div",{staticClass:"con-item-number"},[w("countTo",{attrs:{"star-val":0,"end-val":25,duration:2e3}}),w("span",{staticClass:"unit"},[k._v("件")])],1)]),w("div",{staticClass:"container-item",staticStyle:{width:"33%"}},[w("div",{staticClass:"item-text"},[k._v("跟进中事项")]),w("div",{staticClass:"con-item-number"},[w("countTo",{attrs:{"star-val":0,"end-val":15,duration:2e3}}),w("span",{staticClass:"unit"},[k._v("件")])],1)]),w("div",{staticClass:"container-item",staticStyle:{width:"33%"}},[w("div",{staticClass:"item-text"},[k._v("上周有更新事项")]),w("div",{staticClass:"con-item-number"},[w("countTo",{attrs:{"star-val":0,"end-val":5,duration:2e3}}),w("span",{staticClass:"unit"},[k._v("件")])],1)])])],1)]),w("smallTitle",{attrs:{title:"上周进度统计情况"}}),w("el-table",{staticStyle:{"margin-bottom":"15px"},attrs:{data:k.itemTableDataList,border:"",stripe:"","highlight-current-row":"",fit:""}},[w("el-table-column",{attrs:{type:"index",index:1,lable:"序号",prop:"index"}}),k._l(k.itemTableHead,(function(e){return w("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,"min-width":e.width,formatter:k.itemDateFormat}})}))],2)],1)],1)}),[],!1,null,"7f01d400",null));t.default=w.exports},"1ea1":function(e,t,a){},"21b0":function(e,t,a){"use strict";a.r(t);var r=a("c7eb"),i=a("1da1"),l=a("5a0c"),n=a.n(l),o=a("365c"),s=a("21f4"),c={data:function(){return{tableColumn:[{id:1,props:"signatureUnit",label:"使用方",width:"50"},{id:2,props:"contractNum",label:"合同数量",width:"50"},{id:3,props:"contractNo",label:"合同编号",width:"50"},{id:4,props:"result",label:"跟进结果",width:"80"},{id:5,props:"createBy",label:"跟进人",width:"50"},{id:6,props:"createTime",label:"跟进时间",width:"50"}],TableData:[],searchTime:null,searchForm:{updateTimeBegin:null,updateTimeEnd:null,signatureUnit:null,contractNo:null},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},currentPage:1,pageSize:10,pageCount:0}},watch:{searchTime:{deep:!0,handler:function(e){null===e?(this.searchForm.updateTimeBegin=null,this.searchForm.updateTimeEnd=null):(this.searchForm.updateTimeBegin=e[0],this.searchForm.updateTimeEnd=e[1])}}},created:function(){this.getList()},methods:{getList:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a,i,l;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$loading({lock:!0,text:"正在加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),i=Object.assign({pageIndex:e.currentPage,pageSize:e.pageSize},e.searchForm),t.next=4,Object(o.B)(i);case 4:"加载成功"===(l=t.sent).resultMsg?(e.TableData=l.data,e.pageCount=l.totalPages):e.$message.error("加载数据失败"),a.close();case 7:case"end":return t.stop()}}),t)})))()},sumitSearchForm:function(){this.currentPage=1,this.getList()},handleCurrentChange:function(e){this.currentPage=e,this.getList()},resetSearch:function(){this.searchTime=null,this.searchForm={updateTimeBegin:null,updateTimeEnd:null,signatureUnit:null,contractNo:null},this.currentPage=1,this.getList()},exportExcel:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.E)(e.searchForm);case 2:a=t.sent,Object(s.b)(a.data,"收款进度列表.xls");case 4:case"end":return t.stop()}}),t)})))()},dateFormat:function(e,t){return"updateTime"===t.property?n()(e[t.property]).format("YYYY-MM-DD"):"status"===t.property?1===e[t.property]?"跟进":"已关闭":e[t.property]}}},u=(a("b4fd"),a("2877")),m=Object(u.a)(c,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"content"},[t("page-main",[t("el-form",{attrs:{inline:!0,model:e.searchForm}},[t("el-form-item",[e._v(" 跟进时间 : "),t("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.searchTime,callback:function(t){e.searchTime=t},expression:"searchTime"}})],1),t("el-form-item",[t("g-input-prepend",{attrs:{"prepend-title":"使用方名称:",placeholder:"请填写使用方名称"},model:{value:e.searchForm.signatureUnit,callback:function(t){e.$set(e.searchForm,"signatureUnit",t)},expression:"searchForm.signatureUnit"}})],1),t("el-form-item",[t("g-input-prepend",{attrs:{"prepend-title":"合同编号:",placeholder:"请填写合同编号"},model:{value:e.searchForm.contractNo,callback:function(t){e.$set(e.searchForm,"contractNo",t)},expression:"searchForm.contractNo"}})],1),t("el-form-item",[t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.sumitSearchForm}},[e._v("查询")])],1),t("el-form-item",[t("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.resetSearch}},[e._v("重置")])],1)],1)],1),t("page-main",[t("el-button",{attrs:{type:"primary"},on:{click:e.exportExcel}},[e._v("导出")])],1),t("page-main",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.TableData,border:"",fit:""}},e._l(e.tableColumn,(function(a){return t("el-table-column",{key:a.id,attrs:{prop:a.props,label:a.label,"min-width":a.width,formatter:e.dateFormat}})})),1),t("div",{staticClass:"pagenation"},[t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total,prev, pager, next, jumper","page-count":e.pageCount},on:{"current-change":e.handleCurrentChange}})],1)],1)],1)}),[],!1,null,"2a60656d",null);t.default=m.exports},"21f4":function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return o}));var r=a("c7eb"),i=a("1da1"),l=(a("14d9"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("88a7"),a("271a"),a("5494"),a("5a0c"),function(){var e=Object(i.a)(Object(r.a)().mark((function e(t,a){var i,l;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=new Blob([t]),(l=document.createElement("a")).href=URL.createObjectURL(i),l.download=a,l.style.display="none",document.body.appendChild(l),l.click(),l.remove();case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),n=function(e){for(var t=new Date,a=t.getFullYear()-e+1,r=t.getFullYear(),i=[],l=a;l<=r;l++){var n={value:l,label:l+"年"};i.push(n)}return i.reverse(),i},o=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t,a){var i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(i=document.createElement("a")).href=t,i.download=a,i.style.display="none",document.body.appendChild(i),i.click(),i.remove();case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},2227:function(e,t,a){},"233c":function(e,t,a){},"242a":function(e,t,a){},"25bf":function(e,t,a){"use strict";var r=a("5530"),i=a("c7eb"),l=a("1da1"),n=(a("e9c4"),a("b64b"),a("365c")),o=a("5a0c"),s=a.n(o),c={props:{looklook:{type:Boolean,default:!1}},data:function(){return{contractID:null,dialogFormVisible:!1,form:{signatureTime:null,contractName:null,signatureUnit:null,signatureTimeBegin:null,contractNo:null,statusContract:null,extensionContractNo:null,signatureTimeEnd:null,pipeHoleKilometre:null,pipeHoleSubKilometre:null,settlementInterval:null},form1:{moneyTotal:null,tenancyTerm:null,onceConnectionFee:null},rules:{signatureTime:[{required:!0,message:"请输入签订时间",trigger:"blur"}],contractName:[{required:!0,message:"请输入合同名称",trigger:"blur"}],signatureUnit:[{required:!0,message:"请输入签署单位",trigger:"blur"}],signatureTimeBegin:[{required:!0,message:"请输入生效日期",trigger:"blur"}],contractNo:[{required:!0,message:"请输入合同编号",trigger:"blur"}],statusContract:[{required:!0,message:"请输入合同状态",trigger:"blur"}],extensionContractNo:[{required:!0,message:"请输入续签合同号",trigger:"blur"}],signatureTimeEnd:[{required:!0,message:"请输入到期日期",trigger:"blur"}],pipeHoleKilometre:[{required:!0,message:"请输入管孔公里数",trigger:"blur"}],pipeHoleSubKilometre:[{required:!0,message:"请输入租用管孔公里数",trigger:"blur"}],settlementInterval:[{required:!0,message:"请输入结算周期",trigger:"blur"}]},rules2:{moneyTotal:[{required:!0,message:"请输入合同金额",trigger:"blur"}],tenancyTerm:[{required:!0,message:"请输入租期期",trigger:"blur"}],onceConnectionFee:[{required:!0,message:"请输入一次性连接费用",trigger:"blur"}]},options2:[{id:1,label:"待发起"},{id:2,label:"OA走流程"},{id:3,label:"等待对方盖章"},{id:4,label:"已签订"},{id:5,label:"已终止"}],fileList:[],loading:!1}},computed:{uploadURL:function(){return n.qb.uploadPictureUrl}},methods:{closeDialog:function(){this.dialogFormVisible=!1,this.resetForm()},resetForm:function(){this.$refs.formRef1.resetFields(),this.$refs.formRef2.resetFields(),this.form={contractName:null,signatureUnit:null,signatureTimeBegin:null,signatureTimeEnd:null,extensionContractNo:null,moneyTotal:null,settlementInterval:null,onceConnectionFee:null},this.form1={moneyTotal:null,settlementInterval:null,onceConnectionFee:null},this.fileList=[],this.contractID=null},beforeImgUpload:function(e){return!(e.size>=20971520)||(this.$message({message:"上传文件大小不能超过20M",type:"warning"}),!1)},handleRemove:function(e,t){this.fileList=t},handleAvatarSuccess:function(e,t,a){this.fileList=a},onExceed:function(){this.$message.warning("最多只能上传一个附件")},openDialog:function(e,t){var a=this;return Object(l.a)(Object(i.a)().mark((function r(){var l,o,s,c,u;return Object(i.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("detail"!==t){r.next=3;break}return r.next=3,Object(n.D)(e.id);case 3:null!=e&&e.id&&(a.form=JSON.parse(JSON.stringify(e)),o=JSON.parse(JSON.stringify(e)),s=o.moneyTotal,c=o.tenancyTerm,u=o.onceConnectionFee,a.form1={moneyTotal:s,tenancyTerm:c,onceConnectionFee:u},null!==(l=a.form)&&void 0!==l&&l.fileUrl&&(a.fileList=[{name:"合同附件",url:a.form.fileUrl}]),a.contractID=e.id),a.dialogFormVisible=!0;case 5:case"end":return r.stop()}}),r)})))()},submitForm:function(){var e=this;if(s()(this.form.signatureTimeEnd).diff(this.form.signatureTimeBegin,"month")<1)return this.$message.warning("到期日期和生效日期之间必须大于1个月");this.$refs.formRef1.validate((function(t){if(!t)return!1;e.fileList.length||e.$message.warning("请上传附件")})),this.$refs.formRef2.validate(function(){var t=Object(l.a)(Object(i.a)().mark((function t(a){return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=21;break}if(e.loading=!0,t.prev=2,!e.contractID){t.next=11;break}return t.next=6,Object(n.G)(Object(r.a)(Object(r.a)({},e.form),{},{fileUrl:e.fileUrl},e.form1));case 6:200===t.sent.code?(e.$message.success("编辑成功"),e.closeDialog(),e.$emit("refresh")):e.$message.error("编辑失败"),e.loading=!1,t.next=16;break;case 11:return t.next=13,Object(n.F)(Object(r.a)(Object(r.a)({},e.form),{},{fileUrl:e.fileList[0].response.data},e.form1));case 13:200===t.sent.code?(e.$message.success("新增成功"),e.closeDialog(),e.$emit("refresh")):e.$message.error("新增失败"),e.loading=!1;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(2),e.loading=!1;case 21:case"end":return t.stop()}}),t,null,[[2,18]])})));return function(e){return t.apply(this,arguments)}}())},previewFile:function(e){window.open(e.url)},previewNull:function(){}}},u=(a("ffa9"),a("2877")),m=Object(u.a)(c,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.looklook?"合同详情":e.contractID?"编辑合同":"新建合同",visible:e.dialogFormVisible,width:"75%","append-to-body":!0,"destroy-on-close":""},on:{"update:visible":function(t){e.dialogFormVisible=t},closed:e.closeDialog}},[t("div",{staticClass:"container"},[t("h2",{staticStyle:{"margin-bottom":"20px"}},[e._v("合同基础信息")]),t("el-form",{ref:"formRef1",attrs:{rules:e.rules,inline:!0,model:e.form,"label-width":"auto"}},[t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"签订时间（日期）:",prop:"signatureTime"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"请选择",disabled:e.looklook},model:{value:e.form.signatureTime,callback:function(t){e.$set(e.form,"signatureTime",t)},expression:"form.signatureTime"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"合同名称:",prop:"contractName"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:e.looklook},model:{value:e.form.contractName,callback:function(t){e.$set(e.form,"contractName",t)},expression:"form.contractName"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"签署单位:",prop:"signatureUnit"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:e.looklook},model:{value:e.form.signatureUnit,callback:function(t){e.$set(e.form,"signatureUnit",t)},expression:"form.signatureUnit"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"生效日期:",prop:"signatureTimeBegin"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"请选择",disabled:e.looklook},model:{value:e.form.signatureTimeBegin,callback:function(t){e.$set(e.form,"signatureTimeBegin",t)},expression:"form.signatureTimeBegin"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"合同编号:",prop:"contractNo"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:e.looklook},model:{value:e.form.contractNo,callback:function(t){e.$set(e.form,"contractNo",t)},expression:"form.contractNo"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"合同状态:",prop:"statusContract"}},[t("el-select",{attrs:{placeholder:"请选择状态",disabled:e.looklook},model:{value:e.form.statusContract,callback:function(t){e.$set(e.form,"statusContract",t)},expression:"form.statusContract"}},e._l(e.options2,(function(e){return t("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"到期日期:",prop:"signatureTimeEnd"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"请选择",disabled:e.looklook},model:{value:e.form.signatureTimeEnd,callback:function(t){e.$set(e.form,"signatureTimeEnd",t)},expression:"form.signatureTimeEnd"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"管孔公里数:",prop:"pipeHoleKilometre"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:e.looklook},model:{value:e.form.pipeHoleKilometre,callback:function(t){e.$set(e.form,"pipeHoleKilometre",t)},expression:"form.pipeHoleKilometre"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"租用子管孔公里数:",prop:"pipeHoleSubKilometre"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:e.looklook},model:{value:e.form.pipeHoleSubKilometre,callback:function(t){e.$set(e.form,"pipeHoleSubKilometre",t)},expression:"form.pipeHoleSubKilometre"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"结算周期：",prop:"settlementInterval"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:e.looklook},model:{value:e.form.settlementInterval,callback:function(t){e.$set(e.form,"settlementInterval",t)},expression:"form.settlementInterval"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"续签合同号:"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:e.looklook},model:{value:e.form.extensionContractNo,callback:function(t){e.$set(e.form,"extensionContractNo",t)},expression:"form.extensionContractNo"}})],1)],1),t("h2",{staticStyle:{"margin-bottom":"20px"}},[e._v("合同金额信息")]),t("el-form",{ref:"formRef2",attrs:{inline:!0,model:e.form1,rules:e.rules2,"label-width":"auto"}},[t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"合同金额:",prop:"moneyTotal"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:e.looklook},model:{value:e.form1.moneyTotal,callback:function(t){e.$set(e.form1,"moneyTotal",t)},expression:"form1.moneyTotal"}})],1),t("el-form-item",{attrs:{label:"租期:",prop:"tenancyTerm"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:e.looklook},model:{value:e.form1.tenancyTerm,callback:function(t){e.$set(e.form1,"tenancyTerm",t)},expression:"form1.tenancyTerm"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"一次性连接费用：",prop:"onceConnectionFee"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:e.looklook},model:{value:e.form1.onceConnectionFee,callback:function(t){e.$set(e.form1,"onceConnectionFee",t)},expression:"form1.onceConnectionFee"}})],1)],1),t("h2",{staticStyle:{"margin-bottom":"20px"}},[e._v("合同附件信息")]),t("div",{staticStyle:{"margin-left":"40px"}},[t("el-upload",{staticClass:"upload-demo",attrs:{drag:"",accept:".png, .jpg, .jpeg, .pdf","before-upload":e.beforeImgUpload,action:e.uploadURL,"file-list":e.fileList,"on-remove":e.handleRemove,limit:1,multiple:"","on-success":e.handleAvatarSuccess,"on-exceed":e.onExceed,"on-preview":e.looklook?e.previewFile:e.previewNull,disabled:e.looklook}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),t("em",[e._v("点击上传")])]),e.looklook?e._e():t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传图片/PDF文件，且不超过20M")])])],1)],1),e.looklook?e._e():t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.submitForm}},[e._v("确 定")])],1)])}),[],!1,null,"1a5c8821",null);t.a=m.exports},"2cd0":function(e,t,a){},"2d31":function(e,t,a){"use strict";a("f047")},"39d6":function(e,t,a){},"3c0d":function(e,t,a){},4421:function(e,t,a){"use strict";a.r(t);a("b0c0");var r=a("c7eb"),i=a("1da1"),l=a("5530"),n=(a("a15b"),a("d81d"),a("14d9"),a("a9e3"),a("21f4")),o=a("365c"),s=(a("a434"),a("e9c4"),a("b64b"),a("25ca")),c={props:{tableHeaders:{type:Array,default:function(){return[]}},tableHeadersMapping:{type:Object,default:function(){}}},data:function(){return{dialogVisible:!1}},methods:{handleClose:function(){var e=this;this.$confirm("确认关闭？").then((function(){e.dialogVisible=!1})).catch((function(){}))},openDialog:function(){this.dialogVisible=!0},handleFileUpload:function(e){var t=this,a=JSON.parse(JSON.stringify(this.tableHeaders)),r=JSON.parse(JSON.stringify(this.tableHeadersMapping)),i=new FileReader;i.readAsBinaryString(e.file),i.onload=function(e){var i=e.target.result,l=s.a(i,{type:"binary"}),n=l.Sheets[l.SheetNames[0]],o=s.b.sheet_to_json(n,{header:a});o.splice(0,1);var c=o.map((function(e){for(var t={},i=0;i<a.length;i++)t[r[Object.keys(e)[i]]]=e[Object.keys(e)[i]];return t}));t.$confirm("是否确定导入数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){t.handleAdd(c)})).catch((function(){}))}},handleAdd:function(e){var t=this;e.map(function(){var e=Object(i.a)(Object(r.a)().mark((function e(a){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o.Gd)(a);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),t.$message.error("导入失败");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()),this.$message.success("导入成功"),this.$emit("close"),this.dialogVisible=!1}}},u=a("2877"),m={components:{importDataCom:Object(u.a)(c,(function(){var e=this._self._c;return e("el-dialog",{attrs:{title:"导入数据",visible:this.dialogVisible,width:"40%","before-close":this.handleClose}},[e("div",{staticStyle:{"text-align":"center"}},[e("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"#","show-file-list":!1,accept:".xlsx,.xls","http-request":this.handleFileUpload}},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text"},[this._v("将文件拖到此处，或"),e("em",[this._v("点击上传")])]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[this._v("只能上传jpg/png文件，且不超过500kb")])])],1)])}),[],!1,null,null,null).exports},data:function(){return{dialogFormVisible:!1,form:{name:"",bearing:"",model:"",purchaseTime:"",provider:"",unitPrice:""},rules1:{name:[{required:!0,message:"请输入备件名称",trigger:"blur"}],bearing:[{required:!0,message:"请输入承重",trigger:"blur"}],model:[{required:!0,message:"请输入型号",trigger:"blur"}],purchaseTime:[{required:!0,message:"请输入采购时间",trigger:"blur"}],provider:[{required:!0,message:"请输入供应商名称",trigger:"blur"}],unitPrice:[{required:!0,message:"请输入备件单价",trigger:"blur"}]},rules:{storeNumberCheck:[{required:!0,message:"请输入数量",trigger:"blur"}],remarkCheck:[{required:!0,message:"请输入备注",trigger:"blur"}]},value:"",value1:"",value2:"",value3:"",options1:[{id:"0",name:"日报"},{id:"1",name:"周报"},{id:"2",name:"月报"}],ids:[],formHeard:{name:"",model:"",updateBy:""},tableColumn:[],inPut:{number:null,remark:null,userName:null},resourceTableData:[],currentPage:1,pageSize:10,total:100,disabled:!1,title:"",size:"",editMode:!1,addMode:!1,addhourse:!1,edithourse:!1,inventoryAdjustments:!1,dialogHours:!1,inventoryinPut:{remark:""},pageCount:0,checckSpare:{idMain:null,name:null,model:null,storeNumber:null,storeNumberCheck:null,storeNumberDiff:null,remarkCheck:null},tableHeaders:["备件名字","承重","型号","采购时间","供应商名称"],tableHeadersMapping:{"备件名字":"name","承重":"bearing","型号":"model","采购时间":"purchaseTime","供应商名称":"provider"}}},computed:{dialogTitle:function(){return this.editMode?"编辑":"新增"},dialogHourse:function(){return this.addhourse?"入库":"出库"}},watch:{"checckSpare.storeNumberCheck":{handler:function(e){e&&(this.checckSpare.storeNumberDiff=this.checckSpare.storeNumberCheck-this.checckSpare.storeNumber)}}},created:function(){this.sparepartsList()},methods:{InventoryAdjustments:function(e,t){this.checckSpare=Object(l.a)({},t),this.checckSpare.idMain=t.id,this.inventoryAdjustments=!0},inventorycancells:function(){Object.assign(this.checckSpare,{idMain:null,name:null,model:null,storeNumber:null,storeNumberCheck:null,storeNumberDiff:null,remarkCheck:null}),this.inventoryAdjustments=!1},einventoryVisibles:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.inventoryinPut.validate();case 2:return t.next=4,Object(o.Hd)(e.checckSpare);case 4:200===t.sent.code?(e.$message.success("盘库成功"),e.inventoryAdjustments=!1,e.inventorycancells()):e.$message.error("盘库失败"),e.$router.push({path:"sparePartsReport/detail"});case 7:case"end":return t.stop()}}),t)})))()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id}))},outDiat:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=null,0!==e.ids.length){t.next=7;break}return t.next=4,Object(o.rb)(e.formHeard);case 4:a=t.sent,t.next=10;break;case 7:return t.next=9,Object(o.rb)({id:e.ids.join(",")},"导出.xls");case 9:a=t.sent;case 10:Object(n.b)(a.data,"备件周报列表.xls");case 11:case"end":return t.stop()}}),t)})))()},importData:function(){this.$refs.importDataComRef.openDialog()},sparePartReportInquireApi:function(){this.sparepartsList()},sparepartsList:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a,i;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$loading({lock:!0,text:"正在加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),t.next=3,Object(o.Jd)(Object(l.a)({pageIndex:e.currentPage,pageSize:e.pageSize},e.formHeard));case 3:i=t.sent,a.close(),"加载成功"===i.resultMsg?(e.tableColumn=i.data,e.total=i.count,e.pageCount=i.totalPages):e.$message.error("加载数据失败");case 6:case"end":return t.stop()}}),t)})))()},dialogFormVisibles:function(){this.dialogHours=!1},addhourseVisibles:function(e){var t=this;return Object(i.a)(Object(r.a)().mark((function a(){return Object(r.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.$refs[e].validate(function(){var e=Object(i.a)(Object(r.a)().mark((function e(a){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=16;break}return e.prev=1,e.next=4,Object(o.Ld)({number:Number(t.inPut.number),remark:t.inPut.remark,id:t.inPut.id,userName:t.inPut.userName});case 4:e.sent,t.sparepartsList(),t.dialogHours=!1,t.$message.success("入库成功"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1);case 14:e.next=18;break;case 16:return e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return a.stop()}}),a)})))()},cancells:function(e){this.$refs[e].clearValidate(),this.dialogHours=!1},edithourseVisibles:function(e){var t=this;return Object(i.a)(Object(r.a)().mark((function a(){return Object(r.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.$refs[e].validate(function(){var e=Object(i.a)(Object(r.a)().mark((function e(a){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=16;break}return e.prev=1,e.next=4,Object(o.Md)({number:Number(t.inPut.number),id:t.inPut.id});case 4:e.sent,t.sparepartsList(),t.dialogHours=!1,t.$message.success("出库成功"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1);case 14:e.next=18;break;case 16:return e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return a.stop()}}),a)})))()},warehouse:function(e,t){this.addhourse="init"===e,this.edithourse="out"===e,this.inPut=Object(l.a)({},t),this.dialogHours=!0},reset:function(){this.formHeard={},this.sparepartsList(),this.$message.success("重置成功")},addFn:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.editMode="edit"===e,this.addMode="add"===e,this.form=Object(l.a)({},t),this.dialogFormVisible=!0},adminFire:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(i.a)(Object(r.a)().mark((function e(a){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=16;break}return e.prev=1,e.next=4,Object(o.Gd)(Object(l.a)({},t.form));case 4:e.sent,t.sparepartsList(),t.dialogFormVisible=!1,t.$message({message:"新增成功",type:"success"}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1);case 14:e.next=18;break;case 16:return e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}())},cancel:function(e){this.$refs[e].clearValidate(),this.dialogFormVisible=!1},editModef:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(i.a)(Object(r.a)().mark((function e(a){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=16;break}return e.prev=1,e.next=4,Object(o.Kd)(Object(l.a)({},t.form));case 4:e.sent,t.sparepartsList(),t.dialogFormVisible=!1,t.$message({message:"编辑成功",type:"success"}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1);case 14:e.next=18;break;case 16:return e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}())},delet:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o.Id)({id:e.id}).then((function(){t.sparepartsList(),t.$message({message:"删除成功",type:"success"})})).catch((function(){t.$message({message:"删除失败",type:"success"})}))})).catch((function(){}))},handleCurrentChange:function(e){this.currentPage=e,this.sparepartsList()}}},d=(a("5132"),Object(u.a)(m,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"content"},[t("page-main",[t("g-page-lable",{scopedSlots:e._u([{key:"left",fn:function(){return[t("el-form",{attrs:{inline:!0,model:e.formHeard}},[t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"备件名称:"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.formHeard.name,callback:function(t){e.$set(e.formHeard,"name",t)},expression:"formHeard.name"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"型号:"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.formHeard.model,callback:function(t){e.$set(e.formHeard,"model",t)},expression:"formHeard.model"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"更新姓名:"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.formHeard.updateBy,callback:function(t){e.$set(e.formHeard,"updateBy",t)},expression:"formHeard.updateBy"}})],1),t("el-form-item",[t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.sparePartReportInquireApi}},[e._v("查询")])],1),t("el-form-item",[t("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.reset}},[e._v("重置")])],1)],1)]},proxy:!0},{key:"right",fn:function(){return[t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.addFn("add")}}},[e._v("新增")]),t("el-button",{attrs:{plain:""},on:{click:e.outDiat}},[e._v("导出")]),t("el-button",{attrs:{plain:""},on:{click:e.importData}},[e._v("导入")])]},proxy:!0}])})],1),t("page-main",[t("el-table",{attrs:{data:e.tableColumn,border:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"40"}}),t("el-table-column",{attrs:{label:"备件编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.id||"-"))]}}])}),t("el-table-column",{attrs:{prop:"name",label:"备件名称",width:"200"}}),t("el-table-column",{attrs:{prop:"bearing",label:"承重",width:"200"}}),t("el-table-column",{attrs:{prop:"model",label:"型号",width:"200"}}),t("el-table-column",{attrs:{prop:"storeNumber",label:"库存（购买单元)",width:"220"}}),t("el-table-column",{attrs:{prop:"updateBy",label:"更新人",width:"220"}}),t("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"220"}}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"330"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.warehouse("init",r)}}},[e._v("入库")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.addFn("edit",r)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.delet(r)}}},[e._v("删除")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.warehouse("out",r)}}},[e._v("出库")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.InventoryAdjustments("out",r)}}},[e._v("盘库")])]}}])})],1),t("div",{staticClass:"pagenation"},[t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total,prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,width:"45%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"form",attrs:{rules:e.rules1,inline:!0,model:e.form,"label-width":"auto"}},[t("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{label:"备件名称:",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{label:"承重:",prop:"bearing"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.form.bearing,callback:function(t){e.$set(e.form,"bearing",t)},expression:"form.bearing"}})],1),t("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{label:"型号:",prop:"model"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.form.model,callback:function(t){e.$set(e.form,"model",t)},expression:"form.model"}})],1),t("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{label:"采购时间:",prop:"purchaseTime"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"请选择采购时间"},model:{value:e.form.purchaseTime,callback:function(t){e.$set(e.form,"purchaseTime",t)},expression:"form.purchaseTime"}})],1),t("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{label:"供应商名称:",prop:"provider"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.form.provider,callback:function(t){e.$set(e.form,"provider",t)},expression:"form.provider"}})],1),t("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{label:"备件单价:",prop:"unitPrice"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.form.unitPrice,callback:function(t){e.$set(e.form,"unitPrice",t)},expression:"form.unitPrice"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.cancel("form")}}},[e._v("取 消")]),e.addMode?t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.adminFire("form")}}},[e._v("确 定")]):e._e(),e.editMode?t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editModef("form")}}},[e._v("确 定")]):e._e()],1)],1),t("el-dialog",{attrs:{title:e.dialogHourse,visible:e.dialogHours,width:"45%"},on:{"update:visible":function(t){e.dialogHours=t}}},[t("div",{staticClass:"dialog-title"},[t("div",{staticClass:"dialog-item"},[t("div",[e._v("备件名称:")]),t("div",[e._v(e._s(e.inPut.name))])]),t("div",{staticClass:"dialog-item"},[t("div",[e._v("承重:")]),t("div",[e._v(e._s(e.inPut.bearing))])]),t("div",{staticClass:"dialog-item"},[t("div",[e._v("型号:")]),t("div",[e._v(e._s(e.inPut.model))])])]),t("el-form",{ref:"inPut",attrs:{inline:!0,rules:e.rules,model:e.inPut,"label-width":"auto"}},[t("div",[t("el-form-item",{staticStyle:{"margin-left":"100px"},attrs:{label:"操作数量:",prop:"number"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.inPut.number,callback:function(t){e.$set(e.inPut,"number",t)},expression:"inPut.number"}})],1)],1),t("div",[t("el-form-item",{staticStyle:{"margin-left":"100px"},attrs:{label:"备注:",prop:"remark"}},[t("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",rows:2,placeholder:"请输入",clearable:""},model:{value:e.inPut.remark,callback:function(t){e.$set(e.inPut,"remark",t)},expression:"inPut.remark"}})],1)],1)]),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.cancells("inPut")}}},[e._v("取 消")]),e.addhourse?t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addhourseVisibles("inPut")}}},[e._v("提交")]):e._e(),e.edithourse?t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.edithourseVisibles("inPut")}}},[e._v("提交")]):e._e()],1)],1),t("el-dialog",{attrs:{title:"盘库",visible:e.inventoryAdjustments,width:"45%","destroy-on-close":""},on:{"update:visible":function(t){e.inventoryAdjustments=t}}},[t("div",{staticClass:"dialog-title"},[t("div",{staticClass:"dialog-item"},[t("div",[e._v("备件名称:")]),t("div",[e._v(e._s(e.checckSpare.name))])]),t("div",{staticClass:"dialog-item"},[t("div",[e._v("承重:")]),t("div",[e._v(e._s(e.checckSpare.bearing))])]),t("div",{staticClass:"dialog-item"},[t("div",[e._v("型号:")]),t("div",[e._v(e._s(e.checckSpare.model))])])]),t("el-form",{ref:"inventoryinPut",attrs:{inline:!0,rules:e.rules,model:e.checckSpare,"label-width":"auto"}},[t("el-form-item",{staticStyle:{"margin-left":"100px"},attrs:{label:"当前库存:"}},[t("el-input",{attrs:{disabled:!0,placeholder:"请输入",clearable:""},model:{value:e.checckSpare.storeNumber,callback:function(t){e.$set(e.checckSpare,"storeNumber",e._n(t))},expression:"checckSpare.storeNumber"}})],1),t("el-form-item",{attrs:{label:"库存差异:"}},[t("el-input",{attrs:{disabled:!0,placeholder:"请输入",clearable:""},model:{value:e.checckSpare.storeNumberDiff,callback:function(t){e.$set(e.checckSpare,"storeNumberDiff",e._n(t))},expression:"checckSpare.storeNumberDiff"}})],1),t("div",[t("el-form-item",{staticStyle:{"margin-left":"100px"},attrs:{label:"实际盘点库存:",prop:"storeNumberCheck"}},[t("el-input",{attrs:{placeholder:"请输实际盘点库存",clearable:""},model:{value:e.checckSpare.storeNumberCheck,callback:function(t){e.$set(e.checckSpare,"storeNumberCheck",e._n(t))},expression:"checckSpare.storeNumberCheck"}})],1)],1),t("div",[t("el-form-item",{staticStyle:{"margin-left":"100px"},attrs:{label:"备注:",prop:"remarkCheck"}},[t("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",rows:2,placeholder:"请输入",clearable:""},model:{value:e.checckSpare.remarkCheck,callback:function(t){e.$set(e.checckSpare,"remarkCheck",t)},expression:"checckSpare.remarkCheck"}})],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.inventorycancells("inventoryinPut")}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.einventoryVisibles("inventoryinPut")}}},[e._v("提交")])],1)],1),t("importDataCom",{ref:"importDataComRef",attrs:{"table-headers":e.tableHeaders,"table-headers-mapping":e.tableHeadersMapping},on:{close:e.sparepartsList}})],1)}),[],!1,null,"95e377aa",null));t.default=d.exports},"46cd":function(e,t,a){"use strict";a("163a")},"4be1":function(e,t,a){"use strict";a.r(t);a("498a");var r=a("c7eb"),i=a("1da1"),l=(a("14d9"),a("a434"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("365c")),n={props:{dialogVisible:{type:Boolean,default:!1},paymentListApi:{type:Function,required:!0}},data:function(){return{dialogFormVisible:!1,options:[{value:1,label:"一次性付款"},{value:2,label:"分期付款"}],dynamicValidateForm:{domains:[{moneyPayable:null,paymentDatePlan:null,remark:null,paymentType:1,key:Date.now()}]},value1:"",isShow:!1}},methods:{openDialog:function(e){this.contractNo=e,this.dialogFormVisible=!0},addDomain:function(){this.dynamicValidateForm.domains.push({moneyPayable:null,paymentDatePlan:null,remark:null,paymentType:1,key:Date.now()})},closeDialog:function(){this.resetForm(),this.dialogFormVisible=!1},resetForm:function(){this.$refs.dynamicValidateForm.resetFields(),this.dynamicValidateForm.domains=[{moneyPayable:null,paymentDatePlan:null,remark:null,paymentType:1,key:Date.now()}],this.contractNo=null},removeDomain:function(e){var t=this.dynamicValidateForm.domains.indexOf(e);-1!==t&&this.dynamicValidateForm.domains.splice(t,1)},submitForm:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.dynamicValidateForm.validate();case 2:if(!(e.dynamicValidateForm.domains.length<=0)){t.next=4;break}return t.abrupt("return",e.$message.error("请添加付款计划"));case 4:a=[],e.dynamicValidateForm.domains.forEach(function(){var t=Object(i.a)(Object(r.a)().mark((function t(i){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i.contractNo=e.contractNo,a.push(Object(l.Hc)(i)),e.paymentListApi();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Promise.all(a).then((function(){e.$message.success("创建付款计划成功"),e.closeDialog()})).catch((function(){e.$message.error("创建付款计划失败")}));case 7:case"end":return t.stop()}}),t)})))()}}},o=(a("9886"),a("2877")),s=Object(o.a)(n,(function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:"创建付款计划",visible:e.dialogFormVisible,width:"70%"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.closeDialog}},[t("el-form",{ref:"dynamicValidateForm",attrs:{model:e.dynamicValidateForm,inline:""}},[t("TransitionGroup",{attrs:{name:"list",tag:"div"}},e._l(e.dynamicValidateForm.domains,(function(a,r){return t("div",{key:a.key},[t("el-form-item",{attrs:{label:"付款类型",rules:{required:!0,message:"计划付款类型不能为空",trigger:"blur"},prop:"domains."+r+".paymentType"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:a.paymentType,callback:function(t){e.$set(a,"paymentType",t)},expression:"domain.paymentType"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"付款金额",prop:"domains."+r+".moneyPayable",rules:[{required:!0,message:"付款金额不能为空",trigger:"blur"},{type:"number",message:"请输入数字(限数字)",trigger:"change"}]}},[t("el-input",{attrs:{clearable:""},model:{value:a.moneyPayable,callback:function(t){e.$set(a,"moneyPayable",e._n(t))},expression:"domain.moneyPayable"}})],1),t("el-form-item",{attrs:{label:"计划付款时间",prop:"domains."+r+".paymentDatePlan",rules:{required:!0,message:"计划付款时间不能为空",trigger:"blur"}}},[t("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"选择日期"},model:{value:a.paymentDatePlan,callback:function(t){e.$set(a,"paymentDatePlan",t)},expression:"domain.paymentDatePlan"}})],1),t("el-form-item",{attrs:{label:"付款备注",prop:"domains."+r+".remark",rules:{required:!0,message:"计划付款备注不能为空",trigger:"blur"}}},[t("el-input",{model:{value:a.remark,callback:function(t){e.$set(a,"remark",t)},expression:"domain.remark"}})],1),e.dynamicValidateForm.domains.length>1?t("el-button",{attrs:{type:"danger"},on:{click:function(t){return t.preventDefault(),e.removeDomain(a)}}},[e._v(" 删除 ")]):e._e(),t("el-divider",[t("i",{staticClass:"el-icon-mobile-phone"}),e._v(" 计划付款"+e._s(r+1)+" ")])],1)})),0),t("el-button",{attrs:{type:"primary"},on:{click:e.addDomain}},[e._v("新增")])],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)],1)}),[],!1,null,"9d5b803c",null).exports,c=a("21f4"),u={components:{Dialog:s,contractDialogCom:a("25bf").a},data:function(){return{searchForm:{signatureUnit:null,contractNo:null,statusCollection:null,updateTimeBegin:null,updateTimeEnd:null},options:[{value:1,label:"未付款"},{value:2,label:"部分付款"},{value:3,label:"全部付款"}],searchTime:null,visible:!1,TableData:[],pageindex:1,pagesize:10,totalPages:0,totalRecords:0}},computed:{statusPayment:function(){return function(e){return{1:"待添加",2:"待完善",3:"已完善"}[e]}},statusCollectionMent:function(){return function(e){return{1:"未付款",2:"部分付款",3:"全部付款"}[e]}}},watch:{searchTime:{handler:function(e){null===e?(this.searchForm.updateTimeBegin=null,this.searchForm.updateTimeEnd=null):(this.searchForm.updateTimeBegin=e[0],this.searchForm.updateTimeEnd=e[1])}}},created:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.paYbind();case 1:case"end":return t.stop()}}),t)})))()},methods:{reportApi:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.I)(e.searchForm);case 2:a=t.sent,Object(c.b)(a.data,"支付汇报列表.xls");case 5:case"end":return t.stop()}}),t)})))()},paymentListMent:function(){this.paYbind()},loadFile:function(e){if(!e.fileUrl)return this.$message.error("暂无附件");window.open(e.fileUrl,"_blank")},paYbind:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a,i;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object.assign({pageIndex:e.pageindex,pageSize:e.pagesize},e.searchForm),t.next=3,Object(l.N)(a);case 3:"加载成功"===(i=t.sent).resultMsg?(e.TableData=i.data,e.totalRecords=i.count):e.$message.error("加载数据失败");case 5:case"end":return t.stop()}}),t)})))()},contractDetails:function(e){this.$refs.contractDialogComRef.openDialog(e,"detail")},paymentPlan:function(e){this.$refs.creatMakeCollectionDialogRef.openDialog(e.contractNo)},closeDialog:function(){this.visible=!1},searchMethod:function(){this.pageindex=1,this.paYbind()},resetForm:function(){this.pageindex=1,this.searchTime="",this.searchForm={},this.paYbind()},handleCurrentChange:function(e){this.pageindex=e,this.paYbind()}}},m=(a("d6ab"),Object(o.a)(u,(function(){var e=this,t=e._self._c;return t("div",[t("page-main",[t("el-form",{attrs:{inline:!0,"label-width":"90px",model:e.searchForm}},[t("el-form-item",{attrs:{label:"签署单位 :"}},[t("el-input",{attrs:{placeholder:"请输入使用方名称",clearable:""},model:{value:e.searchForm.signatureUnit,callback:function(t){e.$set(e.searchForm,"signatureUnit","string"==typeof t?t.trim():t)},expression:"searchForm.signatureUnit"}})],1),t("el-form-item",{attrs:{label:"合同编号 :"}},[t("el-input",{staticClass:"w200",attrs:{placeholder:"请输入合同编号",clearable:""},model:{value:e.searchForm.contractNo,callback:function(t){e.$set(e.searchForm,"contractNo","string"==typeof t?t.trim():t)},expression:"searchForm.contractNo"}})],1),t("el-form-item",{attrs:{label:"选择时间 :"}},[t("el-date-picker",{staticStyle:{width:"426px"},attrs:{type:"datetimerange","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchTime,callback:function(t){e.searchTime=t},expression:"searchTime"}})],1),t("el-form-item",{attrs:{label:"付款状态 :"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.statusCollection,callback:function(t){e.$set(e.searchForm,"statusCollection",t)},expression:"searchForm.statusCollection"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchMethod}},[e._v(" 搜 索 ")]),t("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-refresh"},on:{click:e.resetForm}},[e._v(" 重 置 ")]),t("el-button",{attrs:{type:"primary"},on:{click:e.reportApi}},[e._v(" 导出 ")])],1)],1),t("page-main",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.TableData,border:""}},[t("el-table-column",{attrs:{prop:"signatureUnit",label:"签署单位",width:"180"}}),t("el-table-column",{attrs:{prop:"contractNo",label:"合同编号",width:"180"}}),t("el-table-column",{attrs:{prop:"moneyTotal",label:"合同金额(元)",width:"180"}}),t("el-table-column",{attrs:{prop:"moneyPayable",label:"应付款金额",width:"180"}}),t("el-table-column",{attrs:{prop:"moneyPaid",label:"实付款金额",width:"180"}}),t("el-table-column",{attrs:{prop:"statusCollection",label:"付款状态",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.statusCollectionMent(t.row.statusCollection))+" ")]}}])}),t("el-table-column",{attrs:{prop:"statusPaymentPlan",label:"付款计划状态",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.statusPayment(t.row.statusPaymentPlan))+" ")]}}])}),t("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"200"}}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"260"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.loadFile(a.row)}}},[e._v("合同附件")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.paymentPlan(a.row)}}},[e._v("付款计划")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.contractDetails(a.row)}}},[e._v("详情")])]}}])})],1),t("div",{staticClass:"pagenation"},[t("el-pagination",{attrs:{background:"","current-page":e.pageindex,"page-size":e.pagesize,layout:"total,prev, pager, next, jumper",total:e.totalRecords},on:{"current-change":e.handleCurrentChange}})],1)],1),t("Dialog",{ref:"creatMakeCollectionDialogRef",attrs:{"payment-list-api":e.paymentListMent}}),t("contractDialogCom",{ref:"contractDialogComRef",attrs:{looklook:!0}})],1)}),[],!1,null,"f37c64cc",null));t.default=m.exports},"4c5d":function(e,t,a){},"4ef3":function(e,t,a){},"4f29":function(e,t,a){"use strict";a("4c5d")},"500b":function(e,t,a){"use strict";a("242a")},5132:function(e,t,a){"use strict";a("0381")},5185:function(e,t,a){"use strict";a.r(t);var r=a("c7eb"),i=a("1da1"),l=a("365c"),n={data:function(){return{dialogFormVisible:!1,form:{contractNo:null,moneyReceivable:null,collectionDatePlan:null,monthBegin:null,monthEnd:null,rangePlanTime:null},rules:{contractNo:[{required:!0,message:"请输入合同编号",trigger:"blur"}],moneyReceivable:[{required:!0,message:"请输入应收金额",trigger:"blur"},{type:"number",message:"应收金额必须为数字值",trigger:"blur"}],collectionDatePlan:[{type:"string",required:!0,message:"请输入计划收款日期",trigger:"blur"}],rangePlanTime:[{type:"array",required:!0,message:"请输入收款区间",trigger:"blur"}]},title:null}},methods:{openDialog:function(e){e.contractNo&&(this.title="修改收款计划",this.form.id=e.id,this.form.contractNo=e.contractNo,this.form.moneyReceivable=e.moneyReceivable,this.form.collectionDatePlan=e.collectionDatePlan,this.form.monthBegin=e.monthBegin,this.form.monthEnd=e.monthEnd,this.form.rangePlanTime=e.monthBegin?[e.monthBegin,e.monthEnd]:null),this.dialogFormVisible=!0},closeDialog:function(){this.resetForm(),this.dialogFormVisible=!1},resetForm:function(){this.$refs.form.resetFields(),this.form={id:null,contractNo:null,moneyReceivable:null,collectionDatePlan:null,monthBegin:null,monthEnd:null,rangePlanTime:null},this.title=null},rangePlanTimeChange:function(e){this.form.monthBegin=e[0],this.form.monthEnd=e[1]},submitForm:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.form.validate();case 2:if(a=null,!e.title){t.next=9;break}return t.next=6,Object(l.Vd)(e.form);case 6:a=t.sent,t.next=13;break;case 9:return e.form.statusPlan=4,t.next=12,Object(l.n)(e.form);case 12:a=t.sent;case 13:200===a.code&&(e.title?e.$message.success("修改成功"):e.$message.success("添加成功"),e.closeDialog(),e.$emit("reload"));case 14:case"end":return t.stop()}}),t)})))()}}},o=(a("ceec"),a("2877")),s=Object(o.a)(n,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.title||"新增收款计划",visible:e.dialogFormVisible,"destroy-on-close":""},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.closeDialog}},[t("el-form",{ref:"form",staticStyle:{"margin-left":"30px"},attrs:{model:e.form,rules:e.rules,inline:"","label-position":"right","label-width":"120px"}},[t("el-form-item",{staticStyle:{width:"400px"},attrs:{prop:"contractNo",label:"合同编号"}},[t("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请填写合同编号"},model:{value:e.form.contractNo,callback:function(t){e.$set(e.form,"contractNo",t)},expression:"form.contractNo"}})],1),t("el-form-item",{staticStyle:{width:"400px"},attrs:{prop:"moneyReceivable",label:"应收金额"}},[t("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请填写应收金额"},model:{value:e.form.moneyReceivable,callback:function(t){e.$set(e.form,"moneyReceivable",e._n(t))},expression:"form.moneyReceivable"}})],1),t("el-form-item",{staticStyle:{width:"400px"},attrs:{prop:"collectionDatePlan",label:"计划收款时间"}},[t("el-date-picker",{staticStyle:{width:"250px"},attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.collectionDatePlan,callback:function(t){e.$set(e.form,"collectionDatePlan",t)},expression:"form.collectionDatePlan"}})],1),t("el-form-item",{staticStyle:{width:"400px"},attrs:{prop:"rangePlanTime",label:"收款时间范围"}},[t("el-date-picker",{staticStyle:{width:"250px"},attrs:{format:"yyyy-MM",type:"monthrange","start-placeholder":"开始日期","range-separator":"至","end-placeholder":"结束日期","value-format":"yyyy-MM"},on:{change:function(t){return e.rangePlanTimeChange(t)}},model:{value:e.form.rangePlanTime,callback:function(t){e.$set(e.form,"rangePlanTime",t)},expression:"form.rangePlanTime"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)}),[],!1,null,"1f8bc992",null).exports,c=(a("d9e2"),{data:function(){var e=this;return{dialogFormVisible:!1,form:{id:null,moneyInvoice:null,remarkInvoice:null,fileInvoice:null},rules:{moneyInvoice:[{required:!0,message:"请输入开票金额",trigger:"blur"},{type:"number",message:"开票金额必须为数字值"}],remarkInvoice:[{required:!0,message:"请输入开票备注",trigger:"blur"}],fileInvoice:[{validator:function(t,a,r){e.fileList.length||r(new Error("请上传开票附件")),r()},trigger:"blur"}]},fileList:[]}},computed:{uploadURL:function(){return l.qb.uploadPictureUrl}},methods:{openDialog:function(e){this.form.id=e.id,this.dialogFormVisible=!0},closeDialog:function(){this.resetForm(),this.dialogFormVisible=!1},resetForm:function(){this.$refs.form.resetFields(),this.form={id:null,moneyInvoice:null,remarkInvoice:null,fileInvoice:null},this.fileList=[]},submitForm:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.form.validate().then(function(){var t=Object(i.a)(Object(r.a)().mark((function t(a){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return e.fileList.length>0&&(e.form.fileInvoice=e.fileList[0].response.data),t.next=5,Object(l.Vd)(e.form);case 5:200===t.sent.code?(e.$message({message:"开票成功",type:"success"}),e.closeDialog(),e.$emit("reload")):e.$message({message:"开票失败",type:"error"});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(){}));case 1:case"end":return t.stop()}}),t)})))()},beforeImgUpload:function(e){return!(e.size>=20971520)||(this.$message({message:"上传图片单张大小不能超过20M",type:"warning"}),!1)},handleRemove:function(e,t){this.fileList=t,this.$refs.form.validateField("fileInvoice")},handleAvatarSuccess:function(e,t,a){this.fileList=a,this.$refs.form.validateField("fileInvoice")},onExceed:function(){this.$message.warning("最多只能上传一个附件")}}}),u=(a("7b8b"),Object(o.a)(c,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"开票",visible:e.dialogFormVisible,"destroy-on-close":""},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.closeDialog}},[t("el-form",{ref:"form",staticStyle:{"margin-left":"30px"},attrs:{model:e.form,rules:e.rules,"label-position":"right","label-width":"120px"}},[t("el-form-item",{staticStyle:{width:"400px"},attrs:{prop:"moneyInvoice",label:"开票金额"}},[t("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请填写开票金额"},model:{value:e.form.moneyInvoice,callback:function(t){e.$set(e.form,"moneyInvoice",e._n(t))},expression:"form.moneyInvoice"}})],1),t("el-form-item",{staticStyle:{width:"400px"},attrs:{prop:"remarkInvoice",label:"备注"}},[t("el-input",{staticStyle:{width:"250px"},attrs:{type:"textarea",rows:7,placeholder:"请填写备注"},model:{value:e.form.remarkInvoice,callback:function(t){e.$set(e.form,"remarkInvoice",t)},expression:"form.remarkInvoice"}})],1),t("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"附件",prop:"fileInvoice"}},[t("el-upload",{staticClass:"upload-demo",attrs:{drag:"",accept:".png, .jpg, .jpeg, .pdf","before-upload":e.beforeImgUpload,action:e.uploadURL,"file-list":e.fileList,"on-remove":e.handleRemove,limit:1,multiple:"","on-success":e.handleAvatarSuccess,"on-exceed":e.onExceed},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),t("em",[e._v("点击上传")])]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传图片/PDF文件，且不超过20M")])])],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)}),[],!1,null,"14e2d9de",null).exports),m={data:function(){var e=this;return{dialogFormVisible:!1,form:{id:null,moneyActual:null,remarkMoneyActual:null,fileCollection:null},rules:{moneyActual:[{required:!0,message:"请输入实收金额",trigger:"blur"},{type:"number",message:"实收金额必须为数字值"}],remarkMoneyActual:[{required:!0,message:"请输入收款备注",trigger:"blur"}],fileCollection:[{validator:function(t,a,r){e.fileList.length||r(new Error("请上传开票附件")),r()},trigger:"blur"}]},fileList:[]}},computed:{uploadURL:function(){return l.qb.uploadPictureUrl}},methods:{openDialog:function(e){this.form.id=e.id,this.dialogFormVisible=!0},closeDialog:function(){this.resetForm(),this.dialogFormVisible=!1},resetForm:function(){this.$refs.form.resetFields(),this.form={id:null,moneyActual:null,remarkMoneyActual:null,fileCollection:null},this.fileList=[]},submitForm:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.form.validate().then(function(){var t=Object(i.a)(Object(r.a)().mark((function t(a){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return e.fileList.length>0&&(e.form.fileCollection=e.fileList[0].response.data),t.next=5,Object(l.Vd)(e.form);case 5:200===t.sent.code?(e.$message({message:"开票成功",type:"success"}),e.closeDialog(),e.$emit("reload")):e.$message({message:"开票失败",type:"error"});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(){}));case 1:case"end":return t.stop()}}),t)})))()},beforeImgUpload:function(e){return!(e.size>=20971520)||(this.$message({message:"上传图片单张大小不能超过20M",type:"warning"}),!1)},handleRemove:function(e,t){this.fileList=t,this.$refs.form.validateField("fileCollection")},handleAvatarSuccess:function(e,t,a){this.fileList=a,this.$refs.form.validateField("fileCollection")},onExceed:function(){this.$message.warning("最多只能上传一个附件")}}},d=(a("120a"),Object(o.a)(m,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"收款",visible:e.dialogFormVisible,"destroy-on-close":""},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.closeDialog}},[t("el-form",{ref:"form",staticStyle:{"margin-left":"30px"},attrs:{model:e.form,rules:e.rules,"label-position":"right","label-width":"120px"}},[t("el-form-item",{staticStyle:{width:"400px"},attrs:{prop:"moneyActual",label:"实收金额"}},[t("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请填写实收金额"},model:{value:e.form.moneyActual,callback:function(t){e.$set(e.form,"moneyActual",e._n(t))},expression:"form.moneyActual"}})],1),t("el-form-item",{staticStyle:{width:"400px"},attrs:{prop:"remarkMoneyActual",label:"备注"}},[t("el-input",{staticStyle:{width:"250px"},attrs:{type:"textarea",rows:7,placeholder:"请填写备注"},model:{value:e.form.remarkMoneyActual,callback:function(t){e.$set(e.form,"remarkMoneyActual",t)},expression:"form.remarkMoneyActual"}})],1),t("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"附件",prop:"fileCollection"}},[t("el-upload",{staticClass:"upload-demo",attrs:{drag:"",accept:".png, .jpg, .jpeg, .pdf","before-upload":e.beforeImgUpload,action:e.uploadURL,"file-list":e.fileList,"on-remove":e.handleRemove,limit:1,multiple:"","on-success":e.handleAvatarSuccess,"on-exceed":e.onExceed},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),t("em",[e._v("点击上传")])]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传图片/PDF文件，且不超过20M")])])],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)}),[],!1,null,"177628ea",null).exports),p=(a("a15b"),a("d81d"),{data:function(){return{dialogFormVisible:!1,form:{result:null},signatureUnit:null,rules:{result:[{required:!0,message:"请输入跟进内容",trigger:"blur"}]},multipleSelection:[]}},methods:{openDialog:function(e){this.multipleSelection=e,this.signatureUnit=e[0].signatureUnit,this.dialogFormVisible=!0},closeDialog:function(){this.resetForm(),this.dialogFormVisible=!1},resetForm:function(){this.$refs.form.resetFields(),this.form={result:null},this.multipleSelection=[],this.signatureUnit=null},submitForm:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a,i,n;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.form.validate();case 2:return a=e.multipleSelection.map((function(e){return e.contractNo})).join(","),i=e.multipleSelection.map((function(e){return e.contractName})).join(","),n={signatureUnit:e.signatureUnit,contractNum:e.multipleSelection.length,contractNo:a,contractName:i,result:e.form.result},t.next=7,Object(l.o)(n);case 7:200===t.sent.code?(e.$message({message:"添加进度成功",type:"success"}),e.closeDialog(),e.$emit("reload")):e.$message({message:"添加进度失败",type:"error"});case 9:case"end":return t.stop()}}),t)})))()}}}),f=(a("4f29"),Object(o.a)(p,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"收款",visible:e.dialogFormVisible,"destroy-on-close":"",width:"60vw"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.closeDialog}},[t("el-container",[t("el-main",[t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:12}},[t("el-card",{attrs:{shadow:"hover"}},[e._v(" 使用方名称："+e._s(e.signatureUnit)+" ")])],1),t("el-col",{attrs:{span:12}},[t("el-card",{attrs:{shadow:"hover"}},[e._v(" 合同数："+e._s(e.multipleSelection.length)+" ")])],1)],1),e._l(e.multipleSelection,(function(a,r){return t("el-row",{key:r,attrs:{gutter:24}},[t("el-col",{attrs:{span:12}},[t("el-card",{attrs:{shadow:"hover"}},[e._v(" 合同编号："+e._s(a.contractNo)+" ")])],1),t("el-col",{attrs:{span:12}},[t("el-card",{attrs:{shadow:"hover"}},[e._v(" 合同名称："+e._s(a.contractName)+" ")])],1)],1)}))],2),t("el-main",[t("el-form",{ref:"form",staticStyle:{"margin-left":"30px"},attrs:{model:e.form,rules:e.rules,"label-position":"top","label-width":"120px"}},[t("el-form-item",{staticStyle:{width:"400px"},attrs:{prop:"result",label:"跟进内容汇报"}},[t("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",rows:10,placeholder:"请输入跟进内容"},model:{value:e.form.result,callback:function(t){e.$set(e.form,"result",t)},expression:"form.result"}})],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)}),[],!1,null,"2576a4f2",null).exports),b=a("21f4"),h={components:{creatMakeCollectionDialog:s,billingDialog:u,collectionDialog:d,addProgressDialog:f},data:function(){return{tableColumn:[{id:1,props:"signatureUnit",label:"使用方",width:"100"},{id:2,props:"contractNo",label:"合同编号",width:"100"},{id:3,props:"contractName",label:"合同名称",width:"100"},{id:4,props:"moneyTotal",label:"合同金额（元）",width:"100"},{id:5,props:"moneyReceivable",label:"应收款金额",width:"100"},{id:6,props:"moneyInvoice",label:"开票金额",width:"100"},{id:7,props:"moneyActual",label:"实收金额",width:"100"},{id:8,props:"remarkInvoice",label:"开票备注",width:"100"},{id:9,props:"remarkMoneyActual",label:"实际收款备注",width:"100"},{id:10,props:"collectionDatePlan",label:"计划收款日期",width:"150"},{id:11,props:"monthBegin",label:"收款开始月份",width:"150"},{id:12,props:"monthEnd",label:"收款结束月份",width:"150"},{id:13,props:"statusPlan",label:"计划收款状态",width:"100"},{id:14,props:"updateTime",label:"更新时间",width:"100"}],TableData:[],currentPage:1,pageSize:10,pageCount:0,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},statusInvoiceOptions:[{value:1,label:"已开票"},{value:2,label:"未开票"}],searchForm:{signatureUnit:null,contractNo:null,remark:null,collectionDatePlanBegin:null,collectionDatePlanEnd:null,statusInvoice:null},searchTime:null,multipleSelection:[]}},watch:{searchTime:{deep:!0,handler:function(e){null===e?(this.searchForm.collectionDatePlanBegin=null,this.searchForm.collectionDatePlanEnd=null):(this.searchForm.collectionDatePlanBegin=e[0],this.searchForm.collectionDatePlanEnd=e[1])}}},crearted:function(){this.getList()},mounted:function(){this.getList()},methods:{getList:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a,i,n;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$loading({lock:!0,text:"正在加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),i=Object.assign({pageIndex:e.currentPage,pageSize:e.pageSize},e.searchForm),t.next=4,Object(l.Uc)(i);case 4:n=t.sent,a.close(),"加载成功"===n.resultMsg?(e.TableData=n.data,e.pageCount=n.totalPages):e.$message.error("加载数据失败");case 7:case"end":return t.stop()}}),t)})))()},handleCurrentChange:function(e){this.currentPage=e,this.getList()},handleSelectionChange:function(e){this.multipleSelection=e},resetSearch:function(){this.searchForm={signatureUnit:null,contractNo:null,remark:null,collectionDatePlanBegin:null,collectionDatePlanEnd:null,statusInvoice:null},this.searchTime=null,this.getList()},openReceiptPlanDialog:function(e){this.$refs.creatMakeCollectionDialogRef.openDialog(e)},openBillingDialog:function(e){this.$refs.billingDialogRef.openDialog(e)},openCollectionDialog:function(e){this.$refs.collectionDialogRef.openDialog(e)},openAddProgressDialog:function(){this.multipleSelection.length<=0?this.$message.error("请选择要添加进度的数据"):this.$refs.addProgressDialogRef.openDialog(this.multipleSelection)},exportExcel:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.Lc)(e.searchForm);case 2:a=t.sent,Object(b.b)(a.data,"收款计划列表.xls");case 4:case"end":return t.stop()}}),t)})))()},dateFormat:function(e,t){return"statusPlan"===t.property?1===e[t.property]?"即将到期":2===e[t.property]?"到期未开票":3===e[t.property]?"未开票待收款":4===e[t.property]?"未开票未收款":5===e[t.property]?"已开票待收款":6===e[t.property]?"已开票未收款":"已完成":e[t.property]}}},g=(a("46cd"),Object(o.a)(h,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"content"},[t("page-main",[t("g-page-lable",{scopedSlots:e._u([{key:"left",fn:function(){return[t("el-form",{ref:"searchFormRef",attrs:{inline:!0,model:e.searchForm}},[t("el-form-item",{staticStyle:{"margin-left":"1px"}},[e._v(" 计划收款日期 : "),t("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.searchTime,callback:function(t){e.searchTime=t},expression:"searchTime"}})],1),t("el-form-item",{attrs:{pprop:"signatureUnit"}},[t("g-input-prepend",{attrs:{"prepend-title":"使用方名称:",placeholder:"请填写使用方名称"},model:{value:e.searchForm.signatureUnit,callback:function(t){e.$set(e.searchForm,"signatureUnit",t)},expression:"searchForm.signatureUnit"}})],1),t("el-form-item",{attrs:{pprop:"contractNo"}},[t("g-input-prepend",{attrs:{"prepend-title":"合同编号:",placeholder:"请填写合同编号"},model:{value:e.searchForm.contractNo,callback:function(t){e.$set(e.searchForm,"contractNo",t)},expression:"searchForm.contractNo"}})],1),t("el-form-item",[t("g-input-prepend",{attrs:{"prepend-title":"备注信息:",placeholder:"请填写备注信息"},model:{value:e.searchForm.remark,callback:function(t){e.$set(e.searchForm,"remark",t)},expression:"searchForm.remark"}})],1),t("el-form-item",{attrs:{pprop:"status"}},[t("g-slelection-prepend",{attrs:{"selection-options":e.statusInvoiceOptions,"prepend-title":"开票状态:","place-holder":"请选择"},model:{value:e.searchForm.statusInvoice,callback:function(t){e.$set(e.searchForm,"statusInvoice",t)},expression:"searchForm.statusInvoice"}})],1),t("el-form-item",[t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.getList}},[e._v("查询")])],1),t("el-form-item",[t("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.resetSearch}},[e._v("重置")])],1)],1)]},proxy:!0}])})],1),t("page-main",[t("el-button",{attrs:{type:"primary"},on:{click:e.openReceiptPlanDialog}},[e._v("新增收款计划")]),t("el-button",{attrs:{type:"primary"},on:{click:e.openAddProgressDialog}},[e._v("添加进度")]),t("el-button",{attrs:{type:"primary"},on:{click:e.exportExcel}},[e._v("导出")])],1),t("page-main",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.TableData,border:"",fit:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),e._l(e.tableColumn,(function(a){return t("el-table-column",{key:a.id,attrs:{prop:a.props,label:a.label,"min-width":a.width,formatter:e.dateFormat}})})),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small",disabled:1===a.row.statusInvoice||!a.row.contractName},on:{click:function(t){return e.openBillingDialog(a.row)}}},[e._v(" 开票 ")]),t("el-button",{attrs:{type:"text",size:"small",disabled:7===a.row.statusPlan||!a.row.contractName||2===a.row.statusInvoice},on:{click:function(t){return e.openCollectionDialog(a.row)}}},[e._v(" 收款 ")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.openReceiptPlanDialog(a.row)}}},[e._v("编辑")])]}}])})],2),t("div",{staticClass:"pagenation"},[t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total,prev, pager, next, jumper","page-count":e.pageCount},on:{"current-change":e.handleCurrentChange}})],1)],1),t("creatMakeCollectionDialog",{ref:"creatMakeCollectionDialogRef",on:{reload:e.getList}}),t("billingDialog",{ref:"billingDialogRef",on:{reload:e.getList}}),t("collectionDialog",{ref:"collectionDialogRef",on:{reload:e.getList}}),t("addProgressDialog",{ref:"addProgressDialogRef",on:{reload:e.getList}})],1)}),[],!1,null,"0cfb8385",null));t.default=g.exports},"526c":function(e,t,a){"use strict";a.r(t);var r=a("c7eb"),i=a("1da1"),l=(a("14d9"),a("a434"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("365c")),n={data:function(){return{dialogFormVisible:!1,formLabelWidth:"120px",dynamicValidateForm:{domains:[{moneyReceivable:null,collectionDatePlan:null,monthBegin:null,monthEnd:null,rangTime:null,statusPlan:4,key:Date.now()}]},contractNo:null}},methods:{openDialog:function(e){this.contractNo=e,this.dialogFormVisible=!0},closeDialog:function(){this.resetForm(),this.dialogFormVisible=!1},resetForm:function(){this.$refs.dynamicValidateForm.resetFields(),this.dynamicValidateForm.domains=[{moneyReceivable:null,collectionDatePlan:null,monthBegin:null,monthEnd:null,rangTime:null,statusPlan:4,key:Date.now()}],this.contractNo=null},addDomain:function(){this.dynamicValidateForm.domains.push({moneyReceivable:null,collectionDatePlan:null,monthBegin:null,monthEnd:null,key:Date.now()})},removeDomain:function(e){var t=this.dynamicValidateForm.domains.indexOf(e);-1!==t&&this.dynamicValidateForm.domains.splice(t,1)},rangTimeChange:function(e,t){this.dynamicValidateForm.domains[t].monthBegin=e[0],this.dynamicValidateForm.domains[t].monthEnd=e[1]},submitForm:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.dynamicValidateForm.validate();case 2:if(!(e.dynamicValidateForm.domains.length<=0)){t.next=4;break}return t.abrupt("return",e.$message.error("请添加收款计划"));case 4:a=[],e.dynamicValidateForm.domains.forEach(function(){var t=Object(i.a)(Object(r.a)().mark((function t(i){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i.contractNo=e.contractNo,a.push(Object(l.n)(i));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Promise.all(a).then((function(){e.$message.success("创建收款计划成功"),e.closeDialog()})).catch((function(){e.$message.error("创建收款计划失败")}));case 7:case"end":return t.stop()}}),t)})))()}}},o=(a("97422"),a("2877")),s=Object(o.a)(n,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"创建收款计划",visible:e.dialogFormVisible,width:"70vw","destroy-on-close":""},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.closeDialog}},[t("el-form",{ref:"dynamicValidateForm",attrs:{model:e.dynamicValidateForm,inline:""}},[t("TransitionGroup",{attrs:{name:"list",tag:"div"}},e._l(e.dynamicValidateForm.domains,(function(a,r){return t("div",{key:a.key},[t("el-form-item",{attrs:{label:"应收金额",prop:"domains."+r+".moneyReceivable",rules:[{required:!0,message:"应收金额不能为空",trigger:"blur"},{type:"number",message:"请输入数字(限数字)",trigger:"change"}]}},[t("el-input",{attrs:{clearable:""},model:{value:a.moneyReceivable,callback:function(t){e.$set(a,"moneyReceivable",e._n(t))},expression:"domain.moneyReceivable"}})],1),t("el-form-item",{attrs:{label:"计划收款时间",prop:"domains."+r+".collectionDatePlan",rules:{required:!0,message:"计划收款时间不能为空",trigger:"blur"}}},[t("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"选择日期"},model:{value:a.collectionDatePlan,callback:function(t){e.$set(a,"collectionDatePlan",t)},expression:"domain.collectionDatePlan"}})],1),t("el-form-item",{attrs:{label:"收款范围",prop:"domains."+r+".rangTime",rules:{required:!0,message:"收款范围不能为空",trigger:"blur"}}},[t("el-date-picker",{attrs:{type:"monthrange",align:"right","unlink-panels":"","range-separator":"至",format:"yyyy-MM","value-format":"yyyy-MM","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:function(t){return e.rangTimeChange(t,r)}},model:{value:a.rangTime,callback:function(t){e.$set(a,"rangTime",t)},expression:"domain.rangTime"}})],1),e.dynamicValidateForm.domains.length>1?t("el-button",{attrs:{type:"danger"},on:{click:function(t){return t.preventDefault(),e.removeDomain(a)}}},[e._v(" 删除 ")]):e._e(),t("el-divider",[t("i",{staticClass:"el-icon-mobile-phone"}),e._v(" 计划收款"+e._s(r+1))])],1)})),0),t("el-button",{attrs:{type:"primary"},on:{click:e.addDomain}},[e._v("新增")])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)}),[],!1,null,"10f668db",null).exports,c=a("25bf"),u=a("21f4"),m={components:{creatMakeCollectionDialog:s,contractDialogCom:c.a},data:function(){return{tableColumn:[{id:1,props:"signatureUnit",label:"使用方",width:"50"},{id:2,props:"contractNo",label:"合同编号",width:"50"},{id:3,props:"contractName",label:"合同名称",width:"50"},{id:4,props:"moneyTotal",label:"合同金额（元）",width:"50"},{id:5,props:"moneyReceivable",label:"应收款金额",width:"50"},{id:6,props:"moneyReceived",label:"已收款金额",width:"50"},{id:7,props:"moneyUnreceived",label:"未收款金额",width:"50"},{id:8,props:"statusCollection",label:"收款状态",width:"50"},{id:9,props:"statusCollectionPlan",label:"收款计划",width:"50"},{id:10,props:"statusExpire",label:"到期状态",width:"50"}],TableData:[],currentPage:1,pageSize:10,pageCount:0,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},statusOptions:[{value:1,label:"未收款"},{value:2,label:"部分收款"},{value:3,label:"全部收款"}],statusExpireOptions:[{value:1,label:"待生效"},{value:2,label:"执行中"},{value:3,label:"即将到期"},{value:4,label:"已到期"}],contractNo:null,searchForm:{signatureUnit:null,contractNo:null,remark:null,signatureTimeBegin:null,signatureTimeEnd:null,statusCollection:null,statusExpire:null},searchTime:null}},crearted:function(){this.getList()},watch:{"$route.query.contractNo":{handler:function(){this.getList(),this.$route.query.contractNo&&(this.searchForm.contractNo=this.$route.query.contractNo,this.getList())},immediate:!0}},mounted:function(){},methods:{contractDetails:function(e){this.$refs.contractDialogComRef.openDialog(e,"detail")},getList:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a,i,n;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$loading({lock:!0,text:"正在加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),i=Object.assign({pageIndex:e.currentPage,pageSize:e.pageSize},e.searchForm),t.next=4,Object(l.hd)(i);case 4:n=t.sent,a.close(),"加载成功"===n.resultMsg?(e.TableData=n.data,e.pageCount=n.totalPages):e.$message.error("加载数据失败");case 7:case"end":return t.stop()}}),t)})))()},handleCurrentChange:function(e){this.currentPage=e,this.getList()},resetSearch:function(){this.$refs.searchFormRef.resetFields(),this.searchForm={signatureUnit:null,contractNo:null,remark:null,signatureTimeBegin:null,signatureTimeEnd:null,statusCollection:null,statusExpire:null},this.searchTime=null,this.getList()},loadFile:function(e){if(!e.fileUrl)return this.$message.error("暂无附件");window.open(e.fileUrl,"_blank")},creatCollection:function(e){this.$refs.creatMakeCollectionDialogRef.openDialog(e.contractNo)},exportExcel:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.J)(e.searchForm);case 2:a=t.sent,Object(u.b)(a.data,"收款合同列表.xls");case 4:case"end":return t.stop()}}),t)})))()},dateFormat:function(e,t){return"statusCollection"===t.property?1===e[t.property]?"未收款":2===e[t.property]?"部分收款":3===e[t.property]?"全部收款":"无":"statusCollectionPlan"===t.property?1===e[t.property]?"待添加":2===e[t.property]?"待完善":3===e[t.property]?"已完善":"无":"statusExpire"===t.property?1===e[t.property]?"待生效":2===e[t.property]?"执行中":3===e[t.property]?"即将到期":3===e[t.property]?"已到期":"无":e[t.property]}}},d=(a("0eb2"),Object(o.a)(m,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"content"},[t("page-main",[t("el-form",{ref:"searchFormRef",attrs:{inline:!0,model:e.searchForm}},[t("el-form-item",{staticStyle:{"margin-left":"1px"}},[t("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.searchTime,callback:function(t){e.searchTime=t},expression:"searchTime"}})],1),t("el-form-item",{attrs:{pprop:"signatureUnit"}},[t("g-input-prepend",{attrs:{"prepend-title":"使用方名称:",placeholder:"请填写使用方名称"},model:{value:e.searchForm.signatureUnit,callback:function(t){e.$set(e.searchForm,"signatureUnit",t)},expression:"searchForm.signatureUnit"}})],1),t("el-form-item",{attrs:{pprop:"contractNo"}},[t("g-input-prepend",{attrs:{"prepend-title":"合同编号:",placeholder:"请填写合同编号"},model:{value:e.searchForm.contractNo,callback:function(t){e.$set(e.searchForm,"contractNo",t)},expression:"searchForm.contractNo"}})],1),t("el-form-item",[t("g-input-prepend",{attrs:{"prepend-title":"备注信息:",placeholder:"请填写备注信息"},model:{value:e.searchForm.remark,callback:function(t){e.$set(e.searchForm,"remark",t)},expression:"searchForm.remark"}})],1),t("el-form-item",{attrs:{pprop:"statusCollection"}},[t("g-slelection-prepend",{attrs:{"selection-options":e.statusOptions,"prepend-title":"收款进度状态:","place-holder":"请选择"},model:{value:e.searchForm.statusCollection,callback:function(t){e.$set(e.searchForm,"statusCollection",t)},expression:"searchForm.statusCollection"}})],1),t("el-form-item",{attrs:{pprop:"statusExpire"}},[t("g-slelection-prepend",{attrs:{"selection-options":e.statusExpireOptions,"prepend-title":"到期状态:","place-holder":"请选择"},model:{value:e.searchForm.statusExpire,callback:function(t){e.$set(e.searchForm,"statusExpire",t)},expression:"searchForm.statusExpire"}})],1),t("el-form-item",[t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.getList}},[e._v("查询")])],1),t("el-form-item",[t("el-button",{on:{click:e.resetSearch}},[e._v("重置")])],1)],1)],1),t("page-main",[t("el-button",{attrs:{type:"primary"},on:{click:e.exportExcel}},[e._v("导出")])],1),t("page-main",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.TableData,border:"",fit:""}},[e._l(e.tableColumn,(function(a){return t("el-table-column",{key:a.id,attrs:{prop:a.props,label:a.label,"min-width":a.width,formatter:e.dateFormat}})})),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.loadFile(a.row)}}},[e._v("合同附件")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.creatCollection(a.row)}}},[e._v("创建收款计划")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.contractDetails(a.row)}}},[e._v("合同详情")])]}}])})],2),t("div",{staticClass:"pagenation"},[t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total,prev, pager, next, jumper","page-count":e.pageCount},on:{"current-change":e.handleCurrentChange}})],1)],1),t("creatMakeCollectionDialog",{ref:"creatMakeCollectionDialogRef"}),t("contractDialogCom",{ref:"contractDialogComRef",attrs:{looklook:!0}})],1)}),[],!1,null,"f3924dc4",null));t.default=d.exports},"5c3e":function(e,t,a){"use strict";a.r(t);a("fb6a");var r=a("5530"),i=a("c7eb"),l=a("1da1"),n=(a("a15b"),a("d81d"),a("14d9"),a("b0c0"),a("ac1f"),a("00b4"),a("498a"),a("365c")),o=a("21f4"),s=(a("e9c4"),a("b64b"),a("5a0c")),c=a.n(s),u={props:{looklook:{type:Boolean,default:!1}},data:function(){return{contractID:null,dialogFormVisible:!1,form:{signatureTime:null,contractName:null,signatureUnit:null,signatureTimeBegin:null,contractNo:null,statusContract:null,extensionContractNo:null,signatureTimeEnd:null,pipeHoleKilometre:null,pipeHoleSubKilometre:null,settlementInterval:null,type:"1"},form1:{moneyTotal:null,tenancyTerm:null,onceConnectionFee:null},options:[{value:"1",label:"管道租赁"},{value:"2",label:"支付合同"}],rules:{signatureTime:[{required:!0,message:"请输入签订时间",trigger:"blur"}],contractName:[{required:!0,message:"请输入合同名称",trigger:"blur"}],signatureUnit:[{required:!0,message:"请输入签署单位",trigger:"blur"}],signatureTimeBegin:[{required:!0,message:"请输入生效日期",trigger:"blur"}],contractNo:[{required:!0,message:"请输入合同编号",trigger:"blur"}],statusContract:[{required:!0,message:"请输入合同状态",trigger:"blur"}],extensionContractNo:[{required:!0,message:"请输入续签合同号",trigger:"blur"}],signatureTimeEnd:[{required:!0,message:"请输入到期日期",trigger:"blur"}],pipeHoleKilometre:[{required:!0,message:"请输入管孔公里数",trigger:"blur"}],pipeHoleSubKilometre:[{required:!0,message:"请输入租用管孔公里数",trigger:"blur"}],settlementInterval:[{required:!0,message:"请输入结算周期",trigger:"blur"}]},rules2:{moneyTotal:[{required:!0,message:"请输入合同金额",trigger:"blur"}],tenancyTerm:[{required:!0,message:"请输入租期期",trigger:"blur"}],onceConnectionFee:[{required:!0,message:"请输入一次性连接费用",trigger:"blur"}]},options2:[{id:1,label:"待发起"},{id:2,label:"OA走流程"},{id:3,label:"等待对方盖章"},{id:4,label:"已签订"},{id:5,label:"已终止"}],fileList:[],loading:!1}},computed:{uploadURL:function(){return n.qb.uploadPictureUrl}},methods:{closeDialog:function(){this.dialogFormVisible=!1,this.resetForm()},resetForm:function(){this.$refs.formRef1.resetFields(),this.$refs.formRef2.resetFields(),this.form={contractName:null,signatureUnit:null,signatureTimeBegin:null,signatureTimeEnd:null,extensionContractNo:null,moneyTotal:null,settlementInterval:null,onceConnectionFee:null},this.form1={moneyTotal:null,settlementInterval:null,onceConnectionFee:null},this.fileList=[],this.contractID=null},beforeImgUpload:function(e){return!(e.size>=20971520)||(this.$message({message:"上传文件大小不能超过20M",type:"warning"}),!1)},handleRemove:function(e,t){this.fileList=t},handleAvatarSuccess:function(e,t,a){this.fileList=a},onExceed:function(){this.$message.warning("最多只能上传一个附件")},openDialog:function(e,t){var a=this;return Object(l.a)(Object(i.a)().mark((function r(){var l,o,s,c,u;return Object(i.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("detail"!==t){r.next=3;break}return r.next=3,Object(n.D)(e.id);case 3:null!=e&&e.id&&(a.form=JSON.parse(JSON.stringify(e)),o=JSON.parse(JSON.stringify(e)),s=o.moneyTotal,c=o.tenancyTerm,u=o.onceConnectionFee,a.form1={moneyTotal:s,tenancyTerm:c,onceConnectionFee:u},null!==(l=a.form)&&void 0!==l&&l.fileUrl&&(a.fileList=[{name:"合同附件",url:a.form.fileUrl}]),a.contractID=e.id),a.dialogFormVisible=!0;case 5:case"end":return r.stop()}}),r)})))()},submitForm:function(){var e=this;if(c()(this.form.signatureTimeEnd).diff(this.form.signatureTimeBegin,"month")<1)return this.$message.warning("到期日期和生效日期之间必须大于1个月");this.$refs.formRef1.validate((function(t){if(!t)return!1;e.fileList.length||e.$message.warning("请上传附件")})),this.$refs.formRef2.validate(function(){var t=Object(l.a)(Object(i.a)().mark((function t(a){return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=21;break}if(e.loading=!0,t.prev=2,!e.contractID){t.next=11;break}return t.next=6,Object(n.G)(Object(r.a)(Object(r.a)({},e.form),{},{fileUrl:e.fileUrl},e.form1));case 6:200===t.sent.code?(e.$message.success("编辑成功"),e.closeDialog(),e.$emit("refresh")):e.$message.error("编辑失败"),e.loading=!1,t.next=16;break;case 11:return t.next=13,Object(n.F)(Object(r.a)(Object(r.a)({},e.form),{},{fileUrl:e.fileList[0].response.data},e.form1));case 13:200===t.sent.code?(e.$message.success("新增成功"),e.closeDialog(),e.$emit("refresh")):e.$message.error("请不要添加重复合同"),e.loading=!1;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(2),e.loading=!1;case 21:case"end":return t.stop()}}),t,null,[[2,18]])})));return function(e){return t.apply(this,arguments)}}())},previewFile:function(e){window.open(e.url)},previewNull:function(){}}},m=(a("f77c"),a("2877")),d=Object(m.a)(u,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.looklook?"合同详情":e.contractID?"编辑合同":"新建合同",visible:e.dialogFormVisible,width:"75%","append-to-body":!0,"destroy-on-close":""},on:{"update:visible":function(t){e.dialogFormVisible=t},closed:e.closeDialog}},[t("div",{staticClass:"container"},[t("h2",{staticStyle:{"margin-bottom":"20px"}},[e._v("合同基础信息")]),t("el-form",{ref:"formRef1",attrs:{rules:e.rules,inline:!0,model:e.form,"label-width":"auto"}},[t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"签订时间（日期）:",prop:"signatureTime"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"请选择",disabled:e.looklook},model:{value:e.form.signatureTime,callback:function(t){e.$set(e.form,"signatureTime",t)},expression:"form.signatureTime"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"合同名称:",prop:"contractName"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:e.looklook},model:{value:e.form.contractName,callback:function(t){e.$set(e.form,"contractName",t)},expression:"form.contractName"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"签署单位:",prop:"signatureUnit"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:e.looklook},model:{value:e.form.signatureUnit,callback:function(t){e.$set(e.form,"signatureUnit",t)},expression:"form.signatureUnit"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"生效日期:",prop:"signatureTimeBegin"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"请选择",disabled:e.looklook},model:{value:e.form.signatureTimeBegin,callback:function(t){e.$set(e.form,"signatureTimeBegin",t)},expression:"form.signatureTimeBegin"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"合同编号:",prop:"contractNo"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:e.looklook},model:{value:e.form.contractNo,callback:function(t){e.$set(e.form,"contractNo",t)},expression:"form.contractNo"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"合同状态:",prop:"statusContract"}},[t("el-select",{attrs:{placeholder:"请选择状态",disabled:e.looklook},model:{value:e.form.statusContract,callback:function(t){e.$set(e.form,"statusContract",t)},expression:"form.statusContract"}},e._l(e.options2,(function(e){return t("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"到期日期:",prop:"signatureTimeEnd"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"请选择",disabled:e.looklook},model:{value:e.form.signatureTimeEnd,callback:function(t){e.$set(e.form,"signatureTimeEnd",t)},expression:"form.signatureTimeEnd"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"管孔公里数:",prop:"pipeHoleKilometre"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:e.looklook},model:{value:e.form.pipeHoleKilometre,callback:function(t){e.$set(e.form,"pipeHoleKilometre",t)},expression:"form.pipeHoleKilometre"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"租用子管孔公里数:",prop:"pipeHoleSubKilometre"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:e.looklook},model:{value:e.form.pipeHoleSubKilometre,callback:function(t){e.$set(e.form,"pipeHoleSubKilometre",t)},expression:"form.pipeHoleSubKilometre"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"结算周期：",prop:"settlementInterval"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:e.looklook},model:{value:e.form.settlementInterval,callback:function(t){e.$set(e.form,"settlementInterval",t)},expression:"form.settlementInterval"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"续签合同号:"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:e.looklook},model:{value:e.form.extensionContractNo,callback:function(t){e.$set(e.form,"extensionContractNo",t)},expression:"form.extensionContractNo"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"合同类型:"}},[t("el-select",{attrs:{placeholder:"请选择类型",disabled:e.looklook},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("h2",{staticStyle:{"margin-bottom":"20px"}},[e._v("合同金额信息")]),t("el-form",{ref:"formRef2",attrs:{inline:!0,model:e.form1,rules:e.rules2,"label-width":"auto"}},[t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"合同金额:",prop:"moneyTotal"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:e.looklook},model:{value:e.form1.moneyTotal,callback:function(t){e.$set(e.form1,"moneyTotal",t)},expression:"form1.moneyTotal"}})],1),t("el-form-item",{attrs:{label:"租期:",prop:"tenancyTerm"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:e.looklook},model:{value:e.form1.tenancyTerm,callback:function(t){e.$set(e.form1,"tenancyTerm",t)},expression:"form1.tenancyTerm"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"一次性连接费用：",prop:"onceConnectionFee"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:e.looklook},model:{value:e.form1.onceConnectionFee,callback:function(t){e.$set(e.form1,"onceConnectionFee",t)},expression:"form1.onceConnectionFee"}})],1)],1),t("h2",{staticStyle:{"margin-bottom":"20px"}},[e._v("合同附件信息")]),t("div",{staticStyle:{"margin-left":"40px"}},[t("el-upload",{staticClass:"upload-demo",attrs:{drag:"",accept:".png, .jpg, .jpeg, .pdf","before-upload":e.beforeImgUpload,action:e.uploadURL,"file-list":e.fileList,"on-remove":e.handleRemove,limit:1,multiple:"","on-success":e.handleAvatarSuccess,"on-exceed":e.onExceed,"on-preview":e.looklook?e.previewFile:e.previewNull,disabled:e.looklook}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),t("em",[e._v("点击上传")])]),e.looklook?e._e():t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传图片/PDF文件，且不超过20M")])])],1)],1),e.looklook?e._e():t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.submitForm}},[e._v("确 定")])],1)])}),[],!1,null,"2bd2734b",null).exports,p=(a("a434"),a("25ca")),f={props:{tableHeaders:{type:Array,default:function(){return[]}},tableHeadersMapping:{type:Object,default:function(){}}},data:function(){return{dialogVisible:!1}},methods:{handleClose:function(){var e=this;this.$confirm("确认关闭？").then((function(){e.dialogVisible=!1})).catch((function(){}))},openDialog:function(){this.dialogVisible=!0},handleFileUpload:function(e){var t=this,a=JSON.parse(JSON.stringify(this.tableHeaders)),r=JSON.parse(JSON.stringify(this.tableHeadersMapping)),i=new FileReader;i.readAsBinaryString(e.file),i.onload=function(e){var i=e.target.result,l=p.a(i,{type:"binary"}),n=l.Sheets[l.SheetNames[0]],o=p.b.sheet_to_json(n,{header:a});o.splice(0,1);var s=o.map((function(e){for(var t={},i=0;i<a.length;i++)t[r[Object.keys(e)[i]]]=e[Object.keys(e)[i]];return t}));t.$confirm("是否确定导入数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){t.handleAdd(s)})).catch((function(){}))}},handleAdd:function(e){var t=this;e.map(function(){var e=Object(l.a)(Object(i.a)().mark((function e(a){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(n.F)(a);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),t.$message.error("导入失败");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()),this.$message.success("导入成功"),this.$emit("close"),this.dialogVisible=!1}}},b={components:{contractDialogCom:d,importCom:Object(m.a)(f,(function(){var e=this._self._c;return e("el-dialog",{attrs:{title:"导入数据",visible:this.dialogVisible,width:"40%","before-close":this.handleClose}},[e("div",{staticStyle:{"text-align":"center"}},[e("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"#","show-file-list":!1,accept:".xlsx,.xls","http-request":this.handleFileUpload}},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text"},[this._v("将文件拖到此处，或"),e("em",[this._v("点击上传")])]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[this._v("只能上传jpg/png文件，且不超过500kb")])])],1)])}),[],!1,null,null,null).exports},filters:{statusExpire:function(e){return{1:"待发起",2:"OA走流程",3:"等待对方盖章",4:"已签订",5:"已终止"}[e]||"-"},statustype:function(e){return{1:"一次性连接费用",2:"租金"}[e]||""}},data:function(){return{ids:[],dataList:{},status:1,deletAudit:{id:null,remark:"",isDel:1},value1:"",dialogdelet:!1,dialogFormVisible:!1,form:{signatureTime:"",contractName:"",signatureUnit:"",signatureTimeBegin:"",contractNo:"",statusExpire:"",extensionContractNo:"",signatureTimeEnd:"",pipeHoleKilometre:"",pipeHoleSubKilometre:"",settlementInterval:"",statusContract:"",contractType:""},fileList:[],form1:{moneyTotal:"",settlementInterval:"",onceConnectionFee:""},value:"",value3:"",options1:[{id:0,name:"已签订"},{id:1,name:"待签定"},{id:3,name:"未签订"}],tableData:[{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}],url:"",options2:[{id:1,label:"待发起"},{id:2,label:"OA走流程"},{id:3,label:"等待对方盖章"},{id:4,label:"已签订"},{id:5,label:"已终止"}],options3:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],options4:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],tableColumn:[],gridData:[],rules:{signatureTime:[{required:!0,message:"请输入签订时间",trigger:"blur"}],contractNo:[{required:!0,message:"请输入合同编号",trigger:"blur"}],contractName:[{required:!0,message:"请输入合同名称",trigger:"blur"}],signatureUnit:[{required:!0,message:"请输入签署单位",trigger:"blur"}],signatureTimeBegin:[{required:!0,message:"请输入生效日期",trigger:"blur"}],signatureTimeEnd:[{required:!0,message:"请输入到期日期",trigger:"blur"}],extensionContractNo:[{required:!0,message:"请输入续签合同号",trigger:"blur"}],moneyTotal:[{required:!0,message:"请输入合同金额",trigger:"blur"}],settlementInterval:[{required:!0,message:"请输入结算周期",trigger:"blur"}],onceConnectionFee:[{required:!0,message:"请输入一次性连接费用",trigger:"blur"}]},rulesdelet:{remark:[{required:!0,message:"请输入删除理由",trigger:"blur"}]},resourceTableData:[],currentPage:1,pageSize:10,total:100,disabled:!1,value2:null,size:"",showMoreData:!1,editMode:!1,addMode:!1,signatureTime:[],paremts:{contractName:"",contractNo:"",extensionContractNo:"",settlementInterval:"",updateTime:"",contract:"",signatureTimeBegin:"",signatureTimeEnd:"",signatureTime:"",value:"",options1value:"",statusContract:""},statusContract:5,previewInfo:{visible:!1,url:""},fileUrl:[],tableHeaders:["合同名称","续约合同编号","合同编号","合同状态","签署单位","合同签订时间","合同开始时间","合同到期时间","合同总金额","租期（月）","结算周期（月）","管孔公里数","租用子孔公里数","一次性连接费","首次费用说明","月租金（元）","年租金（元）","单价（元）","续约合同编号","原合同号","其他备注","到期状态","续约状态","收款状态"],tableHeadersMapping:{"合同名称":"contractName","续约合同编号":"extensionContractNo","合同编号":"contractNo","合同状态":"contractNo","签署单位":"signatureUnit","合同签订时间":"signatureTime","合同开始时间":"signatureTimeBegin","合同到期时间":"signatureTimeBegin","合同总金额":"moneyTotal","租期（月）":"tenancyTerm","结算周期（月）":"settlementInterval","管孔公里数":"pipeHoleKilometre","租用子孔公里数":"pipeHoleSubKilometre","一次性连接费":"onceConnectionFee","首次费用说明":"firstFeeExplain","月租金（元）":"rentMonth","年租金（元）":"rentYear","单价（元）":"unitPrice","原合同号":"contractNoOld","其他备注":"remark","到期状态":"statusExpire","续约状态":"statusExtension","收款状态":"statusCollection"}}},computed:{dialogTitle:function(){return this.editMode?"编辑合同":"新增合同"},uploadURL:function(){return n.qb.uploadPictureUrl}},created:function(){this.contractInfofindApi(),this.contractQueryForStatisticalApi()},methods:{showMore:function(){this.showMoreData=!this.showMoreData},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id}))},report:function(){var e=this;return Object(l.a)(Object(i.a)().mark((function t(){var a;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.H)({id:e.ids.join(",")},"导出.xls");case 2:a=t.sent,Object(o.b)(a.data,"备件周报列表.xls");case 4:case"end":return t.stop()}}),t)})))()},importData:function(){this.$refs.importDataComRef.openDialog()},contractQueryForStatisticalApi:function(){var e=this;return Object(l.a)(Object(i.a)().mark((function t(){var a;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.Q)();case 2:a=t.sent,e.dataList=a.data;case 4:case"end":return t.stop()}}),t)})))()},handleAvatarSuccess:function(e,t,a){this.fileList=a},onExceed:function(){this.$message.warning("最多只能上传1张图片")},handleRemove:function(e,t){this.fileList=t},handlePictureCardPreview:function(e){this.previewInfo.url=e.url,this.previewInfo.visible=!0},beforeImgUpload:function(e){return/(.jpg$)|(.png$)|(.jpeg$)/.test(e.name)?!(e.size>=20971520)||(this.$message({message:"上传图片单张大小不能超过20M",type:"warning"}),!1):(this.$message({message:"上传图片只能是 jpg、png、jpeg 格式!",type:"warning"}),!1)},payoutDetails:function(e){this.$router.push({path:"/workReport/collectionReport/collectionContractList",query:{contractNo:e.contractNo}})},editModef:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(l.a)(Object(i.a)().mark((function e(a){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=18;break}return e.prev=1,t.fileUrl=t.fileList.map((function(e){return e.response.data})).join(","),e.next=6,Object(n.G)(Object(r.a)(Object(r.a)({},t.form),{},{fileUrl:t.fileUrl},t.form1));case 6:e.sent,t.contractInfofindApi(),t.dialogFormVisible=!1,t.$message({message:"编辑成功",type:"success"}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1);case 16:e.next=20;break;case 18:return e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}())},cancell:function(e){this.$refs[e].clearValidate(),this.dialogFormVisible=!1},filterEmptyProperties:function(e){for(var t in e)"string"==typeof e[t]&&(e[t]=e[t].trim()),""!==e[t]&&null!=e[t]||delete e[t];return e},reset:function(){this.paremts={},this.signatureTime="",this.contractInfofindApi(),this.contractQueryForStatisticalApi(),this.$message.success("重置成功")},recording:function(){var e=this;return Object(l.a)(Object(i.a)().mark((function t(){var a;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.qd)(Object(r.a)({pageIndex:e.currentPage,pageSize:e.pageSize},e.form1));case 2:a=t.sent,e.gridData=a.data;case 5:case"end":return t.stop()}}),t)})))()},addaNewcontract:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(l.a)(Object(i.a)().mark((function e(a){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=19;break}return e.prev=1,0!==t.fileList.length&&(t.fileUrl=t.fileList[0].response.data),t.fileUrl=t.fileList.map((function(e){return e.response.data})).join(","),e.next=6,Object(n.F)(Object(r.a)(Object(r.a)({},t.form),{},{fileUrl:t.fileUrl},t.form1));case 6:e.sent,t.contractInfofindApi(),t.dialogFormVisible=!1,t.fileList=[],t.$message({message:"新增成功",type:"success"}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1);case 17:e.next=21;break;case 19:return e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}())},inquire:function(){this.contractInfofindApi(),this.contractQueryForStatisticalApi()},contractInfofindApi:function(){var e=this;return Object(l.a)(Object(i.a)().mark((function t(){var a,l,o;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$loading({lock:!0,text:"正在加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),e.signatureTime||(e.signatureTime=[]),e.paremts.signatureTimeBegin=e.signatureTime[0]||"",e.paremts.signatureTimeEnd=e.signatureTime[1]||"",l=Object(r.a)({pageIndex:e.currentPage,pageSize:e.pageSize},e.filterEmptyProperties(e.paremts)),t.next=8,Object(n.L)(l);case 8:o=t.sent,a.close(),"加载成功"===o.resultMsg?(e.tableColumn=o.data,e.total=o.count,e.pageCount=o.totalPages):e.$message.error("加载数据失败");case 12:case"end":return t.stop()}}),t)})))()},detail:function(e){this.$router.push({path:"collectionsReport/detail",query:{id:e.id}})},handleClick:function(e){this.$router.push({path:"/workReport/contractReport/collectionReview",query:{id:e.id,type:e.type,contractNo:e.contractNo}})},handleDownload:function(e){},addFn:function(e,t){"add"===e?this.$refs.contractDialogComRef.openDialog():this.$refs.contractDialogComRef.openDialog(t)},delet:function(e){this.deletAudit.id=e.id,this.dialogdelet=!0},dialogdeletfn:function(e){var t=this;return Object(l.a)(Object(i.a)().mark((function a(){return Object(i.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.$refs[e].validate(function(){var e=Object(l.a)(Object(i.a)().mark((function e(a){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=18;break}return e.prev=1,e.next=4,Object(n.P)({id:t.deletAudit.id,remark:t.deletAudit.remark,isDel:t.deletAudit.isDel});case 4:e.sent,t.contractInfofindApi(),t.dialogdelet=!1,t.deletAudit.remark="",t.$router.push({path:"/deleteAudit"}),t.$message({message:"提交成功",type:"success"}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1);case 16:e.next=20;break;case 18:return e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return a.stop()}}),a)})))()},dialogdeletfalse:function(e){this.$refs[e].clearValidate(),this.dialogdelet=!1},plug:function(e){var t=this;this.$confirm("此操作将永久终止该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n.G)({statusContract:t.statusContract,id:e.id}),t.contractInfofindApi()})).catch((function(){}))},handleCurrentChange:function(e){this.currentPage=e,this.contractInfofindApi()},changePage:function(){var e=this;return Object(l.a)(Object(i.a)().mark((function t(){var a;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.$loading({lock:!0,text:"正在加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),setTimeout((function(){a.close()}),1e3);case 2:case"end":return t.stop()}}),t)})))()}}},h=(a("ddc6"),Object(m.a)(b,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"content"},[t("page-main",[t("g-page-lable",{scopedSlots:e._u([{key:"left",fn:function(){var a,r,i,l,n,o,s,c;return[t("el-form",{staticStyle:{display:"flex","margin-bottom":"16px"},attrs:{inline:!0}},[t("div",[t("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"合同名称:"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.paremts.contractName,callback:function(t){e.$set(e.paremts,"contractName",t)},expression:"paremts.contractName"}})],1),t("el-form-item",{attrs:{label:"合同状态:"}},[t("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.paremts.statusContract,callback:function(t){e.$set(e.paremts,"statusContract",t)},expression:"paremts.statusContract"}},e._l(e.options2,(function(e){return t("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),t("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"合同编号:"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.paremts.contractNo,callback:function(t){e.$set(e.paremts,"contractNo",t)},expression:"paremts.contractNo"}})],1),t("div",{style:{display:e.showMoreData?"block":"none"}},[t("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{label:"结算周期:"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.paremts.settlementInterval,callback:function(t){e.$set(e.paremts,"settlementInterval",t)},expression:"paremts.settlementInterval"}})],1),t("el-form-item",{attrs:{label:"续签合同编号:"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.paremts.extensionContractNo,callback:function(t){e.$set(e.paremts,"extensionContractNo",t)},expression:"paremts.extensionContractNo"}})],1),t("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{label:"签订时间:"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.signatureTime,callback:function(t){e.signatureTime=t},expression:"signatureTime"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"更新时间:"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"请选择",size:e.size},model:{value:e.paremts.updateTime,callback:function(t){e.$set(e.paremts,"updateTime",t)},expression:"paremts.updateTime"}})],1)],1)],1),t("div",{staticClass:"moreData"},[t("span",{on:{click:e.showMore}},[e._v(e._s(e.showMoreData?"收起":"更多搜索条件"))])]),t("div",{staticStyle:{display:"flex"}},[t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.inquire}},[e._v("查询")])],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addFn("add")}}},[e._v("新增")])],1),t("el-form-item",[t("el-button",{on:{click:e.reset}},[e._v("重置")])],1),t("el-form-item",[t("el-button",{on:{click:e.report}},[e._v("导出")])],1),t("el-form-item",[t("el-button",{on:{click:e.importData}},[e._v("导入")])],1)],1)]),t("el-row",{staticStyle:{display:"flex"},attrs:{gutter:20}},[t("div",{staticClass:"gaiz"},[t("div",[e._v("等待对方盖章:")]),t("div",{staticClass:"gaiz-i"},[e._v(e._s((null===(a=e.dataList)||void 0===a?void 0:a.countStatusContract3)||0)+" 份")])]),t("div",{staticClass:"gaiz"},[t("div",[e._v("OA走流程:")]),t("div",{staticClass:"gaiz-i"},[e._v(e._s((null===(r=e.dataList)||void 0===r?void 0:r.countStatusContract2)||0)+" 份")])]),t("div",{staticClass:"gaiz"},[t("div",[e._v("已终止:")]),t("div",{staticClass:"gaiz-i"},[e._v(e._s((null===(i=e.dataList)||void 0===i?void 0:i.countStatusContract5)||0)+" 份")])]),t("div",{staticClass:"gaiz"},[t("div",[e._v("即将到期未续签:")]),t("div",{staticClass:"gaiz-i"},[e._v(e._s((null===(l=e.dataList)||void 0===l?void 0:l.countDueSoonUnsign)||0)+" 份")])]),t("div",{staticClass:"gaiz"},[t("div",[e._v("今年有应收款的合同:")]),t("div",{staticClass:"gaiz-i"},[e._v(e._s((null===(n=e.dataList)||void 0===n?void 0:n.countAccountsDue)||0)+" 份")])]),t("div",{staticClass:"gaiz"},[t("div",[e._v("有收款待审核的合同:")]),t("div",{staticClass:"gaiz-i"},[e._v(e._s((null===(o=e.dataList)||void 0===o?void 0:o.countAccountsDueUnreview)||0)+" 份")])]),t("div",{staticClass:"gaiz"},[t("div",[e._v("应收超时未收合同:")]),t("div",{staticClass:"gaiz-i"},[e._v(e._s((null===(s=e.dataList)||void 0===s?void 0:s.countAccountsDueUncollectMoney)||0)+" 份")])]),t("div",{staticClass:"gaiz"},[t("div",[e._v("已归档:")]),t("div",{staticClass:"gaiz-i"},[e._v(e._s((null===(c=e.dataList)||void 0===c?void 0:c.countPigeonhole)||0)+" 份")])])])]},proxy:!0}])})],1),t("page-main",[t("el-table",{ref:"tableRef",staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.tableColumn,border:"","row-key":"id"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{label:"签订时间(日期)",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.signatureTime&&a.signatureTime.slice(0,11))+" ")]}}])}),t("el-table-column",{attrs:{prop:"contractNo",label:"合同编号",width:"120"}}),t("el-table-column",{attrs:{prop:"contractName",label:"合同名称",width:"120"}}),t("el-table-column",{attrs:{label:"合同状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("statusExpire")(a.statusContract))+" ")]}}])}),t("el-table-column",{attrs:{prop:"signatureUnit",label:"签署单位",width:"200"}}),t("el-table-column",{attrs:{prop:"moneyTotal",label:"合同金额(元)",width:"120"}}),t("el-table-column",{attrs:{prop:"signatureTimeBegin",label:"生效日期",width:"200"}}),t("el-table-column",{attrs:{prop:"signatureTimeEnd",label:"到期日期",width:"200"}}),t("el-table-column",{attrs:{prop:"settlementInterval",label:"结算周期",width:"200"}}),t("el-table-column",{attrs:{prop:"extensionContractNo",label:"续签合同号",width:"240"}}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleClick(r)}}},[e._v(e._s("1"==r.type?"收款审核":"付款审核"))]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.addFn("edit",r,e.fileList)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.delet(r)}}},[e._v("删除")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.plug(r)}}},[e._v("终止")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.payoutDetails(r)}}},[e._v("收款明细")])]}}])})],1),t("div",{staticClass:"pagenation"},[t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total,prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{title:e.dialogTitle,visible:!1,width:"75%"}},[t("div",{staticClass:"messges"},[e._v("合同基础信息")]),t("el-form",{ref:"form",attrs:{rules:e.rules,inline:!0,model:e.form,"label-width":"auto"}},[t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"签订时间（日期）:",prop:"signatureTime"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"请选择",size:e.size},model:{value:e.form.signatureTime,callback:function(t){e.$set(e.form,"signatureTime",t)},expression:"form.signatureTime"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"合同名称:",prop:"contractName"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.form.contractName,callback:function(t){e.$set(e.form,"contractName",t)},expression:"form.contractName"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"签署单位:",prop:"signatureUnit"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.form.signatureUnit,callback:function(t){e.$set(e.form,"signatureUnit",t)},expression:"form.signatureUnit"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"生效日期:",prop:"signatureTimeBegin"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"请选择",size:e.size},model:{value:e.form.signatureTimeBegin,callback:function(t){e.$set(e.form,"signatureTimeBegin",t)},expression:"form.signatureTimeBegin"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"合同编号:",prop:"contractNo"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.form.contractNo,callback:function(t){e.$set(e.form,"contractNo",t)},expression:"form.contractNo"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"合同状态:"}},[t("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.form.statusContract,callback:function(t){e.$set(e.form,"statusContract",t)},expression:"form.statusContract"}},e._l(e.options2,(function(e){return t("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"续签合同号:"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.form.extensionContractNo,callback:function(t){e.$set(e.form,"extensionContractNo",t)},expression:"form.extensionContractNo"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"到期日期:",prop:"signatureTimeEnd"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"请选择",size:e.size},model:{value:e.form.signatureTimeEnd,callback:function(t){e.$set(e.form,"signatureTimeEnd",t)},expression:"form.signatureTimeEnd"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"管孔公里数:"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.form.pipeHoleKilometre,callback:function(t){e.$set(e.form,"pipeHoleKilometre",t)},expression:"form.pipeHoleKilometre"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"租用子管孔公里数:"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.form.pipeHoleSubKilometre,callback:function(t){e.$set(e.form,"pipeHoleSubKilometre",t)},expression:"form.pipeHoleSubKilometre"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"结算周期："}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.form.settlementInterval,callback:function(t){e.$set(e.form,"settlementInterval",t)},expression:"form.settlementInterval"}})],1)],1),t("div",{staticClass:"messges"},[e._v("合同金额信息")]),t("el-form",{attrs:{inline:!0,model:e.form1,rules:e.rules,"label-width":"auto"}},[t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"合同金额:",prop:"moneyTotal"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.form1.moneyTotal,callback:function(t){e.$set(e.form1,"moneyTotal",t)},expression:"form1.moneyTotal"}})],1),t("el-form-item",{attrs:{label:"结算周期:",prop:"settlementInterval"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.form1.settlementInterval,callback:function(t){e.$set(e.form1,"settlementInterval",t)},expression:"form1.settlementInterval"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"一次性连接费用：",prop:"onceConnectionFee"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.form1.onceConnectionFee,callback:function(t){e.$set(e.form1,"onceConnectionFee",t)},expression:"form1.onceConnectionFee"}})],1)],1),t("el-table",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{data:e.gridData}},[t("el-table-column",{attrs:{property:"id",label:"序号",width:"100"}}),t("el-table-column",{attrs:{property:"revenueYear",label:"营收年份",width:"200"}}),t("el-table-column",{attrs:{property:"month",label:"月份",width:"180"}}),t("el-table-column",{attrs:{property:"money",label:"金额",width:"180"}}),t("el-table-column",{attrs:{property:"name",label:"类型",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("statustype")(t.row.type))+" ")]}}])}),t("el-table-column",{attrs:{property:"collectionDateActual",label:"应收款",width:"180"}}),t("el-table-column",{attrs:{property:"collectionDatePlan",label:"计划收款日期",width:"200"}})],1),t("div",{staticClass:"messges"},[e._v("合同附件信息")]),t("el-form",{ref:"FormRef"},[t("el-form-item",{attrs:{prop:"fileList"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{accept:".png, .jpg, .jpeg","before-upload":e.beforeImgUpload,action:e.uploadURL,"file-list":e.fileList,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,limit:1,multiple:"","list-type":"picture-card","on-success":e.handleAvatarSuccess,"on-exceed":e.onExceed}},[t("i",{staticClass:"el-icon-plus"})])],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.cancell("form")}}},[e._v("取 消")]),e.addMode?t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addaNewcontract("form")}}},[e._v("确 定")]):e._e(),e.editMode?t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editModef("form")}}},[e._v("确 定")]):e._e()],1),t("el-dialog",{attrs:{visible:e.previewInfo.visible,title:"照片预览","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.previewInfo,"visible",t)}}},[t("img",{attrs:{width:"100%",src:e.previewInfo.url}})])],1),t("el-dialog",{attrs:{title:"删除合同",visible:e.dialogdelet,width:"35%"},on:{"update:visible":function(t){e.dialogdelet=t}}},[t("el-form",{ref:"deletAudit",attrs:{inline:!0,rules:e.rulesdelet,model:e.deletAudit,"label-width":"auto"}},[t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{prop:"remark",label:"删除理由:"}},[t("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入删除理由",clearable:""},model:{value:e.deletAudit.remark,callback:function(t){e.$set(e.deletAudit,"remark",t)},expression:"deletAudit.remark"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dialogdeletfn("deletAudit")}}},[e._v("提交删除理由")]),t("el-button",{on:{click:function(t){return e.dialogdeletfalse("deletAudit")}}},[e._v("取 消")])],1)],1),t("contractDialogCom",{ref:"contractDialogComRef",on:{refresh:e.contractInfofindApi}}),t("importCom",{ref:"importDataComRef",attrs:{"table-headers":e.tableHeaders,"table-headers-mapping":e.tableHeadersMapping},on:{close:e.contractInfofindApi}})],1)}),[],!1,null,"585d9269",null));t.default=h.exports},"5c54":function(e,t,a){},"5cb8":function(e,t,a){},"5e46":function(e,t,a){"use strict";a("6b5f")},"6b5f":function(e,t,a){},"6bcc":function(e,t,a){},"6d77":function(e,t,a){},"7b8b":function(e,t,a){"use strict";a("39d6")},"7deb":function(e,t,a){"use strict";a("5c54")},"836d":function(e,t,a){"use strict";a.r(t);var r=a("c7eb"),i=a("1da1"),l=a("5a0c"),n=a.n(l),o=a("365c"),s=a("21f4"),c={data:function(){return{otherBusinessId:null,dialogFormVisible:!1,form:{matterDescribe:null,chargePerson:null},rules:{matterDescribe:[{required:!0,message:"请填写事项描述",trigger:"blur"}],chargePerson:[{required:!0,message:"请填写事项负责人",trigger:"blur"}]}}},methods:{openDialog:function(e){var t=this;return Object(i.a)(Object(r.a)().mark((function a(){var i;return Object(r.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e){a.next=6;break}return t.otherBusinessId=e,a.next=4,Object(o.ed)(e);case 4:200===(i=a.sent).code&&(t.form=i.data);case 6:t.dialogFormVisible=!0;case 7:case"end":return a.stop()}}),a)})))()},closeDialog:function(){this.resetForm(),this.dialogFormVisible=!1,this.otherBusinessId=null},resetForm:function(){this.form={},this.$refs.FormRef.resetFields()},submitForm:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.FormRef.validate();case 2:if(a=null,!e.otherBusinessId){t.next=9;break}return t.next=6,Object(o.cd)(e.form);case 6:a=t.sent,t.next=12;break;case 9:return t.next=11,Object(o.Yc)(Object.assign(e.form,{status:1}));case 11:a=t.sent;case 12:200===a.code?(e.$message.success(e.otherBusinessId?"编辑成功":"新增成功"),e.closeDialog(),e.$emit("reload")):e.$message.error(e.otherBusinessId?"编辑失败":"新增失败");case 13:case"end":return t.stop()}}),t)})))()}}},u=(a("b5f9"),a("2877")),m=Object(u.a)(c,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.otherBusinessId?"编辑事项":"新增事项",visible:e.dialogFormVisible,"destroy-on-close":"",width:"40vw"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.closeDialog}},[t("el-form",{ref:"FormRef",attrs:{model:e.form,rules:e.rules}},[t("div",{staticStyle:{"padding-left":"50px"}},[t("el-form-item",{staticStyle:{"margin-right":"40px",width:"400px"},attrs:{prop:"matterDescribe"}},[t("g-input-prepend",{attrs:{"prepend-title":"事项描述："},model:{value:e.form.matterDescribe,callback:function(t){e.$set(e.form,"matterDescribe",t)},expression:"form.matterDescribe"}})],1),t("el-form-item",{staticStyle:{"margin-right":"40px",width:"400px"},attrs:{prop:"chargePerson"}},[t("g-input-prepend",{attrs:{"prepend-title":"事项负责人："},model:{value:e.form.chargePerson,callback:function(t){e.$set(e.form,"chargePerson",t)},expression:"form.chargePerson"}})],1)],1)]),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)}),[],!1,null,"c911cd58",null).exports,d=(a("b0c0"),a("ac1f"),a("00b4"),{data:function(){return{otherBusinessId:null,dialogFormVisible:!1,form:{followCase:null,status:1},rules:{followCase:[{required:!0,message:"请填写跟进情况",trigger:"blur"}],status:[{required:!0,message:"请选择事项状态",trigger:"blur"}]},fileList:[],previewInfo:{visible:!1,url:""}}},computed:{uploadURL:function(){return o.qb.uploadPictureUrl}},methods:{openDialog:function(e){var t=this;return Object(i.a)(Object(r.a)().mark((function a(){return Object(r.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.otherBusinessId=e,t.dialogFormVisible=!0;case 2:case"end":return a.stop()}}),a)})))()},closeDialog:function(){this.resetForm(),this.dialogFormVisible=!1,this.otherBusinessId=null,this.fileList=[]},resetForm:function(){this.form={followCase:null,status:1},this.otherBusinessId=null,this.$refs.FormRef.resetFields()},beforeImgUpload:function(e){return/(.jpg$)|(.png$)|(.jpeg$)/.test(e.name)?!(e.size>=20971520)||(this.$message({message:"上传图片单张大小不能超过20M",type:"warning"}),!1):(this.$message({message:"上传图片只能是 jpg、png、jpeg 格式!",type:"warning"}),!1)},handlePictureCardPreview:function(){this.previewInfo.url=this.fileList[0].response.data,this.previewInfo.visible=!0},handleRemove:function(e,t){this.fileList=t},handleAvatarSuccess:function(e,t,a){this.fileList=a},onExceed:function(){this.$message.warning("最多只能上传1张图片")},submitForm:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.FormRef.validate();case 2:return a=null,0!==e.fileList.length&&(a=e.fileList[0].response.data),t.next=6,Object(o.gd)(Object.assign(e.form,{id:e.otherBusinessId,url:a}));case 6:200===t.sent.code?(e.$message.success("修改成功"),e.$emit("reload"),e.closeDialog()):e.$message.error("修改失败");case 8:case"end":return t.stop()}}),t)})))()}}}),p=(a("ee50"),Object(u.a)(d,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"更新事项进度",visible:e.dialogFormVisible,"destroy-on-close":"",width:"40vw","append-to-body":""},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.closeDialog}},[t("el-form",{ref:"FormRef",attrs:{model:e.form,rules:e.rules}},[t("div",{staticStyle:{"padding-left":"50px"}},[t("el-form-item",{attrs:{label:"进度状态",propjj:"status"}},[t("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[t("el-radio",{attrs:{label:1}},[e._v("跟进中")]),t("el-radio",{attrs:{label:2}},[e._v("已完成")])],1)],1),t("el-form-item",{attrs:{label:"附件上传",prop:"fileList"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{accept:".png, .jpg, .jpeg","before-upload":e.beforeImgUpload,action:e.uploadURL,"file-list":e.fileList,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,limit:1,multiple:"","list-type":"picture-card","on-success":e.handleAvatarSuccess,"on-exceed":e.onExceed}},[t("i",{staticClass:"el-icon-plus"})])],1),t("el-form-item",{staticStyle:{"margin-right":"40px",width:"400px"},attrs:{prop:"followCase",label:"进度描述"}},[t("el-input",{attrs:{type:"textarea",rows:10,placeholder:"请输入内容"},model:{value:e.form.followCase,callback:function(t){e.$set(e.form,"followCase",t)},expression:"form.followCase"}})],1)],1)]),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1),t("el-dialog",{attrs:{visible:e.previewInfo.visible,title:"照片预览","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.previewInfo,"visible",t)}}},[t("img",{attrs:{width:"100%",src:e.previewInfo.url}})])],1)}),[],!1,null,"4da09417",null).exports),f={data:function(){return{otherBusinessId:null,dialogFormVisible:!1,currentPage:1,pageCount:0,pageSize:10,tableData:[]}},methods:{openDialog:function(e){this.otherBusinessId=e,this.getList(),this.dialogFormVisible=!0},getList:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a,i;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={matterId:e.otherBusinessId,pageIndex:e.currentPage,pageSize:e.pageSize},t.next=3,Object(o.ad)(a);case 3:"加载成功"==(i=t.sent).resultMsg?(e.tableData=i.data,e.pageCount=i.totalPages):e.$message.error("加载数据失败");case 5:case"end":return t.stop()}}),t)})))()},handleCurrentChange:function(e){this.currentPage=e,this.getList()},handleEdit:function(e,t){window.open(t)},exportDetailList:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.bd)({matterId:e.otherBusinessId});case 2:a=t.sent,Object(s.a)(a,"其他事项详情列表.xls");case 4:case"end":return t.stop()}}),t)})))()},closeDialog:function(){this.resetForm(),this.dialogFormVisible=!1},resetForm:function(){this.otherBusinessId=null,this.tableData=[]}}},b=(a("500b"),{components:{otherBusinessDialog:m,updateProgressDialog:p,BusinessDetailDialog:Object(u.a)(f,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"事项详情",visible:e.dialogFormVisible,"destroy-on-close":"",width:"40vw"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.closeDialog}},[t("g-page-lable",{scopedSlots:e._u([{key:"right",fn:function(){return[t("el-button",{attrs:{type:"primary"},on:{click:e.exportDetailList}},[e._v("导出")])]},proxy:!0}])}),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",fit:""}},[t("el-table-column",{attrs:{prop:"createTime",label:"跟进时间"}}),t("el-table-column",{attrs:{prop:"followPerson",label:"跟进人"}}),t("el-table-column",{attrs:{prop:"followCase",label:"跟进情况"}}),t("el-table-column",{attrs:{prop:"imgUrl",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.imgUrl?t("el-link",{attrs:{type:"success"},on:{click:function(t){return e.handleEdit(a.$index,a.row.imgUrl)}}},[e._v(" 附件查看"),t("i",{staticClass:"el-icon-view el-icon--right"})]):t("el-link",{staticClass:"el-icon-document-delete",attrs:{type:"info"}},[e._v("无附件")])]}}])})],1),t("div",{staticClass:"pagenation"},[t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total,prev, pager, next, jumper","page-count":e.pageCount},on:{"current-change":e.handleCurrentChange}})],1)],1)}),[],!1,null,"1e4a47f4",null).exports},data:function(){return{tableColumn:[{id:1,props:"matterDescribe",label:"事项描述",width:"50"},{id:2,props:"chargePerson",label:"事项描述负责人",width:"50"},{id:3,props:"followPerson",label:"跟进人",width:"50"},{id:4,props:"followCase",label:"跟进情况",width:"80"},{id:5,props:"status",label:"事项状态",width:"50"},{id:6,props:"updateTime",label:"更新时间",width:"50"}],TableData:[],searchTime:null,searchForm:{searchTimeBegin:null,searchTimeEnd:null,followPerson:null,status:null},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},statusOptions:[{value:1,label:"跟进中"},{value:2,label:"已关闭"}],currentPage:1,pageSize:10,pageCount:0,textSelect:null}},watch:{searchTime:{deep:!0,handler:function(e){null===e?(this.searchForm.searchTimeBegin=null,this.searchForm.searchTimeEnd=null):(this.searchForm.searchTimeBegin=e[0],this.searchForm.searchTimeEnd=e[1])}}},created:function(){this.getList()},methods:{getList:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a,i,l;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$loading({lock:!0,text:"正在加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),i=Object.assign({pageIndex:e.currentPage,pageSize:e.pageSize},e.searchForm),t.next=4,Object(o.dd)(i);case 4:"加载成功"===(l=t.sent).resultMsg?(e.TableData=l.data,e.pageCount=l.totalPages):e.$message.error("加载数据失败"),a.close();case 7:case"end":return t.stop()}}),t)})))()},sumitSearchForm:function(){this.currentPage=1,this.getList()},handleCurrentChange:function(e){this.currentPage=e,this.getList()},resetSearch:function(){this.searchTime=null,this.searchForm={searchTimeBegin:null,searchTimeEnd:null,followPerson:null,status:null},this.currentPage=1,this.getList()},addotherBusiness:function(){this.$refs.otherBusinessDialogRef.openDialog()},editotherBusiness:function(e){this.$refs.otherBusinessDialogRef.openDialog(e.id)},updateOtherBusiness:function(e){this.$refs.updateProgressDialogRef.openDialog(e.id)},detailOtherBusiness:function(e){this.$refs.BusinessDetailDialogRef.openDialog(e.id)},deletotherBusiness:function(e){var t=this;return Object(i.a)(Object(r.a)().mark((function a(){return Object(r.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(o.Zc)(e);case 2:t.getList();case 3:case"end":return a.stop()}}),a)})))()},exportBusiness:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.fd)(e.searchForm);case 2:a=t.sent,Object(s.b)(a.data,"其他事项列表.xls");case 4:case"end":return t.stop()}}),t)})))()},dateFormat:function(e,t){return"updateTime"===t.property?n()(e[t.property]).format("YYYY-MM-DD"):"status"===t.property?1===e[t.property]?"跟进":"已关闭":e[t.property]}}}),h=(a("5e46"),Object(u.a)(b,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"content"},[t("page-main",[t("el-form",{attrs:{inline:!0,model:e.searchForm}},[t("el-form-item",{staticStyle:{"margin-left":"1px"}},[t("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.searchTime,callback:function(t){e.searchTime=t},expression:"searchTime"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"}},[t("g-input-prepend",{attrs:{"prepend-title":"跟进人姓名:",placeholder:"请填写跟进人姓名"},model:{value:e.searchForm.followPerson,callback:function(t){e.$set(e.searchForm,"followPerson",t)},expression:"searchForm.followPerson"}})],1),t("el-form-item",[t("g-slelection-prepend",{attrs:{"selection-options":e.statusOptions,"prepend-title":"事项状态:","place-holder":"请选择"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}})],1),t("el-form-item",[t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.sumitSearchForm}},[e._v("查询")])],1),t("el-form-item",[t("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.resetSearch}},[e._v("重置")])],1)],1)],1),t("page-main",[t("el-button",{attrs:{type:"primary"},on:{click:e.addotherBusiness}},[e._v("新增")]),t("el-button",{attrs:{type:"primary"},on:{click:e.exportBusiness}},[e._v("导出")])],1),t("page-main",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.TableData,border:"",fit:""}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),e._l(e.tableColumn,(function(a){return t("el-table-column",{key:a.id,attrs:{prop:a.props,label:a.label,"min-width":a.width,formatter:e.dateFormat}})})),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.editotherBusiness(a.row)}}},[e._v("编辑事项")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.updateOtherBusiness(a.row)}}},[e._v("更新事项")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.detailOtherBusiness(a.row)}}},[e._v("详情")]),t("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{confirm:function(t){return e.deletotherBusiness(a.row.id)}}},[t("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[e._v("删除")])],1)]}}])})],2),t("div",{staticClass:"pagenation"},[t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total,prev, pager, next, jumper","page-count":e.pageCount},on:{"current-change":e.handleCurrentChange}})],1)],1),t("otherBusinessDialog",{ref:"otherBusinessDialogRef",on:{reload:e.getList}}),t("updateProgressDialog",{ref:"updateProgressDialogRef",on:{reload:e.getList}}),t("BusinessDetailDialog",{ref:"BusinessDetailDialogRef"})],1)}),[],!1,null,"4bda1807",null));t.default=h.exports},"8fb2":function(e,t,a){"use strict";a("e6fa")},"907a5":function(e,t,a){},97422:function(e,t,a){"use strict";a("0524")},9886:function(e,t,a){"use strict";a("a646")},9972:function(e,t,a){"use strict";a("c508")},a1d3:function(e,t,a){"use strict";a("1ea1")},a646:function(e,t,a){},a65a:function(e,t,a){},ab3a:function(e,t,a){"use strict";a("e9c48")},b299:function(e,t,a){},b4f1:function(e,t,a){"use strict";a.r(t);a("498a");var r=a("c7eb"),i=a("1da1"),l=(a("a15b"),a("d81d"),a("d9e2"),a("365c")),n={props:{paymentListApi:{type:Function,required:!0}},data:function(){var e=this;return{dialogFormVisible:!1,form:{id:null,moneyActual:null,remarkMoneyActual:null,filePayment:null},rules:{moneyActual:[{required:!0,message:"请输入实收金额",trigger:"blur"},{type:"number",message:"实收金额必须为数字值"}],remarkMoneyActual:[{required:!0,message:"请输入付款备注",trigger:"blur"}],filePayment:[{validator:function(t,a,r){e.fileList.length||r(new Error("请上传付款附件")),r()},trigger:"blur"}]},fileList:[]}},computed:{uploadURL:function(){return l.qb.uploadPictureUrl}},methods:{openDialog:function(e){this.form.id=e.id,this.dialogFormVisible=!0},closeDialog:function(){this.resetForm(),this.dialogFormVisible=!1},resetForm:function(){this.$refs.form.resetFields(),this.form={id:null,moneyActual:null,remarkMoneyActual:null,filePayment:null},this.fileList=[]},submitForm:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.form.validate().then(function(){var t=Object(i.a)(Object(r.a)().mark((function t(a){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return e.fileList.length>0&&(e.form.filePayment=e.fileList[0].response.data),t.next=5,Object(l.Jc)(e.form);case 5:200===t.sent.code?(e.$message({message:"开票成功",type:"success"}),e.paymentListApi(),e.closeDialog(),e.$emit("reload")):e.$message({message:"开票失败",type:"error"});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(){}));case 1:case"end":return t.stop()}}),t)})))()},beforeImgUpload:function(e){return!(e.size>=20971520)||(this.$message({message:"上传图片单张大小不能超过20M",type:"warning"}),!1)},handleRemove:function(e,t){this.fileList=t,this.$refs.form.validateField("filePayment")},handleAvatarSuccess:function(e,t,a){this.fileList=a,this.$refs.form.validateField("filePayment")},onExceed:function(){this.$message.warning("最多只能上传一个附件")}}},o=(a("7deb"),a("2877")),s=Object(o.a)(n,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"付款",visible:e.dialogFormVisible,"destroy-on-close":""},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.closeDialog}},[t("el-form",{ref:"form",staticStyle:{"margin-left":"30px"},attrs:{model:e.form,rules:e.rules,"label-position":"right","label-width":"120px"}},[t("el-form-item",{staticStyle:{width:"400px"},attrs:{prop:"moneyActual",label:"实付金额"}},[t("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请填写实收金额"},model:{value:e.form.moneyActual,callback:function(t){e.$set(e.form,"moneyActual",e._n(t))},expression:"form.moneyActual"}})],1),t("el-form-item",{staticStyle:{width:"400px"},attrs:{prop:"remarkMoneyActual",label:"付款备注"}},[t("el-input",{staticStyle:{width:"250px"},attrs:{type:"textarea",rows:7,placeholder:"请填写备注"},model:{value:e.form.remarkMoneyActual,callback:function(t){e.$set(e.form,"remarkMoneyActual",t)},expression:"form.remarkMoneyActual"}})],1),t("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"附件",prop:"filePayment"}},[t("el-upload",{staticClass:"upload-demo",attrs:{drag:"",accept:".png, .jpg, .jpeg, .pdf","before-upload":e.beforeImgUpload,action:e.uploadURL,"file-list":e.fileList,"on-remove":e.handleRemove,limit:1,multiple:"","on-success":e.handleAvatarSuccess,"on-exceed":e.onExceed},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),t("em",[e._v("点击上传")])]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传图片/PDF文件，且不超过20M")])])],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)}),[],!1,null,"4b8dee5a",null).exports,c={props:{paymentListApi:{type:Function,required:!0}},data:function(){var e=this;return{dialogFormVisible:!1,form:{id:null,moneyInvoice:null,remarkInvoice:null,fileInvoice:null},rules:{moneyInvoice:[{required:!0,message:"请输入开票金额",trigger:"blur"},{type:"number",message:"开票金额必须为数字值"}],remarkInvoice:[{required:!0,message:"请输入开票备注",trigger:"blur"}],fileInvoice:[{validator:function(t,a,r){e.fileList.length||r(new Error("请上传开票附件")),r()},trigger:"blur"}]},fileList:[]}},computed:{uploadURL:function(){return l.qb.uploadPictureUrl}},methods:{openDialog:function(e){this.form.id=e.id,this.dialogFormVisible=!0},closeDialog:function(){this.resetForm(),this.dialogFormVisible=!1},resetForm:function(){this.$refs.form.resetFields(),this.form={id:null,moneyInvoice:null,remarkInvoice:null,fileInvoice:null},this.fileList=[]},submitForm:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.form.validate().then(function(){var t=Object(i.a)(Object(r.a)().mark((function t(a){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return e.fileList.length>0&&(e.form.fileInvoice=e.fileList[0].response.data),t.next=5,Object(l.Jc)(e.form);case 5:200===t.sent.code?(e.$message({message:"开票成功",type:"success"}),e.paymentListApi(),e.closeDialog(),e.$emit("reload")):e.$message({message:"开票失败",type:"error"});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(){}));case 1:case"end":return t.stop()}}),t)})))()},beforeImgUpload:function(e){return!(e.size>=20971520)||(this.$message({message:"上传图片单张大小不能超过20M",type:"warning"}),!1)},handleRemove:function(e,t){this.fileList=t,this.$refs.form.validateField("fileInvoice")},handleAvatarSuccess:function(e,t,a){this.fileList=a,this.$refs.form.validateField("fileInvoice")},onExceed:function(){this.$message.warning("最多只能上传一个附件")}}},u=(a("d579"),Object(o.a)(c,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"开票",visible:e.dialogFormVisible,"destroy-on-close":""},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.closeDialog}},[t("el-form",{ref:"form",staticStyle:{"margin-left":"30px"},attrs:{model:e.form,rules:e.rules,"label-position":"right","label-width":"120px"}},[t("el-form-item",{staticStyle:{width:"400px"},attrs:{prop:"moneyInvoice",label:"开票金额"}},[t("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请填写开票金额"},model:{value:e.form.moneyInvoice,callback:function(t){e.$set(e.form,"moneyInvoice",e._n(t))},expression:"form.moneyInvoice"}})],1),t("el-form-item",{staticStyle:{width:"400px"},attrs:{prop:"remarkInvoice",label:"开票备注"}},[t("el-input",{staticStyle:{width:"250px"},attrs:{type:"textarea",rows:7,placeholder:"请填写备注"},model:{value:e.form.remarkInvoice,callback:function(t){e.$set(e.form,"remarkInvoice",t)},expression:"form.remarkInvoice"}})],1),t("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"附件",prop:"fileInvoice"}},[t("el-upload",{staticClass:"upload-demo",attrs:{drag:"",accept:".png, .jpg, .jpeg, .pdf","before-upload":e.beforeImgUpload,action:e.uploadURL,"file-list":e.fileList,"on-remove":e.handleRemove,limit:1,multiple:"","on-success":e.handleAvatarSuccess,"on-exceed":e.onExceed},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),t("em",[e._v("点击上传")])]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传图片/PDF文件，且不超过20M")])])],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)}),[],!1,null,"32b49971",null).exports),m=a("21f4"),d={components:{paymentDialog:s,billingDialog:u},data:function(){return{searchForm:{signatureUnit:null,contractNo:null,remarkMoneyActual:null,paymentDatePlanBegin:null,paymentDatePlanEnd:null},ids:[],searchTime:null,visible:!1,tableData:[],pageindex:1,pagesize:10,totalRecords:0}},computed:{statusReview:function(){return function(e){return{1:"即将到期",2:"到期未开票",3:"未开票待付款",4:"未开票未付款",5:"已开票待付款",6:"已开票未付款",7:"已完成"}[e]||"无"}}},watch:{searchTime:{handler:function(e){null===e?(this.searchForm.paymentDatePlanBegin=null,this.searchForm.paymentDatePlanEnd=null):(this.searchForm.paymentDatePlanBegin=e[0],this.searchForm.paymentDatePlanEnd=e[1])}}},created:function(){this.paymentList()},methods:{paymentListMent:function(){this.paymentList()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id}))},report:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.Kc)({id:e.ids.join(",")},"导出.xls");case 2:a=t.sent,Object(m.b)(a.data,"支付管理列表.xls");case 4:case"end":return t.stop()}}),t)})))()},paymentList:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a,i;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object.assign({pageIndex:e.pageindex,pageSize:e.pagesize},e.searchForm),t.next=3,Object(l.Mc)(a);case 3:"加载成功"===(i=t.sent).resultMsg?(e.tableData=i.data,e.totalRecords=i.count):e.$message.error("加载数据失败");case 5:case"end":return t.stop()}}),t)})))()},openCollectionDialog:function(e){this.$refs.paymentDialogRef.openDialog(e)},handleClick:function(e){this.$refs.billingDialogRef.openDialog(e)},paymentPlan:function(){this.visible=!0},closeDialog:function(){this.visible=!1},searchMethod:function(){this.pageindex=1,this.paymentList()},resetForm:function(){this.pageindex=1,this.searchTime="",this.searchForm={},this.paymentList()},paymentDelet:function(e){var t=this;return Object(i.a)(Object(r.a)().mark((function a(){return Object(r.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l.Ic)({id:e.id}).then((function(){t.paymentList(),t.$message({message:"删除成功",type:"success"})})).catch((function(){t.$message({message:"删除失败",type:"success"})}))})).catch((function(){}));case 1:case"end":return a.stop()}}),a)})))()},handleCurrentChange:function(e){this.pageindex=e,this.paymentList()}}},p=(a("0d29"),Object(o.a)(d,(function(){var e=this,t=e._self._c;return t("div",[t("page-main",[t("el-form",{attrs:{inline:!0,"label-width":"90px",model:e.searchForm}},[t("el-form-item",{attrs:{label:"签署单位 :"}},[t("el-input",{attrs:{placeholder:"请输入签署单位",clearable:""},model:{value:e.searchForm.signatureUnit,callback:function(t){e.$set(e.searchForm,"signatureUnit","string"==typeof t?t.trim():t)},expression:"searchForm.signatureUnit"}})],1),t("el-form-item",{attrs:{label:"合同编号 :"}},[t("el-input",{staticClass:"w200",attrs:{placeholder:"请输入合同编号",clearable:""},model:{value:e.searchForm.contractNo,callback:function(t){e.$set(e.searchForm,"contractNo","string"==typeof t?t.trim():t)},expression:"searchForm.contractNo"}})],1),t("el-form-item",{attrs:{label:"付款时间 :"}},[t("el-date-picker",{staticStyle:{width:"340px"},attrs:{type:"datetimerange","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchTime,callback:function(t){e.searchTime=t},expression:"searchTime"}})],1),t("el-form-item",{attrs:{label:"付款备注 :"}},[t("el-input",{staticClass:"w200",attrs:{placeholder:"请输入备注信息",clearable:""},model:{value:e.searchForm.remarkMoneyActual,callback:function(t){e.$set(e.searchForm,"remarkMoneyActual","string"==typeof t?t.trim():t)},expression:"searchForm.remarkMoneyActual"}})],1),t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchMethod}},[e._v(" 搜 索 ")]),t("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-refresh"},on:{click:e.resetForm}},[e._v(" 重 置 ")])],1)],1),t("page-main",[t("el-button",{attrs:{type:"primary"},on:{click:e.report}},[e._v(" 导出 ")])],1),t("page-main",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{prop:"signatureUnit",label:"签署单位",width:"180"}}),t("el-table-column",{attrs:{prop:"contractNo",label:"合同编号",width:"180"}}),t("el-table-column",{attrs:{prop:"contractName",label:"合同名称",width:"180"}}),t("el-table-column",{attrs:{prop:"moneyTotal",label:"合同金额(元)",width:"180"}}),t("el-table-column",{attrs:{prop:"moneyPayable",label:"应付款金额",width:"180"}}),t("el-table-column",{attrs:{prop:"paymentDatePlan",label:"计划付款日期",width:"180"}}),t("el-table-column",{attrs:{prop:"moneyInvoice",label:"开票金额",width:"180"}}),t("el-table-column",{attrs:{prop:"remarkInvoice",label:"开票备注",width:"180"}}),t("el-table-column",{attrs:{prop:"dateInvoice",label:"开票时间",width:"180"}}),t("el-table-column",{attrs:{prop:"moneyActual",label:"实付金额",width:"180"}}),t("el-table-column",{attrs:{prop:"paymentDateActual",label:"实际付款日期",width:"180"}}),t("el-table-column",{attrs:{prop:"remarkMoneyActual",label:"付款备注",width:"180"}}),t("el-table-column",{attrs:{label:"付款状态",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.statusReview(t.row.statusPlan))+" ")]}}])}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(a){var r,i;return[t("el-button",{attrs:{type:"text",size:"small",disabled:0==!(null!==(r=a.row)&&void 0!==r&&r.moneyInvoice)},on:{click:function(t){return e.handleClick(a.row)}}},[e._v("开票")]),t("el-button",{attrs:{type:"text",size:"small",disabled:0==!(null!==(i=a.row)&&void 0!==i&&i.moneyActual)},on:{click:function(t){return e.openCollectionDialog(a.row)}}},[e._v("付款")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.paymentDelet(a.row)}}},[e._v("删除")])]}}])})],1),t("div",{staticClass:"pagenation"},[t("el-pagination",{attrs:{background:"","current-page":e.pageindex,"page-size":e.pagesize,layout:"total,prev, pager, next, jumper",total:e.totalRecords},on:{"current-change":e.handleCurrentChange}})],1)],1),t("paymentDialog",{ref:"paymentDialogRef",attrs:{"payment-list-api":e.paymentListMent}}),t("billingDialog",{ref:"billingDialogRef",attrs:{"payment-list-api":e.paymentListMent}})],1)}),[],!1,null,"7a102aea",null));t.default=p.exports},b4fd:function(e,t,a){"use strict";a("6bcc")},b5f9:function(e,t,a){"use strict";a("c753")},ba2a:function(e,t,a){},bb28:function(e,t,a){"use strict";a.r(t);a("b0c0");var r=a("5530"),i=a("c7eb"),l=a("1da1"),n=(a("14d9"),a("365c")),o={filters:{statusExpire:function(e){return{1:"审核中",2:"审核通过",3:"审核不通过"}[e]||"-"}},data:function(){return{inventoryAdjustmentsAudit:!1,rules:{number:[{required:!0,message:"请输入数量",trigger:"blur"}]},formHeard:{name:"",model:"",updateBy:""},tableColumn:[{name:"555",bearing:52,model:10}],inPut:{number:null},resourceTableData:[],currentPage:1,pageSize:10,total:100,disabled:!1,value2:null,title:"",size:"",editMode:!1,addMode:!1,addhourse:!1,tableDetail:{id:null,remark:"",status:3},edithourse:!1,dialogHours:!1,pageCount:0}},computed:{difference:function(){return this.inPut.storeNumberCheck-this.inPut.storeNumber},dialogTitle:function(){return this.editMode?"编辑":"新增"},dialogHourse:function(){return this.addhourse?"入库":"出库"}},mounted:function(){this.sparePartCheckfindApi()},created:function(){},methods:{commitAmidet:function(){var e=this;return Object(l.a)(Object(i.a)().mark((function t(){return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.Ed)({id:e.tableDetail.id,status:e.tableDetail.status});case 2:e.inventoryAdjustmentsAudit=!1;case 3:case"end":return t.stop()}}),t)})))()},cancell:function(){this.inventoryAdjustmentsAudit=!1},inventory:function(e){this.tableDetail=e,this.inventoryAdjustmentsAudit=!0,this.inPut=e},handleCurrentChange:function(e){this.currentPage=e,this.sparePartCheckfindApi()},goBack:function(){this.$router.push({path:"/parePartsReport"})},sparePartCheckfindApi:function(){var e=this;return Object(l.a)(Object(i.a)().mark((function t(){var a;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.Fd)(Object(r.a)({pageIndex:e.currentPage,pageSize:e.pageSize},e.formHeard));case 2:a=t.sent,e.tableColumn=a.data,e.total=a.count,e.pageCount=a.totalPages;case 7:case"end":return t.stop()}}),t)})))()},addFn:function(){this.sparePartCheckfindApi()}}},s=(a("111c"),a("2877")),c=Object(s.a)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"content"},[t("page-main",[t("g-page-lable",{scopedSlots:e._u([{key:"left",fn:function(){return[t("el-form",{attrs:{inline:!0,model:e.formHeard}},[t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"备件名称:"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.formHeard.name,callback:function(t){e.$set(e.formHeard,"name",t)},expression:"formHeard.name"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"型号:"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.formHeard.model,callback:function(t){e.$set(e.formHeard,"model",t)},expression:"formHeard.model"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"更新姓名:"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.formHeard.updateBy,callback:function(t){e.$set(e.formHeard,"updateBy",t)},expression:"formHeard.updateBy"}})],1),t("el-form-item",[t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.addFn}},[e._v("查询")])],1)],1)]},proxy:!0}])})],1),t("page-main",[t("el-table",{attrs:{data:e.tableColumn,border:""}},[t("el-table-column",{attrs:{type:"selection",width:"40"}}),t("el-table-column",{attrs:{prop:"name",label:"备件名称",width:"180"}}),t("el-table-column",{attrs:{prop:"storeNumber",label:"原库存数量",width:"200"}}),t("el-table-column",{attrs:{prop:"storeNumberCheck",label:"盘点数量",width:"180"}}),t("el-table-column",{attrs:{prop:"remarkCheck",label:"备注",width:"200"}}),t("el-table-column",{attrs:{prop:"status",label:"审核状态",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("statusExpire")(a.status))+" ")]}}])}),t("el-table-column",{attrs:{prop:"approveUser",label:"盘点人",width:"200"}}),t("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"200"}}),t("el-table-column",{attrs:{prop:"approveUser",label:"审核人",width:"200"}}),t("el-table-column",{attrs:{prop:"approveTime",label:"审核时间",width:"200"}}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.inventory(r)}}},[e._v("审核")])]}}])})],1),t("div",{staticClass:"pagenation"},[t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total,prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{title:"盘库审核",visible:e.inventoryAdjustmentsAudit,width:"45%"},on:{"update:visible":function(t){e.inventoryAdjustmentsAudit=t}}},[t("div",{staticClass:"dialog-title"},[t("div",{staticClass:"dialog-item"},[t("div",[e._v("备件名称:")]),t("div",[e._v(e._s(e.inPut.name))])]),t("div",{staticClass:"dialog-item"},[t("div",[e._v("型号:")]),t("div",[e._v(e._s(e.inPut.model))])])]),t("el-form",{ref:"inPut",attrs:{inline:!0,rules:e.rules,model:e.inPut,"label-width":"auto"}},[t("el-form-item",{staticStyle:{"margin-left":"100px"},attrs:{label:"库存数量:"}},[t("el-input",{attrs:{disabled:!0,clearable:""},model:{value:e.inPut.storeNumber,callback:function(t){e.$set(e.inPut,"storeNumber",t)},expression:"inPut.storeNumber"}})],1),t("el-form-item",{attrs:{label:"盘点数量:"}},[t("el-input",{attrs:{disabled:!0,clearable:""},model:{value:e.inPut.storeNumberCheck,callback:function(t){e.$set(e.inPut,"storeNumberCheck",t)},expression:"inPut.storeNumberCheck"}})],1),t("div",[t("el-form-item",{staticStyle:{"margin-left":"100px"},attrs:{label:"库存差异:"}},[t("el-input",{attrs:{disabled:!0,clearable:""},model:{value:e.difference,callback:function(t){e.difference=t},expression:"difference"}})],1)],1),t("el-form-item",{staticStyle:{"margin-left":"100px"},attrs:{label:"备注:",prop:"remark"}},[t("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",disabled:!0,rows:2,placeholder:"请输入",clearable:""},model:{value:e.inPut.remarkCheck,callback:function(t){e.$set(e.inPut,"remarkCheck",t)},expression:"inPut.remarkCheck"}})],1)],1),t("div",{staticClass:"dialogradio"},[t("el-radio-group",{model:{value:e.tableDetail.status,callback:function(t){e.$set(e.tableDetail,"status",t)},expression:"tableDetail.status"}},[t("el-radio",{attrs:{label:2}},[e._v("审核通过")]),t("el-radio",{attrs:{label:3}},[e._v("审核不通过")])],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancell}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.commitAmidet}},[e._v("提交")])],1)],1)],1)}),[],!1,null,"36bd9c1e",null);t.default=c.exports},bf93:function(e,t,a){"use strict";a("4ef3")},c11e:function(e,t,a){},c508:function(e,t,a){},c753:function(e,t,a){},c93b:function(e,t,a){"use strict";a("c11e")},ceec:function(e,t,a){"use strict";a("ba2a")},d579:function(e,t,a){"use strict";a("6d77")},d5c4:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAOCAYAAADwikbvAAAAAXNSR0IArs4c6QAAADlJREFUOE9jFGx/EM1AAnhfqbAUppxxVDMi5P79Y7DCFo5MTAzHCAbYqGZE0FEvwHAla2KSLSMlmgF37jl62nGNtwAAAABJRU5ErkJggg=="},d6ab:function(e,t,a){"use strict";a("1059")},d8bb:function(e,t,a){"use strict";a("d94b")},d94b:function(e,t,a){},ddc6:function(e,t,a){"use strict";a("233c")},defe:function(e,t,a){"use strict";a.r(t);a("498a");var r=a("c7eb"),i=a("1da1"),l=a("5530"),n=a("365c"),o={props:{getListApi:{type:Function,default:null}},data:function(){return{dialogFormVisible:!1,formLabelWidth:"120px",form:{id:null,number:null,maintainName:null,reportPerson:null,remark:null,createTime:null},prependStyle:{width:"150px",textAlign:"center"},appendStyle:{width:"40px"}}},methods:{openDialog:function(e){var t=this;return Object(i.a)(Object(r.a)().mark((function a(){return Object(r.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.form=Object(l.a)({},e),t.dialogFormVisible=!0;case 2:case"end":return a.stop()}}),a)})))()},closeDialog:function(){this.resetForm(),this.dialogFormVisible=!1},resetForm:function(){this.form={id:null,maintainName:null,reportPerson:null,remark:null,updateTime:null}},submitForm:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.Vc)(Object.assign(e.form));case 2:200===t.sent.code?(e.$message.success("编辑成功"),e.closeDialog(),e.getListApi()):e.$message.error("编辑失败");case 4:case"end":return t.stop()}}),t)})))()}}},s=(a("a1d3"),a("2877")),c=Object(s.a)(o,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"维修周报编辑",visible:e.dialogFormVisible,width:"40vw","destroy-on-close":""},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.closeDialog}},[t("el-form",{attrs:{model:e.form,inline:"","label-width":"auto"}},[t("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{prop:"maintainName",label:"维修事项"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.form.maintainName,callback:function(t){e.$set(e.form,"maintainName","string"==typeof t?t.trim():t)},expression:"form.maintainName"}})],1),t("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{prop:"createTime",label:"填报时间"}},[t("el-date-picker",{attrs:{disabled:!0,"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:e.form.createTime,callback:function(t){e.$set(e.form,"createTime","string"==typeof t?t.trim():t)},expression:"form.createTime"}})],1),t("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{prop:"number",label:"操作数量"}},[t("el-input",{model:{value:e.form.number,callback:function(t){e.$set(e.form,"number","string"==typeof t?t.trim():t)},expression:"form.number"}})],1),t("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{prop:"reportPerson",label:"负责人"}},[t("el-input",{model:{value:e.form.reportPerson,callback:function(t){e.$set(e.form,"reportPerson","string"==typeof t?t.trim():t)},expression:"form.reportPerson"}})],1),t("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{prop:"remark",label:"备注"}},[t("el-input",{model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark","string"==typeof t?t.trim():t)},expression:"form.remark"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)}),[],!1,null,"4ba35966",null).exports,u=(a("4de4"),a("d81d"),a("b0c0"),a("d3b7"),{props:{getListApi:{type:Function,default:null}},data:function(){return{dialogFormVisible:!1,type:null,dynamicValidateForm:[{name:"巡检通讯井",unit:"个"},{name:"处理城管案件及巡查发现",unit:"宗"},{name:"更换全套井盖",unit:"个"},{name:"补井盖",unit:"个"},{name:"查处违规偷放",unit:"宗"},{name:"重点工地勘察",unit:"处"},{name:"抽缆入库",unit:"米"},{name:"断点维修",unit:"项"},{name:"开关锁",unit:"次"},{name:"光缆验收",unit:"单"},{name:"强电入井",unit:"处"},{name:"勘察路面坍塌隐患",unit:"处"},{name:"发现密码锁异常",unit:"个"},{name:"资源试通",unit:"米"}].map((function(e){return{maintainName:e.name,number:null,reportPerson:null,remark:null,unit:e.unit,reportPersonname:"负责人",remarkname:"备注"}})),prependStyle:{width:"150px",textAlign:"center"},appendStyle:{width:"40px"}}},methods:{openDialog:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dialogFormVisible=!0;case 1:case"end":return t.stop()}}),t)})))()},closeDialog:function(){this.dialogFormVisible=!1,this.dynamicValidateForm=[{name:"巡检通讯井",unit:"个"},{name:"处理城管案件及巡查发现",unit:"宗"},{name:"更换全套井盖",unit:"个"},{name:"补井盖",unit:"个"},{name:"查处违规偷放",unit:"宗"},{name:"重点工地勘察",unit:"处"},{name:"抽缆入库",unit:"米"},{name:"断点维修",unit:"项"},{name:"开关锁",unit:"次"},{name:"光缆验收",unit:"单"},{name:"强电入井",unit:"处"},{name:"勘察路面坍塌隐患",unit:"处"},{name:"发现密码锁异常",unit:"个"},{name:"资源试通",unit:"米"}].map((function(e){return{maintainName:e.name,number:null,reportPerson:null,remark:null,unit:e.unit,reportPersonname:"负责人",remarkname:"备注"}}))},submitForm:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.dynamicValidateForm=e.dynamicValidateForm.map((function(e){if(e.number||e.reportPerson||e.remark)return e})),e.dynamicValidateForm=e.dynamicValidateForm.filter((function(e){return void 0!==e})),t.next=4,new Promise((function(t,a){e.$refs.form.map(function(){var e=Object(i.a)(Object(r.a)().mark((function e(a){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.validate((function(e){e&&t()}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));case 4:return t.next=6,Object(n.Ac)(e.dynamicValidateForm);case 6:e.getListApi(),e.$message.success("新增成功"),e.closeDialog();case 9:case"end":return t.stop()}}),t)})))()}}}),m=(a("fd63"),Object(s.a)(u,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"维修报告新增",visible:e.dialogFormVisible,width:"70vw","destroy-on-close":""},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.closeDialog}},[e._l(e.dynamicValidateForm,(function(a,r){return t("el-form",{key:r,ref:"form",refInFor:!0,staticStyle:{"padding-left":"100px"},attrs:{model:a,inline:""}},[t("el-form-item",{attrs:{prop:"number",rules:[{required:!0,message:"".concat(a.maintainName,"数量不能为空"),trigger:"blur"}]}},[t("g-input-prepend-append",{attrs:{type:"number",placeholder:"请输入",min:0,pattern:/^[1-9]\d*$/,maxlength:"10","prepend-title":a.maintainName,"append-title":a.unit,"prepend-style":e.prependStyle,"append-style":e.appendStyle},model:{value:a.number,callback:function(t){e.$set(a,"number",e._n(t))},expression:"domain.number"}})],1),t("el-form-item",[t("g-input-prepend",{attrs:{"prepend-title":a.reportPersonname,placeholder:"请输入"},model:{value:a.reportPerson,callback:function(t){e.$set(a,"reportPerson","string"==typeof t?t.trim():t)},expression:"domain.reportPerson"}})],1),t("el-form-item",[t("g-input-prepend",{attrs:{"prepend-title":a.remarkname,placeholder:"请输入"},model:{value:a.remark,callback:function(t){e.$set(a,"remark","string"==typeof t?t.trim():t)},expression:"domain.remark"}})],1)],1)})),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],2)}),[],!1,null,"fa61df52",null).exports),d=a("21f4"),p=a("5a0c"),f=a.n(p),b={components:{editDialog:c,addDialog:m},data:function(){return{tableColumn:[{id:1,props:"maintainName",label:"维修事项",width:"50"},{id:2,props:"number",label:"数量",width:"50"},{id:3,props:"unit",label:"单位",width:"50"},{id:4,props:"reportPerson",label:"负责人",width:"50"},{id:5,props:"remark",label:"备注",width:"50"},{id:6,props:"createBy",label:"填报人",width:"50"},{id:7,props:"createTime",label:"填报时间",width:"50"}],searchForm:{maintainName:null,remark:null,searchTimeBegin:null,searchTimeEnd:null},searchTime:null,TableData:[],currentPage:1,pageSize:10,pageCount:0,yearOptions:[]}},computed:{monthOptions:function(){return[{label:"1月",value:1,disabled:1!==this.searchForm.quarter&&!!this.searchForm.quarter},{label:"2月",value:2,disabled:1!==this.searchForm.quarter&&!!this.searchForm.quarter},{label:"3月",value:3,disabled:1!==this.searchForm.quarter&&!!this.searchForm.quarter},{label:"4月",value:4,disabled:2!==this.searchForm.quarter&&!!this.searchForm.quarter},{label:"5月",value:5,disabled:2!==this.searchForm.quarter&&!!this.searchForm.quarter},{label:"6月",value:6,disabled:2!==this.searchForm.quarter&&!!this.searchForm.quarter},{label:"7月",value:7,disabled:3!==this.searchForm.quarter&&!!this.searchForm.quarter},{label:"8月",value:8,disabled:3!==this.searchForm.quarter&&!!this.searchForm.quarter},{label:"9月",value:9,disabled:3!==this.searchForm.quarter&&!!this.searchForm.quarter},{label:"10月",value:10,disabled:4!==this.searchForm.quarter&&!!this.searchForm.quarter},{label:"11月",value:11,disabled:4!==this.searchForm.quarter&&!!this.searchForm.quarter},{label:"12月",value:12,disabled:4!==this.searchForm.quarter&&!!this.searchForm.quarter},{label:"全部",value:null}]}},watch:{searchTime:{handler:function(e){null==e?(this.searchForm.searchTimeBegin=null,this.searchForm.searchTimeEnd=null):(this.searchForm.searchTimeBegin=e[0],this.searchForm.searchTimeEnd=e[1])}}},mounted:function(){this.getList(),this.yearOptions=Object(d.c)(5)},methods:{exportSparePartsPecords:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.Cc)(e.searchForm);case 2:a=t.sent,Object(d.b)(a.data,"维修管理列表.xls");case 4:case"end":return t.stop()}}),t)})))()},getListAll:function(){this.getList()},deleteApi:function(e){var t=this;return Object(i.a)(Object(r.a)().mark((function a(){return Object(r.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n.Bc)({id:e.id}).then((function(){t.getList(),t.$message({message:"删除成功",type:"success"})})).catch((function(){t.$message({message:"删除失败",type:"success"})}))})).catch((function(){}));case 1:case"end":return a.stop()}}),a)})))()},handleCurrentChange:function(e){this.currentPage=e,this.getList()},getList:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a,i,l;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$loading({lock:!0,text:"正在加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),i=Object.assign({pageIndex:e.currentPage,pageSize:e.pageSize},e.searchForm),t.next=4,Object(n.Wc)(i);case 4:l=t.sent,a.close(),"加载成功"===l.resultMsg?(e.TableData=l.data,e.pageCount=l.totalPages):e.$message.error("加载数据失败");case 7:case"end":return t.stop()}}),t)})))()},resetSearch:function(){this.$refs.searchFormRef.resetFields(),this.searchForm={maintainName:null,remark:null,searchTimeBegin:null,searchTimeEnd:null},this.searchTime=null,this.currentPage=1,this.getList()},openaddDialog:function(e,t){this.$refs.addDialogRef.openDialog(e,t)},openEditDialog:function(e,t){this.$refs.editDialogRef.openDialog(e,t)},dateFormat:function(e,t){return"updateTime"===t.property?e[t.property]&&f()(e[t.property]).format("YYYY-MM-DD"):"status"===t.property?1===e[t.property]?"待审核":2===e[t.property]?"审核通过":"审核不通过":e[t.property]}}},h=(a("e12b"),Object(s.a)(b,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"content"},[t("page-main",[t("g-page-lable",{scopedSlots:e._u([{key:"left",fn:function(){return[t("el-form",{ref:"searchFormRef",attrs:{inline:!0,model:e.searchForm}},[t("el-form-item",{attrs:{prop:"maintainName",label:"维修事项 :"}},[t("el-input",{model:{value:e.searchForm.maintainName,callback:function(t){e.$set(e.searchForm,"maintainName","string"==typeof t?t.trim():t)},expression:"searchForm.maintainName"}})],1),t("el-form-item",{attrs:{prop:"remark",label:"备注 :"}},[t("el-input",{model:{value:e.searchForm.remark,callback:function(t){e.$set(e.searchForm,"remark","string"==typeof t?t.trim():t)},expression:"searchForm.remark"}})],1),t("el-form-item",{attrs:{label:"填报时间 :"}},[t("el-date-picker",{staticStyle:{width:"432px"},attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchTime,callback:function(t){e.searchTime=t},expression:"searchTime"}})],1),t("el-form-item",[t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.getList}},[e._v("查询")])],1),t("el-form-item",[t("el-button",{on:{click:e.resetSearch}},[e._v("重置")])],1)],1)]},proxy:!0},{key:"right",fn:function(){return[t("el-button",{attrs:{type:"primary"},on:{click:e.exportSparePartsPecords}},[e._v("导出")]),t("el-button",{attrs:{type:"primary"},on:{click:e.openaddDialog}},[e._v(" 新增 ")])]},proxy:!0}])})],1),t("page-main",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.TableData,border:"",fit:""}},[e._l(e.tableColumn,(function(a){return t("el-table-column",{key:a.id,attrs:{prop:a.props,label:a.label,"min-width":a.width,formatter:e.dateFormat}})})),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.openEditDialog(a.row)}}},[e._v(" 编辑 ")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.deleteApi(a.row)}}},[e._v(" 删除 ")])]}}])})],2),t("div",{staticClass:"pagenation"},[t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total,prev, pager, next, jumper","page-count":e.pageCount},on:{"current-change":e.handleCurrentChange}})],1)],1),t("editDialog",{ref:"editDialogRef",attrs:{"get-list-api":e.getListAll}}),t("addDialog",{ref:"addDialogRef",attrs:{"get-list-api":e.getListAll}})],1)}),[],!1,null,"ee25937c",null));t.default=h.exports},e12b:function(e,t,a){"use strict";a("5cb8")},e6fa:function(e,t,a){},e9c48:function(e,t,a){},ebfe:function(e,t,a){},ee50:function(e,t,a){"use strict";a("3c0d")},f047:function(e,t,a){},f3b7:function(e,t,a){"use strict";a.r(t);a("b0c0");var r=a("c7eb"),i=a("1da1"),l=a("365c"),n=a("21f4"),o=a("5a0c"),s=a.n(o),c={data:function(){return{tableColumn:[{id:1,props:"operationType",label:"操作类型",width:"50"},{id:2,props:"name",label:"备件名字",width:"50"},{id:3,props:"bearing",label:"承重",width:"100"},{id:4,props:"model",label:"型号",width:"100"},{id:5,props:"operateNumber",label:"操作数量",width:"50"},{id:6,props:"operateBy",label:"操作人",width:"50"},{id:7,props:"operateTime",label:"操作时间",width:"50"}],TableData:[],searchForm:{name:null,model:null,operateBy:null},currentPage:1,pageSize:10,pageCount:0}},computed:{type:function(){return 1==this.operationType?"入库":"出库"}},created:function(){this.getList()},methods:{aaaajfk:function(e){},getList:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a,i,n;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$loading({lock:!0,text:"正在加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),i=Object.assign({pageIndex:e.currentPage,pageSize:e.pageSize},e.searchForm),t.next=4,Object(l.od)(i);case 4:"加载成功"===(n=t.sent).resultMsg?(e.TableData=n.data,e.pageCount=n.totalPages):(e.$message.error("加载数据失败"),a.close()),a.close();case 7:case"end":return t.stop()}}),t)})))()},exportSparePartsPecords:function(){var e=this;return Object(i.a)(Object(r.a)().mark((function t(){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.nd)(e.searchForm);case 2:a=t.sent,Object(n.b)(a.data,"备件记录列表.xls");case 4:case"end":return t.stop()}}),t)})))()},resetSearch:function(){this.searchForm={name:null,model:null,operateBy:null},this.currentPage=1,this.getList()},handleCurrentChange:function(e){this.currentPage=e,this.getList()},sumitSearchForm:function(){this.getList()},dateFormat:function(e,t){return"operateTime"===t.property?s()(e[t.property]).format("YYYY-MM-DD"):"operationType"===t.property?1===e[t.property]?"入库":"出库":e[t.property]}}},u=(a("1397"),a("2877")),m=Object(u.a)(c,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"content"},[t("page-main",[t("g-page-lable",{scopedSlots:e._u([{key:"left",fn:function(){return[t("el-form",{attrs:{inline:!0,model:e.searchForm}},[t("el-form-item",{staticStyle:{"margin-left":"1px"}},[t("g-input-prepend",{attrs:{"prepend-title":"备件名称:",placeholder:"请选择备件名称"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"}},[t("g-input-prepend",{attrs:{"prepend-title":"型号:",placeholder:"请选择型号"},model:{value:e.searchForm.model,callback:function(t){e.$set(e.searchForm,"model",t)},expression:"searchForm.model"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"}},[t("g-input-prepend",{attrs:{"prepend-title":"更新姓名:",placeholder:"请选择姓名"},model:{value:e.searchForm.operateBy,callback:function(t){e.$set(e.searchForm,"operateBy",t)},expression:"searchForm.operateBy"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.sumitSearchForm}},[e._v("查询")])],1),t("el-form-item",[t("el-button",{on:{click:e.resetSearch}},[e._v("重置")])],1)],1)]},proxy:!0},{key:"right",fn:function(){return[t("el-button",{attrs:{type:"primary"},on:{click:e.exportSparePartsPecords}},[e._v("导出")])]},proxy:!0}])})],1),t("page-main",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.TableData,border:"",fit:""}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),e._l(e.tableColumn,(function(a){return t("el-table-column",{key:a.id,attrs:{prop:a.props,label:a.label,"min-width":a.width,formatter:e.dateFormat},scopedSlots:e._u([{key:"default",fn:function(a){return["model"===a.column.property?t("div",{staticStyle:{width:"100%",height:"100%","text-align":"center"},on:{click:function(t){return e.aaaajfk(a)}}},[e._v(" "+e._s(a.row[a.column.property])),t("el-tag",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:a.row[a.column.property],expression:"scope.row[scope.column.property]",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:function(){return e.$message.success("复制成功")},expression:"() => $message.success('复制成功')",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:function(){return e.$message.error("复制失败")},expression:"() => $message.error('复制失败')",arg:"error"}],staticStyle:{"margin-left":"5px",cursor:"pointer",transform:"scale(0.8)"}},[e._v(" 复制 ")])],1):t("div",[e._v(e._s(e.dateFormat(a.row,a.column)))])]}}],null,!0)})}))],2),t("div",{staticClass:"pagenation"},[t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total,prev, pager, next, jumper","page-count":e.pageCount},on:{"current-change":e.handleCurrentChange}})],1)],1)],1)}),[],!1,null,"961d8bbe",null);t.default=m.exports},f77c:function(e,t,a){"use strict";a("0289")},fb2b:function(e,t,a){},fd42:function(e,t,a){"use strict";a.r(t);var r=a("c7eb"),i=a("5530"),l=a("1da1"),n=a("365c"),o={filters:{statusReview:function(e){return{0:"正常",1:"删除待审核",2:"删除已审核",3:"删除审核不通过"}[e]||"正常"}},data:function(){return{isClicked:!1,tableDetail:{id:null,remark:"",isDel:null},dialog:!1,radio:"",value:"",value3:"",options4:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},searchTime:null,searchForm:{updateTimeBegin:null,updateTimeEnd:null},tableColumn:[],dialogHours:!1,resourceTableData:[],currentPage:1,pageSize:10,total:100,disabled:!1,title:"",paremts:{contractNo:"",updateBy:"",createTime:""}}},watch:{searchTime:{deep:!0,handler:function(e){null===e?(this.searchForm.updateTimeBegin=null,this.searchForm.updateTimeEnd=null):(this.searchForm.updateTimeBegin=e[0],this.searchForm.updateTimeEnd=e[1])}}},created:function(){this.audit()},methods:{weeklyreportInquiry:function(){this.audit()},audit:function(){var e=this;return Object(l.a)(Object(r.a)().mark((function t(){var a,l;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object.assign(Object(i.a)({pageIndex:e.currentPage,pageSize:e.pageSize},e.paremts),e.searchForm),t.next=3,Object(n.M)(a);case 3:"加载成功"===(l=t.sent).resultMsg?(e.tableColumn=l.data,e.total=l.count,e.pageCount=l.totalPages):e.$message.error("加载数据失败");case 5:case"end":return t.stop()}}),t)})))()},warehouse:function(){this.dialogHours=!0},dialogFormVisibles:function(){var e=this;return Object(l.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.P)({id:e.tableDetail.id,remark:e.tableDetail.remark,isDel:e.tableDetail.isDel});case 2:e.audit(),e.dialogHours=!1;case 4:case"end":return t.stop()}}),t)})))()},handleCurrentChange:function(e){this.currentPage=e,this.audit()},changePage:function(){var e=this;return Object(l.a)(Object(r.a)().mark((function t(){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.$loading({lock:!0,text:"正在加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),setTimeout((function(){a.close()}),1e3);case 2:case"end":return t.stop()}}),t)})))()},detail:function(e){this.tableDetail=e.row,this.dialogHours=!0}}},s=(a("2d31"),a("2877")),c=Object(s.a)(o,(function(){var e=this,t=e._self._c;return t("div",[t("page-main",[t("g-page-lable",{scopedSlots:e._u([{key:"left",fn:function(){return[t("el-form",{attrs:{inline:!0,model:e.paremts}},[t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"合同编号:"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.paremts.contractNo,callback:function(t){e.$set(e.paremts,"contractNo",t)},expression:"paremts.contractNo"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"操作人姓名:"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.paremts.updateBy,callback:function(t){e.$set(e.paremts,"updateBy",t)},expression:"paremts.updateBy"}})],1),t("el-form-item",{staticStyle:{"margin-left":"1px"},attrs:{label:"选择时间:"}},[t("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.searchTime,callback:function(t){e.searchTime=t},expression:"searchTime"}})],1),t("el-form-item",[t("el-button",{staticStyle:{"margin-left":"10px","background-color":"#409eff","border-color":"#409eff",color:"#fff"},on:{click:e.weeklyreportInquiry}},[e._v(" 查询 ")])],1)],1)]},proxy:!0}])})],1),t("page-main",[t("el-table",{attrs:{data:e.tableColumn,border:"",width:"100%"}},[t("el-table-column",{attrs:{type:"selection",width:"150"}}),t("el-table-column",{attrs:{label:"合同编号",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.contractNo))]}}])}),t("el-table-column",{attrs:{prop:"updateBy",label:"操作人",width:"240"}}),t("el-table-column",{attrs:{prop:"remark",label:"删除理由",width:"240"}}),t("el-table-column",{attrs:{prop:"updateBy",label:"审核人",width:"240"}}),t("el-table-column",{attrs:{prop:"updateTime",label:"审核时间",width:"240"}}),t("el-table-column",{attrs:{label:"审核状态",width:"232"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("statusReview")(t.row.isDel)))]}}])}),t("el-table-column",{attrs:{label:"操作",width:"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{class:{"is-disabled":e.isClicked},attrs:{type:"text",size:"small",disabled:2===a.row.isDel},on:{click:function(t){return e.detail(a)}}},[e._v(" 审核 ")])]}}])})],1),t("div",{staticClass:"pagenation"},[t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total,prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{title:"删除审核",visible:e.dialogHours,width:"35%"},on:{"update:visible":function(t){e.dialogHours=t}}},[t("div",{staticClass:"dialogradio"},[t("el-radio-group",{model:{value:e.tableDetail.isDel,callback:function(t){e.$set(e.tableDetail,"isDel",t)},expression:"tableDetail.isDel"}},[t("el-radio",{attrs:{label:2}},[e._v("审核通过")]),t("el-radio",{attrs:{label:0}},[e._v("审核不通过")])],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.dialogFormVisibles}},[e._v("提交")])],1)])],1)}),[],!1,null,"504c6245",null);t.default=c.exports},fd63:function(e,t,a){"use strict";a("fb2b")},ffa9:function(e,t,a){"use strict";a("ebfe")}}]);