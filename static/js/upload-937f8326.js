import{_ as E,A as c,w as N,o as v,c as g,b as a,e as o,a as _,y as U,l as h,bu as z,b9 as V,k as y,aT as A,h as F,d as P,F as R,n as T,X as $,bv as S}from"./index-9c00c9ce.js";import{E as X,a as j}from"./el-image-viewer-623ed655.js";const q={class:"el-upload-list__item-actions"},D=["onClick"],G=["onClick"],H={__name:"upload",props:{fileList:{type:Array,default:()=>{}},limit:{type:Number,default:1},preview:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},width:{type:Number,default:200},height:{type:Number,default:200}},emits:["update:fileList","change"],setup(i,{emit:x}){const d=x,r=i,p=c(!1),m=c(0),e=c([]),u=c(!0),w=()=>{T(()=>{e.value.length>=r.limit&&(u.value=!1),d("change",e.value),d("update:fileList",e.value)})};function k(l){const n=e.value.findIndex(t=>t.uid==l.uid);m.value=n,p.value=!0}function C(){m.value=0,p.value=!1}const b=async l=>{if(l){const{url:n}=l,t=e.value.findIndex(f=>f.url==n);t!=-1&&e.value.splice(t,1),u.value=!0,d("change",e.value),d("update:fileList",e.value)}};return N(()=>r.fileList,l=>{e.value=l,l.length>=r.limit&&(u.value=!1),l.length||(u.value=!0)},{immediate:!0,deep:!0}),(l,n)=>{const t=$,f=X,I=S,L=j;return v(),g(R,null,[a(I,{ref:"uploadAvatarRef","file-list":e.value,"onUpdate:fileList":n[0]||(n[0]=s=>e.value=s),class:F([u.value&&!i.preview?"":"hide-upload"]),action:"#","list-type":"picture-card","auto-upload":!1,multiple:i.multiple,limit:i.limit,"on-change":w},{file:o(({file:s})=>[_("div",null,[a(f,{style:U({width:i.width+"px",height:i.height+"px"}),fit:"cover",src:s.url,lazy:""},null,8,["style","src"]),_("span",q,[_("span",{class:"el-upload-list__item-preview",onClick:B=>k(s)},[a(t,null,{default:o(()=>[a(h(z))]),_:1})],8,D),i.preview?y("",!0):(v(),g("span",{key:0,class:"el-upload-list__item-delete",onClick:B=>b(s)},[a(t,null,{default:o(()=>[a(h(V))]),_:1})],8,G))])])]),default:o(()=>[a(t,null,{default:o(()=>[a(h(A))]),_:1})]),_:1},8,["file-list","class","multiple","limit"]),p.value?(v(),P(L,{key:0,teleported:!0,"url-list":e.value.map(s=>s.url),"initial-index":m.value,onClose:C},null,8,["url-list","initial-index"])):y("",!0)],64)}}},M=E(H,[["__scopeId","data-v-4e14e929"]]);export{M as U};
