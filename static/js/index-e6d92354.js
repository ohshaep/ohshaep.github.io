import{_ as P,ak as Z,al as A,J as G,am as K,u as Q,A as W,V as E,w as X,r as Y,o as a,c as l,j as N,a as e,l as i,F as h,f as g,t as r,h as ee,b as u,e as d,k as S,d as y,m as z,I as F,y as te,ap as se,S as ae,n as ne,a$ as oe,q as le,v as ce,x as ie}from"./index-9c00c9ce.js";import{E as re,a as _e,b as de}from"./el-dropdown-0230fa9d.js";import"./el-scrollbar-9357c77b.js";import{E as ue}from"./el-image-viewer-623ed655.js";import{T as me,_ as B}from"./index-3cf87c02.js";const n=t=>(ce("data-v-08902e0b"),t=t(),ie(),t),pe={class:"loading !pt-[80px]"},he={key:0,class:"route-font animate__animated animate__fadeIn"},ge={key:0,class:"image-list"},ve={style:{"text-shadow":"none"}},fe={key:1,class:"article main-article"},ye={class:"loading"},be={class:"animate__animated animate__fadeIn !mt-[20px]"},ke={class:"to_pointer"},we=n(()=>e("i",{class:"iconfont icon-calendar2"},null,-1)),xe=n(()=>e("span",{class:"meta-label"},"发表于",-1)),Te={class:"meta-value"},Ie={class:"to_pointer"},Ce=n(()=>e("i",{class:"iconfont icon-schedule"},null,-1)),Le=n(()=>e("span",{class:"meta-label"},"更新于",-1)),De={class:"meta-value"},$e=n(()=>e("span",{class:"meta-separator"},null,-1)),Ae={class:"to_pointer"},Ee=n(()=>e("i",{class:"iconfont icon-folder"},null,-1)),Ne={class:"meta-value"},Se=n(()=>e("span",{class:"meta-separator"},null,-1)),ze={class:"to_pointer"},Fe=n(()=>e("i",{class:"iconfont icon-label_fill"},null,-1)),Be=n(()=>e("span",{class:"meta-separator"},null,-1)),je={class:"to_pointer"},qe=n(()=>e("i",{class:"iconfont icon-icon1"},null,-1)),Ue=n(()=>e("span",{class:"meta-label"},"点赞数",-1)),Ve={key:1,class:"meta-value"},Me=n(()=>e("span",{class:"meta-separator"},null,-1)),Re={class:"to_pointer"},He=n(()=>e("i",{class:"iconfont icon-chakan"},null,-1)),Je=n(()=>e("span",{class:"meta-label"},"浏览次数",-1)),Oe={key:1,class:"meta-value"},Pe=n(()=>e("span",{class:"meta-separator"},null,-1)),Ze={class:"to_pointer"},Ge=n(()=>e("i",{class:"iconfont icon-speechbubble"},null,-1)),Ke=n(()=>e("span",{class:"meta-label"},"阅读时长",-1)),Qe={class:"meta-value"},We={class:"toggle-theme animate__animated animate__fadeIn"},Xe={class:"flex_c_center"},Ye=n(()=>e("span",null,"预览主题",-1)),et={class:"flex_c_center"},tt=n(()=>e("span",null,"代码主题",-1)),st={__name:"index",props:{loading:{type:Boolean,default:!1},article:{type:Object,default:()=>{}},bgUrl:{type:String,default:""},photoAlbumList:{type:Array,default:()=>{}}},setup(t){const v=Z(),{codeTheme:j,previewTheme:q,getPageHeaderList:U}=A(v),{getUserInfo:V}=A(G()),_=K(),w=Q(),f=t,x=(s,c)=>{v[s]=c},T=W(""),M=s=>{if(s>36e5){const c=(s/36e5).toFixed(0),m=(s%36e5/6e4).toFixed(0);return`${b(c)} 时 ${b(m)} 分`}else{const c=(s/6e4).toFixed(0);return`${b(c)} 分`}},b=s=>s>0&&s<10?`0${s}`:s,R=E(()=>{const s=U.value;let c;if(_.path=="/article")c=f.article.article_cover||"https://mrzym.gitee.io/blogimg/cover/cute.jpg";else if(f.bgUrl)c=f.bgUrl||"https://mrzym.gitee.io/blogimg/cover/cute.jpg";else{let m=s.findIndex(k=>k.route_name==_.name);c=m==-1?"https://mrzym.gitee.io/blogimg/cover/cute.jpg":s[m].bg_url}return T.value=c,`background-image: url(${c});}`}),I=E(()=>_.query.pageTitle?_.meta.name+" - "+_.query.pageTitle:_.meta.name),H=s=>{w.push({path:"/photos",query:{id:s.id,pageTitle:s.album_name,bg:s.album_cover}})},J=()=>{V.value.id?w.push("/link/apply"):se({offset:60,title:"温馨提示",message:ae("div",{style:"color: #e6c081; font-weight: 600;"},"请先登录")})};return X(()=>_.path,()=>{ne(()=>{oe(".char")})},{immediate:!0}),(s,c)=>{const m=le,k=ue,C=re,L=_e,D=de,$=Y("image");return a(),l("div",{class:"page-header fadeIn",style:te(R.value)},[N(e("div",pe,null,512),[[$,T.value]]),i(_).path!="/article"?(a(),l("div",he,[(a(!0),l(h,null,g(I.value.length,o=>(a(),l("span",{style:{display:"inline-block"},class:"char",key:o},r(I.value.charAt(o-1)),1))),128)),i(_).path=="/photos"&&t.photoAlbumList.length?(a(),l("div",ge,[(a(!0),l(h,null,g(t.photoAlbumList,o=>(a(),l("div",{class:ee(["image-box",i(_).query.id==o.id?"current":""]),key:o.id},[u(k,{class:"image",src:o.album_cover,fit:"cover",lazy:"",onClick:p=>H(o)},{error:d(()=>[u(m,{name:"image404",width:4,height:4})]),_:2},1032,["src","onClick"])],2))),128))])):S("",!0),e("div",ve,[i(_).path=="/link/list"?(a(),l("span",{key:0,class:"apply-button",onClick:J},"友链申请")):S("",!0)])])):(a(),l("div",fe,[N(e("div",ye,null,512),[[$,f.article.article_cover]]),u(me,{width:"80%",weight:"500",size:"2.4rem",color:"#fff",align:"center",name:t.article.article_title},null,8,["name"]),e("div",be,[e("span",ke,[we,xe,e("span",Te,r(t.article.createdAt),1)]),e("span",Ie,[Ce,Le,e("span",De,r(t.article.updatedAt),1)]),$e,e("span",Ae,[Ee,e("span",Ne,r(t.article.categoryName),1)]),Se,e("span",ze,[Fe,(a(!0),l(h,null,g(t.article.tagNameList,(o,p)=>(a(),l("span",{class:"meta-value",key:o},r(p+1==t.article.tagNameList.length?o:o+"、"),1))),128))]),Be,e("span",je,[qe,Ue,t.article.thumbs_up_times-0<1e3?(a(),y(i(B),{key:0,class:"meta-value",value:t.article.thumbs_up_times},null,8,["value"])):(a(),l("span",Ve,r(i(z)(t.article.thumbs_up_times)),1))]),Me,e("span",Re,[He,Je,t.article.view_times-0<1e3?(a(),y(i(B),{key:0,class:"meta-value",value:t.article.view_times},null,8,["value"])):(a(),l("span",Oe,r(i(z)(t.article.view_times)),1))]),Pe,e("span",Ze,[Ge,Ke,e("span",Qe,r(M(t.article.reading_duration)),1)])]),e("div",We,[u(D,{class:"theme-card-dropdown"},{dropdown:d(()=>[u(L,null,{default:d(()=>[(a(!0),l(h,null,g(i(v).previewThemeList,(o,p)=>(a(),y(C,{key:p,onClick:O=>x("previewTheme",o)},{default:d(()=>[F(r(o),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:d(()=>[e("div",Xe,[Ye,e("span",null,r(i(q)),1)])]),_:1}),u(D,{class:"theme-card-dropdown"},{dropdown:d(()=>[u(L,null,{default:d(()=>[(a(!0),l(h,null,g(i(v).codeThemeList,(o,p)=>(a(),y(C,{key:p,onClick:O=>x("codeTheme",o)},{default:d(()=>[F(r(o),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:d(()=>[e("div",et,[tt,e("span",null,r(i(j)),1)])]),_:1})])]))],4)}}},it=P(st,[["__scopeId","data-v-08902e0b"]]);export{it as _};
