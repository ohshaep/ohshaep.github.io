import{_ as P,J as X,al as q,A as _,K,H as W,aA as Q,ae as Y,c as f,b as a,a as t,e as o,F as h,u as Z,o as n,f as B,d as w,y as S,h as b,t as g,l as k,aB as ee,k as te,aC as se,I as ae,aD as oe,D as ne,X as le,E as ie,p as ce,s as re,az as _e}from"./index-8cb36933.js";import{E as ue}from"./el-skeleton-item-bea1a6e1.js";import{_ as de}from"./index-00d035ea.js";import{g as ve}from"./links-7079b75f.js";import{_ as L}from"./skeleton-item-a7cf402b.js";import"./el-dropdown-6f25abb9.js";import"./el-scrollbar-6af99a7b.js";import"./castArray-5b58c438.js";import"./el-image-viewer-39592aa6.js";import"./index-70ca8489.js";const me={class:"center_box"},pe={class:"flex justify-between w-[100%]"},fe={class:"link-skeleton w-[33%] flex justify-center items-center h-[11rem] rounded-md"},he={class:"link-skeleton w-[33%] flex justify-center items-center h-[11rem] rounded-md"},ge={class:"link-skeleton w-[33%] flex justify-center items-center h-[11rem] rounded-md"},ke=["onMouseenter"],ye={class:"left"},xe={class:"avatar-font"},we={class:"w-[100%] flex justify-between items-center"},be=["title"],Le={class:"op-icon"},Ie=["title"],Ee={class:"observer"},Ce={__name:"link-list",setup(ze){const j=Z(),M=X(),{getUserInfo:I}=q(M),l=_(0),i=_(""),v=_(!1),y=_(!1),m=K({current:1,size:6,status:2}),c=_([]),p=_(0);let u,x;const T=(e,r)=>{i.value=e,l.value=r},$=()=>{i.value="",l.value=0},D=e=>{window.open(e)},F=e=>{oe("blog-link-update",e),j.push("/link/update")},N=()=>{x=document.querySelector(".observer"),u=new IntersectionObserver(e=>{e.forEach(async r=>{r.isIntersecting&&r.intersectionRatio>0&&p.value>c.value.length&&(m.current++,E())})},{rootMargin:"0px 0px 300px 0px"}),u.observe(x)},R=e=>e.substring(e.length-1)!="/"?e+"/favicon.ico":e+"favicon.ico",E=async()=>{try{m.current==1?v.value=!0:y.value=!0;const e=await ve(m);e&&e.code==0&&(c.value=m.current==1?e.result.list:c.value.concat(e.result.list),p.value=e.result.total-0)}finally{v.value=!1,y.value=!1}};return W(async()=>{Q("blog-link-update"),await E(),c.value.length<p.value&&N()}),Y(()=>{u&&u.unobserve(x),u=null}),(e,r)=>{const U=de,V=ne,C=le,A=ie,G=ce,O=re,H=_e,J=ue;return n(),f(h,null,[a(U,{loading:v.value},null,8,["loading"]),t("div",me,[a(J,{loading:v.value,style:{height:"100%"},animated:""},{template:o(()=>[(n(),f(h,null,B(2,s=>t("div",{class:"flex justify-start w-[100%] !mt-[10px]",key:s},[t("div",pe,[t("div",fe,[a(L,{variant:"circle",width:"80px",height:"80px"})]),t("div",he,[a(L,{variant:"circle",width:"80px",height:"80px"})]),t("div",ge,[a(L,{variant:"circle",width:"80px",height:"80px"})])])])),64))]),default:o(()=>[a(O,{class:"site"},{default:o(()=>[(n(!0),f(h,null,B(c.value,(s,d)=>(n(),w(G,{xs:24,sm:8,key:s.id},{default:o(()=>[a(A,{class:"card-hover animate__animated animate__fadeIn"},{default:o(()=>[t("div",{style:S({backgroundImage:`url(${s.site_avatar||"http://img.mrzym.top/FgTOrGUz5WJwswSLhPsiGL4DOXe3"})`}),class:b(["site-item",i.value=="site"&&l.value==d?"site-mask":""]),onMouseenter:z=>T("site",d),onMouseleave:$},[t("div",ye,[a(V,{class:b([i.value=="site"&&l.value==d?"avatar-hover":"avatar"]),fit:"cover",size:80,src:s.site_avatar||R(s.url)},{default:o(()=>[t("span",xe,g(s.site_name),1)]),_:2},1032,["class","src"])]),t("div",{class:b(["right",i.value=="site"&&l.value==d?"right-hover":""])},[t("div",we,[t("span",{title:s.site_name,class:"name"},g(s.site_name),9,be),t("div",Le,[k(I).id==1||k(I).id==s.user_id?(n(),w(C,{key:0,style:{"margin-right":"3px"},class:"left-icon",onClick:z=>F(s)},{default:o(()=>[a(k(ee))]),_:2},1032,["onClick"])):te("",!0),a(C,{class:"right-icon",onClick:z=>D(s.url)},{default:o(()=>[a(k(se))]),_:2},1032,["onClick"])])]),t("span",{style:S({height:i.value=="site"&&l.value==d?"4.6rem":"0"}),title:s.site_desc,class:"desc"},g(s.site_desc),13,Ie)],2)],46,ke)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t("div",Ee,[y.value?(n(),w(H,{key:0,size:32})):(n(),f(h,{key:1},[ae(g(c.value.length>=p.value?"已经到底了~":"下拉加载更多～"),1)],64))])]),_:1},8,["loading"])])],64)}}},Ue=P(Ce,[["__scopeId","data-v-85d75ebf"]]);export{Ue as default};
