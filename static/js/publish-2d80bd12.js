import{T as De,a2 as Re,be as et,a6 as Se,Q,A as $,H as ee,w as P,V as N,a9 as Le,aL as ce,P as R,o as y,c as S,a as v,h as _,l as i,y as I,Y as te,bf as tt,aU as ge,aW as de,bg as fe,a5 as at,bh as Ve,af as lt,ad as st,F as Y,f as G,bi as ot,bj as nt,bk as rt,bl as it,bm as ut,bn as ct,K as xe,bo as dt,n as se,R as ft,d as W,e as T,j as he,bp as Fe,b as L,k as re,aH as ht,aG as be,I as ue,t as D,bq as vt,X as Te,br as pt,a_ as Ne,aR as mt,b0 as gt,bs as Ae,aS as ve,Z as bt,_ as _t,J as kt,al as yt,aF as wt,u as $t,am as Ct,ap as oe,S as ne,aA as Mt,aD as Ie,E as Et,bt as St,b7 as Lt,D as Vt,v as Ft,x as Tt}from"./index-9c00c9ce.js";import{E as Nt,a as At}from"./el-select-ce01c66f.js";import"./el-scrollbar-9357c77b.js";import{u as It,b as Ht,a as Pt}from"./message-61b71dcf.js";import{i as Ot}from"./user-e42289b4.js";import{U as Bt}from"./upload-937f8326.js";import{g as _e}from"./el-image-viewer-623ed655.js";import"./strings-d9fd212b.js";import"./hasIn-cbe45c80.js";const zt=De({color:{type:Re(Object),required:!0},vertical:{type:Boolean,default:!1}});let pe=!1;function J(e,l){if(!et)return;const a=function(s){var n;(n=l.drag)==null||n.call(l,s)},t=function(s){var n;document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",t),document.removeEventListener("touchmove",a),document.removeEventListener("touchend",t),document.onselectstart=null,document.ondragstart=null,pe=!1,(n=l.end)==null||n.call(l,s)},r=function(s){var n;pe||(s.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",a),document.addEventListener("mouseup",t),document.addEventListener("touchmove",a),document.addEventListener("touchend",t),pe=!0,(n=l.start)==null||n.call(l,s))};e.addEventListener("mousedown",r),e.addEventListener("touchstart",r)}const Dt=e=>{const l=ce(),a=Se(),t=Se();function r(n){n.target!==a.value&&s(n)}function s(n){if(!t.value||!a.value)return;const o=l.vnode.el.getBoundingClientRect(),{clientX:h,clientY:C}=_e(n);if(e.vertical){let d=C-o.top;d=Math.max(a.value.offsetHeight/2,d),d=Math.min(d,o.height-a.value.offsetHeight/2),e.color.set("alpha",Math.round((d-a.value.offsetHeight/2)/(o.height-a.value.offsetHeight)*100))}else{let d=h-o.left;d=Math.max(a.value.offsetWidth/2,d),d=Math.min(d,o.width-a.value.offsetWidth/2),e.color.set("alpha",Math.round((d-a.value.offsetWidth/2)/(o.width-a.value.offsetWidth)*100))}}return{thumb:a,bar:t,handleDrag:s,handleClick:r}},Rt=(e,{bar:l,thumb:a,handleDrag:t})=>{const r=ce(),s=Q("color-alpha-slider"),n=$(0),f=$(0),o=$();function h(){if(!a.value||e.vertical)return 0;const u=r.vnode.el,p=e.color.get("alpha");return u?Math.round(p*(u.offsetWidth-a.value.offsetWidth/2)/100):0}function C(){if(!a.value)return 0;const u=r.vnode.el;if(!e.vertical)return 0;const p=e.color.get("alpha");return u?Math.round(p*(u.offsetHeight-a.value.offsetHeight/2)/100):0}function d(){if(e.color&&e.color.value){const{r:u,g:p,b:x}=e.color.toRgb();return`linear-gradient(to right, rgba(${u}, ${p}, ${x}, 0) 0%, rgba(${u}, ${p}, ${x}, 1) 100%)`}return""}function M(){n.value=h(),f.value=C(),o.value=d()}ee(()=>{if(!l.value||!a.value)return;const u={drag:p=>{t(p)},end:p=>{t(p)}};J(l.value,u),J(a.value,u),M()}),P(()=>e.color.get("alpha"),()=>M()),P(()=>e.color.value,()=>M());const k=N(()=>[s.b(),s.is("vertical",e.vertical)]),b=N(()=>s.e("bar")),w=N(()=>s.e("thumb")),O=N(()=>({background:o.value})),g=N(()=>({left:Le(n.value),top:Le(f.value)}));return{rootKls:k,barKls:b,barStyle:O,thumbKls:w,thumbStyle:g,update:M}},xt="ElColorAlphaSlider",Wt=R({name:xt}),Kt=R({...Wt,props:zt,setup(e,{expose:l}){const a=e,{bar:t,thumb:r,handleDrag:s,handleClick:n}=Dt(a),{rootKls:f,barKls:o,barStyle:h,thumbKls:C,thumbStyle:d,update:M}=Rt(a,{bar:t,thumb:r,handleDrag:s});return l({update:M,bar:t,thumb:r}),(k,b)=>(y(),S("div",{class:_(i(f))},[v("div",{ref_key:"bar",ref:t,class:_(i(o)),style:I(i(h)),onClick:b[0]||(b[0]=(...w)=>i(n)&&i(n)(...w))},null,6),v("div",{ref_key:"thumb",ref:r,class:_(i(C)),style:I(i(d))},null,6)],2))}});var Ut=te(Kt,[["__file","alpha-slider.vue"]]);const jt=R({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const l=Q("color-hue-slider"),a=ce(),t=$(),r=$(),s=$(0),n=$(0),f=N(()=>e.color.get("hue"));P(()=>f.value,()=>{M()});function o(k){k.target!==t.value&&h(k)}function h(k){if(!r.value||!t.value)return;const w=a.vnode.el.getBoundingClientRect(),{clientX:O,clientY:g}=_e(k);let u;if(e.vertical){let p=g-w.top;p=Math.min(p,w.height-t.value.offsetHeight/2),p=Math.max(t.value.offsetHeight/2,p),u=Math.round((p-t.value.offsetHeight/2)/(w.height-t.value.offsetHeight)*360)}else{let p=O-w.left;p=Math.min(p,w.width-t.value.offsetWidth/2),p=Math.max(t.value.offsetWidth/2,p),u=Math.round((p-t.value.offsetWidth/2)/(w.width-t.value.offsetWidth)*360)}e.color.set("hue",u)}function C(){if(!t.value)return 0;const k=a.vnode.el;if(e.vertical)return 0;const b=e.color.get("hue");return k?Math.round(b*(k.offsetWidth-t.value.offsetWidth/2)/360):0}function d(){if(!t.value)return 0;const k=a.vnode.el;if(!e.vertical)return 0;const b=e.color.get("hue");return k?Math.round(b*(k.offsetHeight-t.value.offsetHeight/2)/360):0}function M(){s.value=C(),n.value=d()}return ee(()=>{if(!r.value||!t.value)return;const k={drag:b=>{h(b)},end:b=>{h(b)}};J(r.value,k),J(t.value,k),M()}),{bar:r,thumb:t,thumbLeft:s,thumbTop:n,hueValue:f,handleClick:o,update:M,ns:l}}});function qt(e,l,a,t,r,s){return y(),S("div",{class:_([e.ns.b(),e.ns.is("vertical",e.vertical)])},[v("div",{ref:"bar",class:_(e.ns.e("bar")),onClick:l[0]||(l[0]=(...n)=>e.handleClick&&e.handleClick(...n))},null,2),v("div",{ref:"thumb",class:_(e.ns.e("thumb")),style:I({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,6)],2)}var Xt=te(jt,[["render",qt],["__file","hue-slider.vue"]]);const Yt=De({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:tt,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},predefine:{type:Re(Array)},validateEvent:{type:Boolean,default:!0}}),Gt={[ge]:e=>de(e)||fe(e),[at]:e=>de(e)||fe(e),activeChange:e=>de(e)||fe(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent},We=Symbol("colorPickerContextKey"),He=function(e,l,a){return[e,l*a/((e=(2-l)*a)<1?e:2-e)||0,e/2]},Zt=function(e){return typeof e=="string"&&e.includes(".")&&Number.parseFloat(e)===1},Jt=function(e){return typeof e=="string"&&e.includes("%")},K=function(e,l){Zt(e)&&(e="100%");const a=Jt(e);return e=Math.min(l,Math.max(0,Number.parseFloat(`${e}`))),a&&(e=Number.parseInt(`${e*l}`,10)/100),Math.abs(e-l)<1e-6?1:e%l/Number.parseFloat(l)},Pe={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},ie=e=>{e=Math.min(Math.round(e),255);const l=Math.floor(e/16),a=e%16;return`${Pe[l]||l}${Pe[a]||a}`},Oe=function({r:e,g:l,b:a}){return Number.isNaN(+e)||Number.isNaN(+l)||Number.isNaN(+a)?"":`#${ie(e)}${ie(l)}${ie(a)}`},me={A:10,B:11,C:12,D:13,E:14,F:15},z=function(e){return e.length===2?(me[e[0].toUpperCase()]||+e[0])*16+(me[e[1].toUpperCase()]||+e[1]):me[e[1].toUpperCase()]||+e[1]},Qt=function(e,l,a){l=l/100,a=a/100;let t=l;const r=Math.max(a,.01);a*=2,l*=a<=1?a:2-a,t*=r<=1?r:2-r;const s=(a+l)/2,n=a===0?2*t/(r+t):2*l/(a+l);return{h:e,s:n*100,v:s*100}},Be=(e,l,a)=>{e=K(e,255),l=K(l,255),a=K(a,255);const t=Math.max(e,l,a),r=Math.min(e,l,a);let s;const n=t,f=t-r,o=t===0?0:f/t;if(t===r)s=0;else{switch(t){case e:{s=(l-a)/f+(l<a?6:0);break}case l:{s=(a-e)/f+2;break}case a:{s=(e-l)/f+4;break}}s/=6}return{h:s*360,s:o*100,v:n*100}},X=function(e,l,a){e=K(e,360)*6,l=K(l,100),a=K(a,100);const t=Math.floor(e),r=e-t,s=a*(1-l),n=a*(1-r*l),f=a*(1-(1-r)*l),o=t%6,h=[a,n,s,s,f,a][o],C=[f,a,a,n,s,s][o],d=[s,s,f,a,a,n][o];return{r:Math.round(h*255),g:Math.round(C*255),b:Math.round(d*255)}};class Z{constructor(l={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const a in l)Ve(l,a)&&(this[a]=l[a]);l.value?this.fromString(l.value):this.doOnChange()}set(l,a){if(arguments.length===1&&typeof l=="object"){for(const t in l)Ve(l,t)&&this.set(t,l[t]);return}this[`_${l}`]=a,this.doOnChange()}get(l){return l==="alpha"?Math.floor(this[`_${l}`]):this[`_${l}`]}toRgb(){return X(this._hue,this._saturation,this._value)}fromString(l){if(!l){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const a=(t,r,s)=>{this._hue=Math.max(0,Math.min(360,t)),this._saturation=Math.max(0,Math.min(100,r)),this._value=Math.max(0,Math.min(100,s)),this.doOnChange()};if(l.includes("hsl")){const t=l.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,s)=>s>2?Number.parseFloat(r):Number.parseInt(r,10));if(t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3){const{h:r,s,v:n}=Qt(t[0],t[1],t[2]);a(r,s,n)}}else if(l.includes("hsv")){const t=l.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,s)=>s>2?Number.parseFloat(r):Number.parseInt(r,10));t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3&&a(t[0],t[1],t[2])}else if(l.includes("rgb")){const t=l.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,s)=>s>2?Number.parseFloat(r):Number.parseInt(r,10));if(t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3){const{h:r,s,v:n}=Be(t[0],t[1],t[2]);a(r,s,n)}}else if(l.includes("#")){const t=l.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(t))return;let r,s,n;t.length===3?(r=z(t[0]+t[0]),s=z(t[1]+t[1]),n=z(t[2]+t[2])):(t.length===6||t.length===8)&&(r=z(t.slice(0,2)),s=z(t.slice(2,4)),n=z(t.slice(4,6))),t.length===8?this._alpha=z(t.slice(6))/255*100:(t.length===3||t.length===6)&&(this._alpha=100);const{h:f,s:o,v:h}=Be(r,s,n);a(f,o,h)}}compare(l){return Math.abs(l._hue-this._hue)<2&&Math.abs(l._saturation-this._saturation)<1&&Math.abs(l._value-this._value)<1&&Math.abs(l._alpha-this._alpha)<1}doOnChange(){const{_hue:l,_saturation:a,_value:t,_alpha:r,format:s}=this;if(this.enableAlpha)switch(s){case"hsl":{const n=He(l,a/100,t/100);this.value=`hsla(${l}, ${Math.round(n[1]*100)}%, ${Math.round(n[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${l}, ${Math.round(a)}%, ${Math.round(t)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${Oe(X(l,a,t))}${ie(r*255/100)}`;break}default:{const{r:n,g:f,b:o}=X(l,a,t);this.value=`rgba(${n}, ${f}, ${o}, ${this.get("alpha")/100})`}}else switch(s){case"hsl":{const n=He(l,a/100,t/100);this.value=`hsl(${l}, ${Math.round(n[1]*100)}%, ${Math.round(n[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${l}, ${Math.round(a)}%, ${Math.round(t)}%)`;break}case"rgb":{const{r:n,g:f,b:o}=X(l,a,t);this.value=`rgb(${n}, ${f}, ${o})`;break}default:this.value=Oe(X(l,a,t))}}}const ea=R({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0}},setup(e){const l=Q("color-predefine"),{currentColor:a}=lt(We),t=$(s(e.colors,e.color));P(()=>a.value,n=>{const f=new Z;f.fromString(n),t.value.forEach(o=>{o.selected=f.compare(o)})}),st(()=>{t.value=s(e.colors,e.color)});function r(n){e.color.fromString(e.colors[n])}function s(n,f){return n.map(o=>{const h=new Z;return h.enableAlpha=!0,h.format="rgba",h.fromString(o),h.selected=h.value===f.value,h})}return{rgbaColors:t,handleSelect:r,ns:l}}}),ta=["onClick"];function aa(e,l,a,t,r,s){return y(),S("div",{class:_(e.ns.b())},[v("div",{class:_(e.ns.e("colors"))},[(y(!0),S(Y,null,G(e.rgbaColors,(n,f)=>(y(),S("div",{key:e.colors[f],class:_([e.ns.e("color-selector"),e.ns.is("alpha",n._alpha<100),{selected:n.selected}]),onClick:o=>e.handleSelect(f)},[v("div",{style:I({backgroundColor:n.value})},null,4)],10,ta))),128))],2)],2)}var la=te(ea,[["render",aa],["__file","predefine.vue"]]);const sa=R({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const l=Q("color-svpanel"),a=ce(),t=$(0),r=$(0),s=$("hsl(0, 100%, 50%)"),n=N(()=>{const h=e.color.get("hue"),C=e.color.get("value");return{hue:h,value:C}});function f(){const h=e.color.get("saturation"),C=e.color.get("value"),d=a.vnode.el,{clientWidth:M,clientHeight:k}=d;r.value=h*M/100,t.value=(100-C)*k/100,s.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function o(h){const d=a.vnode.el.getBoundingClientRect(),{clientX:M,clientY:k}=_e(h);let b=M-d.left,w=k-d.top;b=Math.max(0,b),b=Math.min(b,d.width),w=Math.max(0,w),w=Math.min(w,d.height),r.value=b,t.value=w,e.color.set({saturation:b/d.width*100,value:100-w/d.height*100})}return P(()=>n.value,()=>{f()}),ee(()=>{J(a.vnode.el,{drag:h=>{o(h)},end:h=>{o(h)}}),f()}),{cursorTop:t,cursorLeft:r,background:s,colorValue:n,handleDrag:o,update:f,ns:l}}}),oa=v("div",null,null,-1),na=[oa];function ra(e,l,a,t,r,s){return y(),S("div",{class:_(e.ns.b()),style:I({backgroundColor:e.background})},[v("div",{class:_(e.ns.e("white"))},null,2),v("div",{class:_(e.ns.e("black"))},null,2),v("div",{class:_(e.ns.e("cursor")),style:I({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},na,6)],6)}var ia=te(sa,[["render",ra],["__file","sv-panel.vue"]]);const ua=["onKeydown"],ca=["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex"],da=R({name:"ElColorPicker"}),fa=R({...da,props:Yt,emits:Gt,setup(e,{expose:l,emit:a}){const t=e,{t:r}=ot(),s=Q("color"),{formItem:n}=nt(),f=rt(),o=it(),{inputId:h,isLabeledByFormItem:C}=ut(t,{formItemContext:n}),d=$(),M=$(),k=$(),b=$(),w=$(),O=$(),{isFocused:g,handleFocus:u,handleBlur:p}=ct(w,{beforeBlur(c){var E;return(E=b.value)==null?void 0:E.isFocusInsideContent(c)},afterBlur(){j(!1),q()}}),x=c=>{if(o.value)return Ce();u(c)};let U=!0;const V=xe(new Z({enableAlpha:t.showAlpha,format:t.colorFormat||"",value:t.modelValue})),H=$(!1),F=$(!1),B=$(""),m=N(()=>!t.modelValue&&!F.value?"transparent":qe(V,t.showAlpha)),ae=N(()=>!t.modelValue&&!F.value?"":V.value),Ke=N(()=>C.value?void 0:t.label||r("el.colorpicker.defaultLabel")),Ue=N(()=>C.value?n==null?void 0:n.labelId:void 0),je=N(()=>[s.b("picker"),s.is("disabled",o.value),s.bm("picker",f.value),s.is("focused",g.value)]);function qe(c,E){if(!(c instanceof Z))throw new TypeError("color should be instance of _color Class");const{r:A,g:Me,b:Ee}=c.toRgb();return E?`rgba(${A}, ${Me}, ${Ee}, ${c.get("alpha")/100})`:`rgb(${A}, ${Me}, ${Ee})`}function j(c){H.value=c}const le=dt(j,100,{leading:!0});function ke(){o.value||j(!0)}function ye(){le(!1),q()}function q(){se(()=>{t.modelValue?V.fromString(t.modelValue):(V.value="",se(()=>{F.value=!1}))})}function Xe(){o.value||le(!H.value)}function we(){V.fromString(B.value)}function Ye(){const c=V.value;a(ge,c),a("change",c),t.validateEvent&&(n==null||n.validate("change").catch(E=>Ae())),le(!1),se(()=>{const E=new Z({enableAlpha:t.showAlpha,format:t.colorFormat||"",value:t.modelValue});V.compare(E)||q()})}function Ge(){le(!1),a(ge,null),a("change",null),t.modelValue!==null&&t.validateEvent&&(n==null||n.validate("change").catch(c=>Ae())),q()}function Ze(c){if(H.value&&(ye(),g.value)){const E=new FocusEvent("focus",c);p(E)}}function $e(c){c.preventDefault(),c.stopPropagation(),j(!1),q()}function Je(c){switch(c.code){case ve.enter:case ve.space:c.preventDefault(),c.stopPropagation(),ke(),O.value.focus();break;case ve.esc:$e(c);break}}function Qe(){w.value.focus()}function Ce(){w.value.blur()}return ee(()=>{t.modelValue&&(B.value=ae.value)}),P(()=>t.modelValue,c=>{c?c&&c!==V.value&&(U=!1,V.fromString(c)):F.value=!1}),P(()=>ae.value,c=>{B.value=c,U&&a("activeChange",c),U=!0}),P(()=>V.value,()=>{!t.modelValue&&!F.value&&(F.value=!0)}),P(()=>H.value,()=>{se(()=>{var c,E,A;(c=d.value)==null||c.update(),(E=M.value)==null||E.update(),(A=k.value)==null||A.update()})}),ft(We,{currentColor:ae}),l({color:V,show:ke,hide:ye,focus:Qe,blur:Ce}),(c,E)=>(y(),W(i(gt),{ref_key:"popper",ref:b,visible:H.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[i(s).be("picker","panel"),i(s).b("dropdown"),c.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",transition:`${i(s).namespace.value}-zoom-in-top`,persistent:"",onHide:E[2]||(E[2]=A=>j(!1))},{content:T(()=>[he((y(),S("div",{onKeydown:Fe($e,["esc"])},[v("div",{class:_(i(s).be("dropdown","main-wrapper"))},[L(Xt,{ref_key:"hue",ref:d,class:"hue-slider",color:i(V),vertical:""},null,8,["color"]),L(ia,{ref_key:"sv",ref:M,color:i(V)},null,8,["color"])],2),c.showAlpha?(y(),W(Ut,{key:0,ref_key:"alpha",ref:k,color:i(V)},null,8,["color"])):re("v-if",!0),c.predefine?(y(),W(la,{key:1,ref:"predefine",color:i(V),colors:c.predefine},null,8,["color","colors"])):re("v-if",!0),v("div",{class:_(i(s).be("dropdown","btns"))},[v("span",{class:_(i(s).be("dropdown","value"))},[L(i(ht),{ref_key:"inputRef",ref:O,modelValue:B.value,"onUpdate:modelValue":E[0]||(E[0]=A=>B.value=A),"validate-event":!1,size:"small",onKeyup:Fe(we,["enter"]),onBlur:we},null,8,["modelValue","onKeyup"])],2),L(i(be),{class:_(i(s).be("dropdown","link-btn")),text:"",size:"small",onClick:Ge},{default:T(()=>[ue(D(i(r)("el.colorpicker.clear")),1)]),_:1},8,["class"]),L(i(be),{plain:"",size:"small",class:_(i(s).be("dropdown","btn")),onClick:Ye},{default:T(()=>[ue(D(i(r)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,ua)),[[i(vt),Ze]])]),default:T(()=>[v("div",{id:i(h),ref_key:"triggerRef",ref:w,class:_(i(je)),role:"button","aria-label":i(Ke),"aria-labelledby":i(Ue),"aria-description":i(r)("el.colorpicker.description",{color:c.modelValue||""}),"aria-disabled":i(o),tabindex:i(o)?-1:c.tabindex,onKeydown:Je,onFocus:x,onBlur:E[1]||(E[1]=(...A)=>i(p)&&i(p)(...A))},[i(o)?(y(),S("div",{key:0,class:_(i(s).be("picker","mask"))},null,2)):re("v-if",!0),v("div",{class:_(i(s).be("picker","trigger")),onClick:Xe},[v("span",{class:_([i(s).be("picker","color"),i(s).is("alpha",c.showAlpha)])},[v("span",{class:_(i(s).be("picker","color-inner")),style:I({backgroundColor:i(m)})},[he(L(i(Te),{class:_([i(s).be("picker","icon"),i(s).is("icon-arrow-down")])},{default:T(()=>[L(i(pt))]),_:1},8,["class"]),[[Ne,c.modelValue||F.value]]),he(L(i(Te),{class:_([i(s).be("picker","empty"),i(s).is("icon-close")])},{default:T(()=>[L(i(mt))]),_:1},8,["class"]),[[Ne,!c.modelValue&&!F.value]])],6)],2)],2)],42,ca)]),_:1},8,["visible","popper-class","transition"]))}});var ha=te(fa,[["__file","color-picker.vue"]]);const va=bt(ha);const pa=[{key:12},{key:14},{key:16},{key:18},{key:20},{key:22},{key:24},{key:28},{key:32},{key:36}],ma=[{key:400},{key:500},{key:600},{key:700},{key:800},{key:900}],ze=["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","rgba(255, 69, 0, 0.68)","rgb(255, 120, 0)","hsv(51, 100, 98)","hsva(120, 40, 94, 0.5)","hsl(181, 100%, 37%)","hsla(209, 100%, 56%, 0.73)","#c7158577"],ga=[{key:0,label:"背景颜色"},{key:1,label:"字体"},{key:2,label:"背景图片"},{key:3,label:"标签"}];const ba=e=>(Ft("data-v-60250511"),e=e(),Tt(),e),_a={class:"message"},ka={class:"center_box !pt-[80px]"},ya={class:"flex items-center justify-center !h-[1rem]"},wa={class:"top-header"},$a={class:"flex items-center"},Ca={class:"nick-name"},Ma={class:"bottom"},Ea={class:"tag"},Sa={class:"!mt-[10px] !h-[20rem]"},La={class:"tab"},Va=["onClick"],Fa={class:"!h-[12rem] !p-[15px]"},Ta={key:0},Na={key:1,class:"flex items-center"},Aa={key:2},Ia={key:3},Ha={class:"!h-[4rem] !p-[15px] flex justify-center items-center"},Pa={key:0,class:"loading"},Oa=ba(()=>v("div",{class:"coffee_cup"},null,-1)),Ba=[Oa],za={__name:"publish",setup(e){const l=$t(),a=Ct(),t=kt(),{getUserInfo:r}=yt(t),s=$(!1),n=$([]);function f(g){var u;window.getSelection?(g.focus(),u=window.getSelection(),u.selectAllChildren(g),u.collapseToEnd()):document.selection&&(u=document.selection.createRange(),u.moveToElementText(g),u.collapse(!1),u.select())}const o=xe({id:0,message:"",color:"#676767",font_size:16,font_weight:500,bg_color:"transparent",bg_url:"",user_id:0,tag:"",nick_name:"",bgList:[]}),h=Object.assign({...o}),C=$(0),d=$(""),M=St(()=>{o.message=d.value.innerHTML},100),k=()=>{d.value.innerHTML=="留下点什么再走吧~"&&(d.value.innerHTML=""),f(d.value)},b=async()=>{if(!o.message){oe({offset:60,title:"温馨提示",message:ne("div",{style:"color: #e6c081; font-weight: 600;"},"留言内容不能为空")});return}if(!o.tag){oe({offset:60,title:"温馨提示",message:ne("div",{style:"color: #e6c081; font-weight: 600;"},"请选择标签，没有标签可以自行创建")});return}if(o.id||(o.user_id=r.value.id),s.value=!0,o.bgList.length&&!o.bgList[0].id){const u=await Ot(o.bgList[0]);if(u.code==0){const{url:p}=u.result;o.bg_url=p}}let g;o.id?g=await It(o):g=await Ht(o),g&&g.code==0?(oe({offset:60,title:"提示",message:ne("div",{style:"color: #7ec050; font-weight: 600;"},o.id?"修改成功":"留言成功")}),Object.assign(o,h),s.value=!1,Mt("blog-message-item"),Ie("message-refresh",!0),Ie("message-need-scroll",!0),l.go(-1)):oe({offset:60,title:"错误提示",message:ne("div",{style:"color: #f56c6c; font-weight: 600;"},g.message)})},w=async()=>{const g=await Pt();g.code==0&&(n.value=Array.isArray(g.result)?g.result.map((u,p)=>({key:p+1,label:u.tag})):[])},O=g=>{C.value=g};return ee(async()=>{if(await w(),a.query.type=="edit"){const g=wt("blog-message-item");g&&(Object.assign(o,g),g.bg_url&&(o.bgList=[{id:1,name:g.bg_url.split("/").slice(-1),url:g.bg_url}])),d.value&&(d.value.innerHTML=o.message)}else d.value&&(d.value.innerHTML="留下点什么再走吧~"),o.nick_name=r.value.nick_name||"游客",o.avatar=r.value.avatar||"游客",Array.isArray(n.value)&&n.value.length>0&&(o.tag=n.value[0].label)}),(g,u)=>{const p=Lt,x=Vt,U=Et,V=va,H=At,F=Nt,B=be;return y(),S("div",_a,[v("div",ka,[v("div",ya,[L(p,{size:"1.2rem",typeList:["世间真假，皆我所求，苦与乐，都可奉酒。"]})]),L(U,{class:"!mt-[2rem]"},{default:T(()=>[v("div",{class:"!h-[22rem]",style:I({backgroundColor:o.bg_color})},[v("div",{class:"top",style:I({backgroundImage:o.bg_url?`url(${o.bg_url})`:""})},[v("div",wa,[v("div",$a,[L(x,{class:"left-avatar",src:o.avatar},{default:T(()=>[ue(D(o.nick_name),1)]),_:1},8,["src"]),v("span",Ca,D(o.nick_name),1)])]),v("div",{class:"content",style:I({color:o.color,fontSize:o.font_size+"px",fontWeight:o.font_weight}),ref_key:"inputCommentRef",ref:d,contenteditable:"true",onInput:u[0]||(u[0]=m=>i(M)(g.val)),onFocus:k},null,36)],4),v("div",Ma,[v("div",Ea,D(o.tag),1)])],4)]),_:1}),v("div",Sa,[v("ul",La,[(y(!0),S(Y,null,G(i(ga),m=>(y(),S("li",{key:m.key,onClick:ae=>O(m.key)},[v("div",{class:_([m.key==C.value?"active-tab":"","tab-li"])},D(m.label),3)],8,Va))),128))]),v("div",Fa,[C.value==0?(y(),S("div",Ta,[L(V,{modelValue:o.bg_color,"onUpdate:modelValue":u[1]||(u[1]=m=>o.bg_color=m),"show-alpha":"",predefine:i(ze)},null,8,["modelValue","predefine"])])):C.value==1?(y(),S("div",Na,[L(F,{modelValue:o.font_size,"onUpdate:modelValue":u[2]||(u[2]=m=>o.font_size=m),class:"!w-[160px] !mr-[20px]",placeholder:"请选择字体大小",size:"large"},{default:T(()=>[(y(!0),S(Y,null,G(i(pa),m=>(y(),W(H,{key:m.key,label:m.key,value:m.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),L(V,{modelValue:o.color,"onUpdate:modelValue":u[3]||(u[3]=m=>o.color=m),"show-alpha":"",predefine:i(ze)},null,8,["modelValue","predefine"]),L(F,{modelValue:o.font_weight,"onUpdate:modelValue":u[4]||(u[4]=m=>o.font_weight=m),class:"!w-[160px] !ml-[20px]",placeholder:"请选择字体宽度",size:"large"},{default:T(()=>[(y(!0),S(Y,null,G(i(ma),m=>(y(),W(H,{key:m.key,label:m.key,value:m.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])):C.value==2?(y(),S("div",Aa,[L(Bt,{"file-list":o.bgList,"onUpdate:fileList":u[5]||(u[5]=m=>o.bgList=m),limit:1,width:280,height:140,preview:!1},null,8,["file-list"])])):(y(),S("div",Ia,[L(F,{modelValue:o.tag,"onUpdate:modelValue":u[6]||(u[6]=m=>o.tag=m),class:"!w-[180px]",placeholder:"请选择或输入标签",size:"large",filterable:"","allow-create":"",clearable:""},{default:T(()=>[(y(!0),S(Y,null,G(n.value,m=>(y(),W(H,{key:m.key,label:m.label,value:m.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]))]),v("div",Ha,[L(B,{disabled:s.value,loading:s.value,class:"leave-message",onClick:b},{default:T(()=>[ue(D(s.value?"努力上传中...":i(a).query.type=="edit"?"保存":"发布"),1)]),_:1},8,["disabled","loading"])])])]),s.value?(y(),S("div",Pa,Ba)):re("",!0)])}}},Ya=_t(za,[["__scopeId","data-v-60250511"]]);export{Ya as default};
