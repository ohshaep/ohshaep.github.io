import{a1 as z,_ as E,A as v,V as ee,H as K,n as te,o as l,c,a as o,t as P,y as J,z as _e,k as C,d as O,e as H,F as W,f as Q,b as R,q as ve,w as G,h as N,l as M,I as F,bt as he,aG as ye,J as X,K as V,az as ne,ap as $,S as T,D as Y,v as ae,x as oe,ba as ge,am as ke,m as we,aE as Ie,aD as xe}from"./index-1220b33e.js";import{P as Ce}from"./pagination-cabc0101.js";import{b as be}from"./el-dropdown-f7136a8d.js";import"./el-scrollbar-0ecdf6c2.js";import{c as le,a as re}from"./like-3359d30f.js";import{E as ie}from"./index-8ef6b4c4.js";const $e=e=>new Promise((n,g)=>{z.post("/api/comment/add",e).then(t=>{n(t)})}),ce=e=>new Promise((n,g)=>{z.post("/api/comment/apply",e).then(t=>{n(t)})}),ue=e=>new Promise((n,g)=>{z.put("/api/comment/thumbUp/"+e,{}).then(t=>{n(t)})}),de=e=>new Promise((n,g)=>{z.put("/api/comment/cancelThumbUp/"+e,{}).then(t=>{n(t)})}),pe=(e,n=0)=>new Promise((g,t)=>{z.delete(`/api/comment/delete/${e}/${n}`,{}).then(h=>{g(h)})}),Te=e=>new Promise((n,g)=>{z.post("/api/comment/frontGetParentComment",e).then(t=>{n(t)})}),Se=e=>new Promise((n,g)=>{z.post("/api/comment/frontGetChildrenComment",e).then(t=>{n(t)})}),Le=e=>new Promise((n,g)=>{z.post("/api/comment/getCommentTotal",e).then(t=>{n(t)})});function se(){var e;if(window.getSelection)return e=window.getSelection(),e.focusOffset;if(document.selection)return e=document.selection.createRange(),e.focusOffset}function D(e){let n=0;switch(e){case"article":n=1;break;case"talk":n=2;break;case"message":n=3;break;case"comment":n=4}return n}const Ue=["title"],Pe={__name:"index",props:{text:{type:String,default:""},maxLines:{type:Number,default:3},width:{type:Number,default:0},color:{String,default:""},fontSize:{type:Number,default:14}},setup(e){const n=e,g=v(!1),t=v(!1),h=v(null),r=v(null),p=v(null),i=v(0),m=v(0),S=v(0),y=ee(()=>({fontSize:n.fontSize+"px"})),w=ee(()=>{const u=i.value*n.maxLines<n.text.length*n.fontSize+n.fontSize;let k=n.text;return u&&t.value&&!g.value&&(k=n.text.slice(0,i.value)+"..."),k});function A(u,k){te(()=>{Math.abs(u-k)<=1||(L()?k=i.value:u=i.value,i.value=Math.floor((u+k)/2),console.log(i.value),A(u,k))})}function L(){const{len:u,lastWidth:k}=b();if(u<n.maxLines)return!1;if(n.maxLines){const j=u===n.maxLines&&k+m.value>S.value;if(u>n.maxLines||j)return!0}return!1}function b(){const u=p.value.getClientRects();return u.length?{len:u.length,lastWidth:u[u.length-1].width}:{len:1,lastWidth:0}}function U(){g.value=!g.value}return K(()=>{const{len:u}=b();u>n.maxLines&&(t.value=!0,te(()=>{m.value=r.value.clientWidth,S.value=h.value.clientWidth,A(0,n.text.length)}))}),(u,k)=>(l(),c("div",{class:"text-ellipsis",ref_key:"textOverflowRef",ref:h,style:J(y.value)},[o("span",{class:"keep",ref_key:"overEllipsisRef",ref:p,style:J({color:e.color}),title:w.value},P(w.value),13,Ue),t.value?(l(),c("span",{key:0,class:"slot-box",ref_key:"slotRef",ref:r},[_e(u.$slots,"default",{clickToggle:U,expanded:g.value},void 0,!0)],512)):C("",!0)],4))}},Ae=E(Pe,[["__scopeId","data-v-7c40ae9a"]]);const Re={class:"pop"},Me={class:"icon-list"},je=["innerHTML","onClick"],ze={__name:"IconList",emits:["selectIcon"],setup(e,{emit:n}){const g=n,t=["&#128512","&#128513","&#128514","&#128515","&#128516","&#128517","&#128518","&#128519","&#128520","&#128521","&#128522","&#128523","&#128524","&#128525","&#128526","&#128527","&#128528","&#128529","&#128530","&#128531","&#128532","&#128533","&#128534","&#128535","&#128536","&#128537","&#128538","&#128539","&#128541","&#128542","&#128543","&#128544","&#128545","&#128546","&#128547","&#128548","&#128549","&#128550","&#128551","&#128552","&#128553","&#128554","&#128555","&#128556","&#128557","&#128558","&#128559","&#128560","&#128561","&#128562","&#128563","&#128564","&#128565","&#128566","&#128567","&#128568","&#128569","&#128570","&#128571","&#128572","&#128573","&#128574","&#128575","&#128576","&#128577","&#128578","&#128579","&#128580","&#128581","&#128582","&#128583","&#128584","&#128585","&#128586","&#128587","&#128588","&#128589","&#128590","&#128591","&#129313","&#129314","&#129315","&#129316","&#129317","&#129318","&#129319","&#129320","&#129321","&#129323","&#129324","&#129325","&#129326","&#129327","&#129328","&#129329","&#129330","&#129331","&#129332","&#129333"],h=r=>{r&&g("selectIcon",r)};return(r,p)=>{const i=ve,m=be;return l(),O(m,{trigger:"click",class:"search-down",placement:"bottom-start"},{dropdown:H(()=>[o("div",Re,[o("div",Me,[(l(),c(W,null,Q(t,S=>o("div",{class:"w-[30px] h-[30px] cursor-pointer",key:S},[o("div",{innerHTML:S,style:{"font-size":"2rem"},onClick:y=>h(S)},null,8,je)])),64))])])]),default:H(()=>[R(i,{name:"smileFace",width:"25px"})]),_:1})}}},Be=E(ze,[["__scopeId","data-v-0fe9d344"]]);const He={class:"header"},Oe={key:0,class:"placeholder"},Ne={key:0,class:"!mt-[0.5rem] flex justify-between items-center animate__animated animate__fadeIn"},Ee={class:"cursor-pointer"},We={key:0},Ge={__name:"CommentInput",props:{inputText:{type:String,default:""},showPublishButton:{type:Boolean,default:!1},placeholder:{type:String,default:""},parent:{type:Boolean,default:!1}},emits:["update:inputText","publish"],setup(e,{expose:n,emit:g}){const t=g,h=e,r=v(""),p=v(!1),i=v(0),m=he(()=>{t("update:inputText",r.value.innerHTML)},100),S=()=>{i.value=se()},y=()=>{p.value=!0},w=b=>{const U=b;if(i.value==r.value.innerHTML.length)r.value.innerHTML+=U;else{let u=r.value.innerHTML,k=u.slice(0,i.value),j=u.slice(i.value);r.value.innerHTML=k+U+j}i.value+=2,t("update:inputText",r.value.innerHTML)},A=()=>{t("publish"),p.value=!1},L=()=>{i.value=se(),r.value.innerHTML="",t("update:inputText",r.value.innerHTML)};return G(()=>h.showPublishButton,b=>{p.value=b}),K(()=>{r.value&&(r.value.innerHTML=h.inputText)}),n({clear:L}),(b,U)=>{const u=ye;return l(),c("div",{class:N(e.parent?"parent-input":"children-input")},[o("div",He,[e.placeholder?(l(),c("div",Oe,"@ "+P(e.placeholder),1)):C("",!0),o("div",{ref_key:"inputCommentRef",ref:r,contenteditable:"true",class:N(["comment-content",e.parent?"parent-input-inputText":"children-input-inputText","input-inputText","!mt-[5px]"]),style:J({"--size":e.parent?"1.2rem":"1rem"}),rows:"3",cols:"20",onInput:U[0]||(U[0]=k=>M(m)(b.val)),onFocus:y,onMouseleave:S,placeholder:"期待能留下你的脚印~"},null,38)]),p.value?(l(),c("div",Ne,[o("div",Ee,[R(Be,{onSelectIcon:w})]),e.inputText?(l(),c("div",We,[R(u,{type:"danger",class:"clear-btn",onClick:L},{default:H(()=>[F("清空")]),_:1}),R(u,{type:"primary",class:"publish-btn",onClick:A},{default:H(()=>[F("发布")]),_:1})])):C("",!0)])):C("",!0)],2)}}},fe=E(Ge,[["__scopeId","data-v-7a831aa8"]]);const me=e=>(ae("data-v-0a72fda2"),e=e(),oe(),e),Fe={class:"comment-children"},Ve={key:0,class:"animate__animated animate__fadeIn"},De={class:"!w-[30px] flex justify-start"},qe={class:"!ml-[5px]"},Je={class:"!mr-[0.5rem]"},Ke={key:0,class:"up"},Qe=me(()=>o("span",{class:"!mr-[1rem] content-apply"},"回复",-1)),Xe=me(()=>o("span",{class:"to-name"},"@",-1)),Ye={class:"!mr-[3px] to-name"},Ze=["innerHTML"],et={class:"!mt-[0.5rem]"},tt={class:"!mr-[1rem] ip"},st=["onClick"],nt={class:"!ml-[0.5rem]"},at=["onClick"],ot=["onClick"],lt={class:"!mt-[0.5rem]"},rt={key:2,class:"w-[100%] flex justify-start items-center"},it={__name:"ChildrenItem",props:{type:{type:String,default:()=>{}},parent_id:{type:Number,default:()=>{}},id:{type:Number,default:()=>{}},parentShowApply:{type:Boolean,default:!1},authorId:{type:Number,default:()=>{}}},emits:["parentApply","refresh","changeShowApplyInput"],setup(e,{expose:n,emit:g}){const t=X(),h=g,r=e,p=V({current:1,size:5,type:"",for_id:"",parent_id:"",loading:!1,user_id:t.getUserInfo.id}),i=v([]),m=v(0),S=v(0),y=v(!1),w=V({to_name:"",to_avatar:"",to_id:""}),A=V({...w}),L=v(""),b=v(),U=v(!1),u=()=>{h("changeShowApplyInput",!1),U.value=!1,y.value=!1,Object.assign(w,A)},k=async a=>{p.loading=!0,a=="clear"&&(p.current=1),p.type=D(r.type);const f=await Se(p);if(f&&f.code==0){const{list:I,total:x}=f.result;i.value=I,m.value=x-0}else $({offset:60,title:"错误提示",message:T("div",{style:"color: #f56c6c; font-weight: 600;"},f.message)});p.loading=!1},j=async(a,f)=>{let I;a.is_like?(I=await de(a.id),await le({for_id:a.id,type:4,user_id:t.getUserInfo.id}),I&&I.code==0&&(i.value[f].is_like=!1,i.value[f].thumbs_up--,$({offset:60,title:"提示",message:T("div",{style:"color: #7ec050; font-weight: 600;"},"已取消点赞")}))):(I=await ue(a.id),await re({for_id:a.id,type:4,user_id:t.getUserInfo.id}),I&&I.code==0&&(i.value[f].is_like=!0,i.value[f].thumbs_up++,$({offset:60,title:"提示",message:T("div",{style:"color: #7ec050; font-weight: 600;"},"点赞成功")})))},B=(a,f,I=0)=>{f=="parent"?(U.value=!0,h("changeShowApplyInput",!0)):(U.value=!1,S.value=I,h("changeShowApplyInput",!1)),w.parent_id=r.parent_id,w.from_id=a.from_id,w.from_avatar=a.from_avatar,w.from_name=a.from_name,L.value="",y.value=!0},d=a=>{ie.confirm("确认删除此条评论吗","提示",{confirmButtonText:"确认",cancelButtonText:"取消"}).then(async()=>{const f=await pe(a,r.parent_id);f&&f.code==0?($({offset:60,title:"提示",message:T("div",{style:"color: #7ec050; font-weight: 600;"},"删除成功")}),k(),h("refresh")):$({offset:60,title:"错误提示",message:T("div",{style:"color: #f56c6c; font-weight: 600;"},f.message)})})},s=a=>{p.current=a.current,k()},_=async()=>{if(!t.getUserInfo.id){$({offset:60,title:"温馨提示",message:T("div",{style:"color: #e6c081; font-weight: 600;"},"请先登录")});return}if(U.value){w.content=L.value,h("parentApply",w),u();return}const a={from_id:t.getUserInfo.id,from_avatar:t.getUserInfo.avatar,from_name:t.getUserInfo.nick_name,to_id:w.from_id,to_avatar:w.from_avatar,to_name:w.from_name,content:L.value,parent_id:w.parent_id,for_id:r.id,type:0,author_id:r.authorId};a.type=D(r.type);const f=await ce(a);f.code==0?(L.value="",$({offset:60,title:"提示",message:T("div",{style:"color: #7ec050; font-weight: 600;"},"评论成功")}),u(),p.current=1,k(),b.value&&b.value.clear()):$({offset:60,title:"错误提示",message:T("div",{style:"color: #f56c6c; font-weight: 600;"},f.message)})};return G(()=>r.parent_id,a=>{Object.assign(p,{for_id:r.id,type:r.type,parent_id:a}),k()},{immediate:!0}),n({getComment:k,closeComment:u,apply:B}),(a,f)=>{const I=Y;return l(),c("div",Fe,[i.value.length>0?(l(),c("div",Ve,[(l(!0),c(W,null,Q(i.value,(x,q)=>(l(),c("div",{class:"!mt-[0.5rem] flex justify-start items-start",key:x.id},[o("div",De,[R(I,{src:x.from_avatar,size:24,shape:"circle"},null,8,["src"])]),o("div",qe,[o("div",null,[o("span",Je,P(x.from_name),1),x.from_id==1?(l(),c("span",Ke,"UP")):C("",!0),Qe,Xe,o("span",Ye,P(x.to_name)+": ",1),o("span",{class:"content",innerHTML:x.content},null,8,Ze)]),o("div",et,[o("span",tt,P(`IP: ${x.ipAddress}`),1),o("span",{class:N(["thumbs","!mr-[1rem]","iconfont","icon-icon1",x.is_like?"like-active":""]),onClick:Z=>j(x,q)},[o("span",nt,P(x.thumbs_up),1)],10,st),M(t).getUserInfo.id!=x.from_id?(l(),c("span",{key:0,class:"!mr-[1rem] apply cursor-pointer",onClick:Z=>B(x,"children",q)},"回复",8,at)):C("",!0),y.value&&!U.value&&q==S.value?(l(),c("span",{key:1,class:"!mr-[1rem] close cursor-pointer",onClick:u},"关闭")):C("",!0),M(t).getUserInfo.id==x.from_id||M(t).getUserInfo.role==1?(l(),c("span",{key:2,class:"!mr-[1rem] delete cursor-pointer",onClick:Z=>d(x.id)},"删除",8,ot)):C("",!0)]),o("div",lt,P(x.createdAt),1)])]))),128))])):C("",!0),p.loading?(l(),O(ne,{key:1,size:24})):C("",!0),y.value?(l(),c("div",rt,[R(fe,{ref_key:"commentInputRef",ref:b,inputText:L.value,"onUpdate:inputText":f[0]||(f[0]=x=>L.value=x),placeholder:w.from_name,"show-publish-button":!1,onPublish:_},null,8,["inputText","placeholder"])])):C("",!0),m.value>0?(l(),O(Ce,{key:3,class:"animate__animated animate__fadeIn",size:p.size,current:p.current,layout:"prev, pager, next",total:m.value,onPagination:s},null,8,["size","current","total"])):C("",!0)])}}},ct=E(it,[["__scopeId","data-v-0a72fda2"]]);const ut={class:"comment-parent"},dt={class:"flex justify-start items-start"},pt={class:"avatar-box"},ft={class:"right !w-[100%]"},mt={class:"cursor-pointer"},_t={key:0,class:"up"},vt={id:"comment-content",class:"!mt-[1rem]"},ht=["innerHTML"],yt=["onClick"],gt={class:"!mt-[0.5rem]"},kt={class:"!mr-[1rem] ip"},wt=["onClick"],It={class:"!ml-[0.5rem]"},xt=["onClick"],Ct=["onClick"],bt=["onClick"],$t={class:"!mt-[0.5rem]"},Tt={key:3,class:"h-[48px]"},St={__name:"ParentItem",props:{active:{type:String,default:"hot"},type:{type:String,default:()=>{}},id:{type:Number,default:()=>{}},authorId:{type:Number,default:()=>{}}},emits:["refresh"],setup(e,{expose:n,emit:g}){const t=X(),h=g,r=e,p=v(),i=V({current:1,size:5,type:0,for_id:0,order:"",user_id:t.getUserInfo.id,loading:!1}),m=v([]),S=v(0),y=async d=>{i.loading=!0,d=="clear"&&(i.current=1),i.type=D(r.type);const s=await Te(i);if(s&&s.code==0){const{list:_,total:a}=s.result;_.forEach(f=>{f.showApplyInput=!1}),m.value=i.current==1?_:m.value.concat(_),S.value=a-0}else $({offset:60,title:"错误提示",message:T("div",{style:"color: #f56c6c; font-weight: 600;"},s.message)});i.loading=!1},w=()=>{i.current++,y()},A=v(0),L=async(d,s)=>{let _;d.is_like?(_=await de(d.id),await le({for_id:d.id,type:4,user_id:t.getUserInfo.id}),_&&_.code==0&&(m.value[s].is_like=!1,m.value[s].thumbs_up--,$({offset:60,title:"提示",message:T("div",{style:"color: #7ec050; font-weight: 600;"},"已取消点赞")}))):(_=await ue(d.id),await re({for_id:d.id,type:4,user_id:t.getUserInfo.id}),_&&_.code==0&&(m.value[s].is_like=!0,m.value[s].thumbs_up++,$({offset:60,title:"提示",message:T("div",{style:"color: #7ec050; font-weight: 600;"},"点赞成功")})))},b=(d,s)=>{m.value[s].showApplyInput=!0,A.value=s,p.value[s].apply(d,"parent")},U=d=>{m.value[d].showApplyInput=!1,A.value=0,p.value[d].closeComment()},u=(d,s)=>{m.value[s].showApplyInput=d},k=()=>{m.value.length&&p.value.forEach(d=>{d.closeComment()})},j=d=>{ie.confirm("确认删除此条评论吗？子级评论也会被删除哦","提示",{confirmButtonText:"确认",cancelButtonText:"取消"}).then(async()=>{const s=await pe(d);s&&s.code==0?($({offset:60,title:"提示",message:T("div",{style:"color: #7ec050; font-weight: 600;"},"删除成功")}),y("clear"),h("refresh")):$({offset:60,title:"错误提示",message:T("div",{style:"color: #f56c6c; font-weight: 600;"},s.message)})})},B=async d=>{const s={from_id:t.getUserInfo.id,from_avatar:t.getUserInfo.avatar,from_name:t.getUserInfo.nick_name,to_id:d.from_id,to_avatar:d.from_avatar,to_name:d.from_name,content:d.content,parent_id:d.parent_id,for_id:r.id,author_id:r.authorId};switch(r.type){case"article":s.type=1;break;case"talk":s.type=2;break;case"message":s.type=3;break}const _=await ce(s);_.code==0?($({offset:60,title:"提示",message:T("div",{style:"color: #7ec050; font-weight: 600;"},"评论成功")}),i.current=1,p.value[A.value].getComment("clear"),A.value=0,h("refresh")):$({offset:60,title:"错误提示",message:T("div",{style:"color: #f56c6c; font-weight: 600;"},_.message)})};return G(()=>r.type,d=>{Object.assign(i,{for_id:r.id,type:d,order:r.active}),y()},{immediate:!0}),G(()=>r.active,d=>{Object.assign(i,{order:d,current:1}),y()},{}),n({getComment:y,closeComment:k}),(d,s)=>{const _=Y;return l(),c("div",ut,[m.value.length?(l(!0),c(W,{key:0},Q(m.value,(a,f)=>(l(),c("div",{class:"!mt-[0.5rem] animate__animated animate__fadeIn",key:f},[o("div",dt,[o("div",pt,[R(_,{class:"avatar",src:a.from_avatar},{default:H(()=>[F(P(a.from_name),1)]),_:2},1032,["src"])]),o("div",ft,[o("div",mt,[F(P(a.from_name)+" ",1),a.from_id==1?(l(),c("span",_t,"UP")):C("",!0)]),o("div",vt,[M(ge)(a.content)?(l(),c("span",{key:0,innerHTML:a.content},null,8,ht)):(l(),O(Ae,{key:1,class:"content",text:a.content,maxLines:3,"font-size":16},{default:H(({clickToggle:I,expanded:x})=>[o("span",{onClick:I,class:"btn"},P(x?"收起":"展开"),9,yt)]),_:2},1032,["text"]))]),o("div",gt,[o("span",kt,P(`IP: ${a.ipAddress}`),1),o("span",{class:N(["thumbs","!mr-[1rem]","iconfont","icon-icon1",a.is_like?"like-active":""]),onClick:I=>L(a,f)},[o("span",It,P(a.thumbs_up),1)],10,wt),o("span",{class:"!mr-[1rem] apply cursor-pointer",onClick:I=>b(a,f)},"回复",8,xt),a.showApplyInput?(l(),c("span",{key:0,class:"!mr-[1rem] close cursor-pointer",onClick:I=>U(f)},"关闭",8,Ct)):C("",!0),M(t).getUserInfo.id==a.from_id||M(t).getUserInfo.role==1?(l(),c("span",{key:1,class:"!mr-[1rem] delete cursor-pointer",onClick:I=>j(a.id)},"删除",8,bt)):C("",!0)]),o("div",$t,P(a.createdAt),1),R(ct,{class:"!mt-[1.5rem]",ref_for:!0,ref_key:"childrenRef",ref:p,type:r.type,id:e.id,parent_id:a.id,"author-id":e.authorId,onParentApply:B,onRefresh:s[0]||(s[0]=I=>h("refresh")),onChangeShowApplyInput:I=>u(I,f)},null,8,["type","id","parent_id","author-id","onChangeShowApplyInput"])])])]))),128)):C("",!0),i.loading?(l(),O(ne,{key:1,size:32})):S.value>m.value.length?(l(),c("div",{key:2,class:"show-more",onClick:w}," 展开更多 ")):(l(),c("div",Tt))])}}},Lt=E(St,[["__scopeId","data-v-f9a45d7c"]]);const Ut=e=>(ae("data-v-41ef4d31"),e=e(),oe(),e),Pt={class:"comment"},At={class:"comment-header"},Rt={class:"flex justify-start items-center"},Mt={key:0,class:"total-value"},jt={key:1,class:"flex items-center"},zt=Ut(()=>o("span",{class:"comment-tab"},"|",-1)),Bt={key:0,id:"commentInput",class:"!mt-[1rem] w-[100%] flex justify-start items-start"},Ht={class:"avatar-box"},Ot={class:"!w-[100%] !ml-[10px]"},Nt={class:"comment-list"},Et={__name:"Comment",props:{type:{type:String,default:()=>{}},id:{type:Number,default:()=>{}},authorId:{type:Number,default:()=>{}},expand:{type:Boolean,default:!1},isShowToggle:{type:Boolean,default:!0}},emits:["refresh"],setup(e,{expose:n,emit:g}){const t=g,h=X(),r=ke(),p=e,i=v("hot"),m=v(0),S=v(null),y=v(!1),w=v(!1),A=v(),L=v(""),b=()=>{y.value=!y.value},U=s=>{i.value=s},u=()=>{h.getUserInfo.id||(Ie.push("/login"),xe("blogLastRouter",r.fullPath))},k=async()=>{if(!h.getUserInfo.id){$({offset:60,title:"温馨提示",message:T("div",{style:"color: #e6c081; font-weight: 600;"},"请先登录")});return}const s={from_id:h.getUserInfo.id,from_avatar:h.getUserInfo.avatar,from_name:h.getUserInfo.nick_name,content:L.value,for_id:p.id,type:0,author_id:p.authorId};switch(p.type){case"article":s.type=1;break;case"talk":s.type=2;break;case"message":s.type=3;break}const _=await $e(s);_.code==0?(L.value="",$({offset:60,title:"提示",message:T("div",{style:"color: #7ec050; font-weight: 600;"},"评论成功")}),S.value&&S.value.getComment("clear"),y.value=!0,w.value=!1,A.value&&A.value.clear(),d()):$({offset:60,title:"错误提示",message:T("div",{style:"color: #f56c6c; font-weight: 600;"},_.message)})},j=s=>{m.value=s},B=async()=>{const s=await Le({type:D(p.type),for_id:p.id});if(s&&s.code==0){const _=s.result;j(_-0)}else $({offset:60,title:"错误提示",message:T("div",{style:"color: #f56c6c; font-weight: 600;"},s.message)})},d=()=>{B(),t("refresh")};return G(()=>p.expand,s=>{y.value=s},{immediate:!0}),K(()=>{B()}),n({toggleExpand:b}),(s,_)=>{const a=Y;return l(),c("div",Pt,[o("div",At,[o("div",Rt,[m.value?(l(),c("span",Mt," 评论 "+P(M(we)(m.value)),1)):C("",!0),m.value&&y.value?(l(),c("div",jt,[o("span",{class:N(["comment-tab",i.value=="hot"?"active-order":""]),onClick:_[0]||(_[0]=f=>U("hot"))},"最热",2),zt,o("span",{class:N(["comment-tab",i.value=="new"?"active-order":""]),onClick:_[1]||(_[1]=f=>U("new"))},"最新",2)])):C("",!0)]),e.isShowToggle?(l(),c(W,{key:0},[m.value?(l(),c("span",{key:0,class:"more",onClick:b},P(y.value?"收起":"查看更多"),1)):(l(),c("span",{key:1,class:"more",onClick:b},P(y.value?"取消发布":"求评论呀~"),1))],64)):!e.isShowToggle&&y.value?(l(),c(W,{key:1},[m.value?(l(),c("span",{key:0,class:"more",onClick:b}," 收起")):(l(),c("span",{key:1,class:"more",onClick:b}," 取消发布 "))],64)):C("",!0)]),y.value?(l(),c("div",Bt,[o("div",Ht,[R(a,{class:"avatar",src:M(h).getUserInfo.avatar,onClick:u},{default:H(()=>[F(P(M(h).getUserInfo.nick_name||"登录"),1)]),_:1},8,["src"])]),o("div",Ot,[R(fe,{ref_key:"commentInputRef",ref:A,inputText:L.value,"onUpdate:inputText":_[2]||(_[2]=f=>L.value=f),"show-publish-button":!1,parent:!0,onPublish:k},null,8,["inputText"])])])):C("",!0),o("div",Nt,[y.value?(l(),O(Lt,{key:0,ref_key:"parentItemRef",ref:S,active:i.value,type:e.type,id:e.id,"author-id":e.authorId,onRefresh:d},null,8,["active","type","id","author-id"])):C("",!0)])])}}},Jt=E(Et,[["__scopeId","data-v-41ef4d31"]]);export{Ae as T,Jt as _};
