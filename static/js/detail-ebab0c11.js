import{_ as b}from"./Comment-10927a74.js";import{_ as w,J as L,al as I,K as z,H as C,aF as H,c,a as t,b as r,e as _,d as M,k as S,aD as d,E as T,o as n,y as o,I as E,t as a,l as m,ba as N,ay as B,ap as f,S as p,D as V,q as D}from"./index-9c00c9ce.js";import{c as R,l as j}from"./message-61b71dcf.js";import{c as A,a as W}from"./like-de195296.js";import"./pagination-5806909c.js";import"./el-select-ce01c66f.js";import"./el-scrollbar-9357c77b.js";import"./strings-d9fd212b.js";import"./hasIn-cbe45c80.js";import"./el-dropdown-0230fa9d.js";import"./castArray-7df2df44.js";import"./index-0a78f20c.js";const $={class:"message"},q={class:"center_box !pt-[80px]"},F={class:"top-header"},J={class:"flex items-center"},K={class:"nick-name"},O=["innerHTML"],U={class:"bottom"},G={class:"left flex items-center"},P={class:"time"},Q={class:"index-tag"},X={class:"flex justify-start items-center option"},Y={__name:"detail",setup(Z){const g=L(),{getUserInfo:l}=I(g),e=z({id:0,message:"",color:"",font_size:16,font_weight:500,bg_color:"",bg_url:"",user_id:0,tag:"",like_times:0,nick_name:"",avatar:"",is_like:!1}),u=async s=>{s.is_like?(await R(s.id)).code==0&&(await A({for_id:s.id,type:3,user_id:l.value.id}),s.like_times--,s.is_like=!1,f({offset:60,title:"提示",message:p("div",{style:"color: #7ec050; font-weight: 600;"},"已取消点赞")})):(await j(s.id)).code==0&&(await W({for_id:s.id,type:3,user_id:l.value.id}),s.like_times++,s.is_like=!0,f({offset:60,title:"提示",message:p("div",{style:"color: #7ec050; font-weight: 600;"},"点赞成功")})),d("message-refresh",!0)},k=()=>{d("message-refresh",!0)};return C(()=>{const s=H("blog-message-item");s&&Object.assign(e,s)}),(s,i)=>{const v=V,h=D,y=T,x=b;return n(),c("div",$,[t("div",q,[r(y,null,{default:_(()=>[t("div",{style:o({backgroundColor:e.bg_color}),class:"message-card animate__animated animate__fadeIn"},[t("div",{class:"top",style:o({backgroundImage:e.bg_url?`url(${e.bg_url})`:""})},[t("div",F,[t("div",J,[r(v,{class:"left-avatar",src:e.avatar},{default:_(()=>[E(a(e.nick_name),1)]),_:1},8,["src"]),t("span",K,a(e.nick_name),1)])]),m(N)(e.message)?(n(),c("div",{key:0,innerHTML:e.message,style:o({color:e.color,fontSize:e.font_size+"px",fontWeight:e.font_weight})},null,12,O)):(n(),c("div",{key:1,style:o({color:e.color,fontSize:e.font_size+"px",fontWeight:e.font_weight})},a(e.message),5))],4),t("div",U,[t("div",G,[t("div",P,a(m(B)(e.createdAt))+"前",1),t("div",Q,"#"+a(e.tag),1)]),t("div",X,[r(h,{name:e.is_like?"redHeart":"greyHeart",width:1.5,onClick:i[0]||(i[0]=ee=>u(e,s.index))},null,8,["name"]),t("span",{style:o({color:e.is_like?"#f00":""}),class:"!ml-[5px]"},a(e.like_times||0),5)])])],4)]),_:1}),e.id?(n(),M(x,{key:0,class:"w-[100%] !mt-[1rem]",type:"message",expand:!0,id:e.id,"author-id":e.user_id,onRefresh:k},null,8,["id","author-id"])):S("",!0)])])}}},fe=w(Y,[["__scopeId","data-v-f9c34748"]]);export{fe as default};
